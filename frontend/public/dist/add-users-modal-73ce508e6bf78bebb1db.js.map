{"version":3,"file":"add-users-modal-73ce508e6bf78bebb1db.js","sources":["webpack:///./public/components/modals/add-users-modal.tsx"],"sourcesContent":["import * as _ from 'lodash-es';\nimport * as React from 'react';\n\nimport { GroupModel } from '../../models';\nimport { GroupKind, k8sPatch } from '../../module/k8s';\nimport {\n  ModalBody,\n  ModalComponentProps,\n  ModalSubmitFooter,\n  ModalTitle,\n  createModalLauncher,\n} from '../factory/modal';\nimport { ListInput, HandlePromiseProps, withHandlePromise } from '../utils';\n\nexport const AddUsersModal = withHandlePromise((props: AddUsersModalProps) => {\n  const [values, setValues] = React.useState(['']);\n\n  const submit: React.FormEventHandler<HTMLFormElement> = (e) => {\n    e.preventDefault();\n    // Append to an existing array, but handle the special case when the array is null.\n    const patch = props.group.users\n      ? _.map(values, (value: string) => ({ op: 'add', path: '/users/-', value }))\n      : [{ op: 'add', path: '/users', value: values }];\n    return props.handlePromise(k8sPatch(GroupModel, props.group, patch)).then(props.close);\n  };\n\n  return (\n    <form onSubmit={submit} name=\"form\" className=\"modal-content \">\n      <ModalTitle>Add Users</ModalTitle>\n      <ModalBody>\n        <p>Add new users to group {props.group.metadata.name}.</p>\n        <ListInput label=\"Users\" required initialValues={values} onChange={setValues} />\n      </ModalBody>\n      <ModalSubmitFooter\n        errorMessage={props.errorMessage}\n        inProgress={props.inProgress}\n        submitText=\"Save\"\n        cancel={props.cancel}\n      />\n    </form>\n  );\n});\n\nexport const addUsersModal = createModalLauncher(AddUsersModal);\n\nexport type AddUsersModalProps = {\n  group: GroupKind;\n} & ModalComponentProps &\n  HandlePromiseProps;\n"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AAOA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;;AAAA;AAAA;AACA;AAEA;AAQA;AAEA;;;;;A","sourceRoot":""}