{"version":3,"file":"expand-pvc-modal-b4a33990324f23d2d881.js","sources":["webpack:///./public/components/modals/expand-pvc-modal.jsx"],"sourcesContent":["import * as React from 'react';\n\nimport { createModalLauncher, ModalTitle, ModalBody, ModalSubmitFooter } from '../factory/modal';\nimport { PromiseComponent, RequestSizeInput, resourceObjPath, history } from '../utils';\nimport { k8sPatch, referenceFor } from '../../module/k8s/';\n\n// Modal for expanding persistent volume claims\nclass ExpandPVCModal extends PromiseComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      inProgress: false,\n      errorMessage: '',\n      requestSizeValue: '',\n      requestSizeUnit: 'Gi',\n    };\n    this._handleRequestSizeInputChange = this._handleRequestSizeInputChange.bind(this);\n    this._cancel = this.props.cancel.bind(this);\n    this._submit = this._submit.bind(this);\n  }\n\n  _handleRequestSizeInputChange(obj) {\n    this.setState({ requestSizeValue: obj.value, requestSizeUnit: obj.unit });\n  }\n\n  _submit(e) {\n    e.preventDefault();\n    const { requestSizeUnit, requestSizeValue } = this.state;\n    const patch = [\n      {\n        op: 'replace',\n        path: '/spec/resources/requests',\n        value: { storage: `${requestSizeValue}${requestSizeUnit}` },\n      },\n    ];\n    this.handlePromise(k8sPatch(this.props.kind, this.props.resource, patch)).then((resource) => {\n      this.props.close();\n      // redirected to the details page for persitent volume claim\n      history.push(resourceObjPath(resource, referenceFor(resource)));\n    });\n  }\n\n  render() {\n    const { kind, resource } = this.props;\n    const dropdownUnits = {\n      Mi: 'MiB',\n      Gi: 'GiB',\n      Ti: 'TiB',\n    };\n    const { requestSizeUnit, requestSizeValue } = this.state;\n    return (\n      <form\n        onSubmit={this._submit}\n        name=\"form\"\n        className=\"modal-content modal-content--no-inner-scroll\"\n      >\n        <ModalTitle>Expand {kind.label}</ModalTitle>\n        <ModalBody>\n          <p>\n            Increase the capacity of claim{' '}\n            <strong className=\"co-break-word\">{resource.metadata.name}.</strong> This can be a\n            time-consuming process.\n          </p>\n          <label className=\"control-label co-required\">Size</label>\n          <RequestSizeInput\n            name=\"requestSize\"\n            required\n            onChange={this._handleRequestSizeInputChange}\n            defaultRequestSizeUnit={requestSizeUnit}\n            defaultRequestSizeValue={requestSizeValue}\n            dropdownUnits={dropdownUnits}\n          />\n        </ModalBody>\n        <ModalSubmitFooter\n          errorMessage={this.state.errorMessage}\n          inProgress={this.state.inProgress}\n          submitText=\"Expand\"\n          cancel={this._cancel}\n        />\n      </form>\n    );\n  }\n}\n\nexport const expandPVCModal = createModalLauncher(ExpandPVCModal);\n"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAMA;;AAAA;AACA;AACA;;AACA;AACA;AAAA;AAAA;AAEA;AACA;AACA;AASA;AAQA;AACA;AAEA;;;;;A","sourceRoot":""}