{"remainingRequest":"/home/jinsoo/hypercloud-console5.0/frontend/node_modules/thread-loader/dist/cjs.js??ref--5-1!/home/jinsoo/hypercloud-console5.0/frontend/node_modules/ts-loader/index.js??ref--5-2!/home/jinsoo/hypercloud-console5.0/frontend/public/components/namespace.jsx","dependencies":[{"path":"/home/jinsoo/hypercloud-console5.0/frontend/public/components/namespace.jsx","mtime":1616735742480},{"path":"/home/jinsoo/hypercloud-console5.0/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1607306270906},{"path":"/home/jinsoo/hypercloud-console5.0/frontend/node_modules/thread-loader/dist/cjs.js","mtime":1607306283100},{"path":"/home/jinsoo/hypercloud-console5.0/frontend/node_modules/ts-loader/index.js","mtime":1607306283339}],"contextDependencies":[],"result":["var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport * as _ from 'lodash-es';\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport { sortable } from '@patternfly/react-table';\nimport { connect } from 'react-redux';\nimport { Tooltip, Button } from '@patternfly/react-core';\nimport { PencilAltIcon } from '@patternfly/react-icons';\nimport { Link } from 'react-router-dom';\nimport * as fuzzy from 'fuzzysearch';\nimport { Status, getRequester, ALL_NAMESPACES_KEY, KEYBOARD_SHORTCUTS, NAMESPACE_LOCAL_STORAGE_KEY, FLAGS } from '@console/shared';\nimport { ByteDataTypes } from '@console/shared/src/graph-helper/data-utils';\nimport { NamespaceModel, ProjectModel, SecretModel } from '../models';\nimport { coFetchJSON } from '../co-fetch';\nimport { k8sGet, referenceForModel } from '../module/k8s';\nimport * as k8sActions from '../actions/k8s';\nimport * as UIActions from '../actions/ui';\nimport { DetailsPage, ListPage, Table, TableRow, TableData } from './factory';\nimport { DetailsItem, Dropdown, ExternalLink, Firehose, Kebab, LabelList, LoadingInline, MsgBox, ResourceIcon, ResourceKebab, ResourceLink, ResourceSummary, SectionHeading, Timestamp, formatBytesAsMiB, formatCores, humanizeBinaryBytes, humanizeCpuCores, navFactory, useAccessReview } from './utils';\nimport { createProjectModal, deleteNamespaceModal, configureNamespacePullSecretModal } from './modals';\nimport { RoleBindingsPage } from './RBAC';\nimport { Bar, Area, PROMETHEUS_BASE_PATH, requirePrometheus } from './graphs';\nimport { featureReducerName, flagPending, connectToFlags } from '../reducers/features';\nimport { setFlag } from '../actions/features';\nimport { OpenShiftGettingStarted } from './start-guide';\nimport { Overview } from './overview';\nimport { getNamespaceDashboardConsoleLinks, ProjectDashboard } from './dashboard/project-dashboard/project-dashboard';\nimport { removeQueryArgument } from './utils/router';\nimport { useTranslation, withTranslation } from 'react-i18next';\nconst getModel = useProjects => (useProjects ? ProjectModel : NamespaceModel);\nconst getDisplayName = obj => _.get(obj, ['metadata', 'annotations', 'openshift.io/display-name']);\nconst CREATE_NEW_RESOURCE = '#CREATE_RESOURCE_ACTION#';\nexport const deleteModal = (kind, ns) => {\n    let { label, weight, accessReview } = Kebab.factory.Delete(kind, ns);\n    let callback = undefined;\n    let tooltip;\n    if (ns.metadata.name === 'default') {\n        tooltip = `${kind.label} default cannot be deleted`;\n    }\n    else if (ns.status.phase === 'Terminating') {\n        tooltip = `${kind.label} is already terminating`;\n    }\n    else {\n        callback = () => deleteNamespaceModal({ kind, resource: ns });\n    }\n    if (tooltip) {\n        label = (React.createElement(\"div\", { className: \"dropdown__disabled\" },\n            React.createElement(Tooltip, { content: tooltip },\n                React.createElement(\"span\", null, label))));\n    }\n    return { label, weight, callback, accessReview };\n};\nconst nsMenuActions = [Kebab.factory.ModifyLabels, Kebab.factory.ModifyAnnotations, Kebab.factory.Edit, deleteModal];\nconst fetchNamespaceMetrics = () => {\n    const metrics = [\n        {\n            key: 'memory',\n            query: 'sum by(namespace) (container_memory_working_set_bytes{container=\"\",pod!=\"\"})',\n        },\n        {\n            key: 'cpu',\n            query: 'namespace:container_cpu_usage:sum',\n        },\n    ];\n    const promises = metrics.map(({ key, query }) => {\n        const url = `${PROMETHEUS_BASE_PATH}/api/v1/query?&query=${query}`;\n        return coFetchJSON(url).then(({ data: { result } }) => {\n            return result.reduce((acc, data) => {\n                const value = Number(data.value[1]);\n                return _.set(acc, [key, data.metric.namespace], value);\n            }, {});\n        });\n    });\n    return Promise.all(promises).then(data => _.assign({}, ...data));\n};\nconst namespacesColumnClasses = [\n    '',\n    '',\n    classNames('pf-m-hidden', 'pf-m-visible-on-sm'),\n    classNames('pf-m-hidden', 'pf-m-visible-on-lg pf-u-w-16-on-lg'),\n    Kebab.columnClass,\n];\nconst NamespacesTableHeader = t => {\n    return [\n        {\n            title: t('COMMON:MSG_MAIN_TABLEHEADER_1'),\n            sortField: 'metadata.name',\n            transforms: [sortable],\n            props: { className: namespacesColumnClasses[0] },\n        },\n        {\n            title: t('COMMON:MSG_MAIN_TABLEHEADER_3'),\n            sortField: 'status.phase',\n            transforms: [sortable],\n            props: { className: namespacesColumnClasses[1] },\n        },\n        {\n            title: t('COMMON:MSG_MAIN_TABLEHEADER_15'),\n            sortField: 'metadata.labels',\n            transforms: [sortable],\n            props: { className: namespacesColumnClasses[2] },\n        },\n        {\n            title: t('COMMON:MSG_MAIN_TABLEHEADER_12'),\n            sortField: 'metadata.creationTimestamp',\n            transforms: [sortable],\n            props: { className: namespacesColumnClasses[3] },\n        },\n        { title: '', props: { className: namespacesColumnClasses[4] } },\n    ];\n};\nNamespacesTableHeader.displayName = 'NamespacesTableHeader';\nconst NamespacesTableRow = ({ obj: ns, index, key, style }) => {\n    return (React.createElement(TableRow, { id: ns.metadata.uid, index: index, trKey: key, style: style },\n        React.createElement(TableData, { className: namespacesColumnClasses[0] },\n            React.createElement(ResourceLink, { kind: \"Namespace\", name: ns.metadata.name, title: ns.metadata.uid })),\n        React.createElement(TableData, { className: classNames(namespacesColumnClasses[1], 'co-break-word') },\n            React.createElement(Status, { status: ns.status.phase })),\n        React.createElement(TableData, { className: namespacesColumnClasses[2] },\n            React.createElement(LabelList, { kind: \"Namespace\", labels: ns.metadata.labels })),\n        React.createElement(TableData, { className: namespacesColumnClasses[3] },\n            React.createElement(Timestamp, { timestamp: ns.metadata.creationTimestamp })),\n        React.createElement(TableData, { className: namespacesColumnClasses[4] },\n            React.createElement(ResourceKebab, { actions: nsMenuActions, kind: \"Namespace\", resource: ns }))));\n};\nexport const NamespacesList = props => {\n    const { t } = useTranslation();\n    return React.createElement(Table, Object.assign({}, props, { \"aria-label\": \"Namespaces\", Header: NamespacesTableHeader.bind(null, t), Row: NamespacesTableRow, virtualize: true }));\n};\nexport const NamespacesPage = props => {\n    const { t } = useTranslation();\n    // const createProps = {\n    //   items: createItems,\n    //   createLink: (type) =>\n    //     // `/k8s/ns/${props.namespace || 'default'}/namespaces/~new/${type !== 'yaml' ? type : ''}`,\n    //     `/k8s/cluster/namespaces/~new/${type !== 'yaml' ? type : ''}`,\n    // };\n    return (React.createElement(ListPage, Object.assign({}, props, { title: t('COMMON:MSG_LNB_MENU_3'), ListComponent: NamespacesList, canCreate: true })));\n};\nexport const projectMenuActions = [Kebab.factory.Edit, deleteModal];\nconst projectColumnClasses = [\n    '',\n    classNames('pf-m-hidden', 'pf-m-visible-on-sm'),\n    '',\n    classNames('pf-m-hidden', 'pf-m-visible-on-lg'),\n    classNames('pf-m-hidden', 'pf-m-visible-on-xl'),\n    classNames('pf-m-hidden', 'pf-m-visible-on-xl'),\n    classNames('pf-m-hidden', 'pf-m-visible-on-2xl'),\n    Kebab.columnClass,\n];\nconst projectTableHeader = ({ showMetrics, showActions }) => {\n    return [\n        {\n            title: 'Name',\n            sortField: 'metadata.name',\n            transforms: [sortable],\n            props: { className: projectColumnClasses[0] },\n        },\n        {\n            title: 'Display Name',\n            sortField: 'metadata.annotations[\"openshift.io/display-name\"]',\n            transforms: [sortable],\n            props: { className: projectColumnClasses[1] },\n        },\n        {\n            title: 'Status',\n            sortField: 'status.phase',\n            transforms: [sortable],\n            props: { className: projectColumnClasses[2] },\n        },\n        {\n            title: 'Requester',\n            sortField: \"metadata.annotations.['openshift.io/requester']\",\n            transforms: [sortable],\n            props: { className: projectColumnClasses[3] },\n        },\n        ...(showMetrics\n            ? [\n                {\n                    title: 'Memory',\n                    sortFunc: 'namespaceMemory',\n                    transforms: [sortable],\n                    props: { className: projectColumnClasses[4] },\n                },\n                {\n                    title: 'CPU',\n                    sortFunc: 'namespaceCPU',\n                    transforms: [sortable],\n                    props: { className: projectColumnClasses[5] },\n                },\n            ]\n            : []),\n        {\n            title: 'Created',\n            sortField: 'metadata.creationTimestamp',\n            transforms: [sortable],\n            props: { className: projectColumnClasses[6] },\n        },\n        ...(showActions ? [{ title: '', props: { className: projectColumnClasses[7] } }] : []),\n    ];\n};\nconst ProjectLink = connect(null, {\n    setActiveNamespace: UIActions.setActiveNamespace,\n    filterList: k8sActions.filterList,\n})(({ project, setActiveNamespace, filterList }) => (React.createElement(\"span\", { className: \"co-resource-item co-resource-item--truncate\" },\n    React.createElement(ResourceIcon, { kind: \"Project\" }),\n    React.createElement(Button, { isInline: true, title: project.metadata.name, type: \"button\", className: \"co-resource-item__resource-name\", onClick: () => {\n            setActiveNamespace(project.metadata.name);\n            removeQueryArgument('project-name');\n            // clear project-name filter when active namespace is changed\n            filterList(referenceForModel(ProjectModel), 'project-name', '');\n        }, variant: \"link\" }, project.metadata.name))));\nconst projectHeaderWithoutActions = () => projectTableHeader({ showMetrics: false, showActions: false });\nconst projectRowStateToProps = ({ UI }) => ({\n    metrics: UI.getIn(['metrics', 'namespace']),\n});\nconst ProjectTableRow = connect(projectRowStateToProps)(({ obj: project, index, rowKey, style, customData = {}, metrics }) => {\n    const requester = getRequester(project);\n    const { ProjectLinkComponent, actionsEnabled = true, showMetrics } = customData;\n    const bytes = _.get(metrics, ['memory', project.metadata.name]);\n    const cores = _.get(metrics, ['cpu', project.metadata.name]);\n    return (React.createElement(TableRow, { id: project.metadata.uid, index: index, trKey: rowKey, style: style },\n        React.createElement(TableData, { className: projectColumnClasses[0] }, customData && ProjectLinkComponent ? (React.createElement(ProjectLinkComponent, { project: project })) : (React.createElement(\"span\", { className: \"co-resource-item\" },\n            React.createElement(ResourceLink, { kind: \"Project\", name: project.metadata.name, title: project.metadata.uid })))),\n        React.createElement(TableData, { className: projectColumnClasses[1] },\n            React.createElement(\"span\", { className: \"co-break-word co-line-clamp\" }, getDisplayName(project) || React.createElement(\"span\", { className: \"text-muted\" }, \"No display name\"))),\n        React.createElement(TableData, { className: projectColumnClasses[2] },\n            React.createElement(Status, { status: project.status.phase })),\n        React.createElement(TableData, { className: classNames(projectColumnClasses[3], 'co-break-word') }, requester || React.createElement(\"span\", { className: \"text-muted\" }, \"No requester\")),\n        showMetrics && (React.createElement(React.Fragment, null,\n            React.createElement(TableData, { className: projectColumnClasses[4] }, bytes ? `${formatBytesAsMiB(bytes)} MiB` : '-'),\n            React.createElement(TableData, { className: projectColumnClasses[5] }, cores ? `${formatCores(cores)} cores` : '-'))),\n        React.createElement(TableData, { className: projectColumnClasses[6] },\n            React.createElement(Timestamp, { timestamp: project.metadata.creationTimestamp })),\n        actionsEnabled && (React.createElement(TableData, { className: projectColumnClasses[7] },\n            React.createElement(ResourceKebab, { actions: projectMenuActions, kind: \"Project\", resource: project })))));\n});\nProjectTableRow.displayName = 'ProjectTableRow';\nconst Row = rowArgs => React.createElement(ProjectTableRow, { obj: rowArgs.obj, index: rowArgs.index, rowKey: rowArgs.key, style: rowArgs.style, customData: rowArgs.customData });\nexport const ProjectsTable = props => React.createElement(Table, Object.assign({}, props, { \"aria-label\": \"Projects\", Header: projectHeaderWithoutActions, Row: Row, customData: { ProjectLinkComponent: ProjectLink, actionsEnabled: false }, virtualize: true }));\nconst headerWithMetrics = () => projectTableHeader({ showMetrics: true, showActions: true });\nconst headerNoMetrics = () => projectTableHeader({ showMetrics: false, showActions: true });\nconst ProjectList_ = connectToFlags(FLAGS.CAN_CREATE_PROJECT, FLAGS.CAN_GET_NS)((_a) => {\n    var { data, flags, setNamespaceMetrics } = _a, tableProps = __rest(_a, [\"data\", \"flags\", \"setNamespaceMetrics\"]);\n    const canGetNS = flags[FLAGS.CAN_GET_NS];\n    const showMetrics = PROMETHEUS_BASE_PATH && canGetNS && window.screen.width >= 1200;\n    /* eslint-disable react-hooks/exhaustive-deps */\n    React.useEffect(() => {\n        if (showMetrics) {\n            const updateMetrics = () => fetchNamespaceMetrics().then(setNamespaceMetrics);\n            updateMetrics();\n            const id = setInterval(updateMetrics, 30 * 1000);\n            return () => clearInterval(id);\n        }\n    }, [showMetrics]);\n    /* eslint-enable react-hooks/exhaustive-deps */\n    // Don't render the table until we know whether we can get metrics. It's\n    // not possible to change the table headers once the component is mounted.\n    if (flagPending(canGetNS)) {\n        return null;\n    }\n    const ProjectEmptyMessage = () => React.createElement(MsgBox, { title: \"Welcome to OpenShift\", detail: React.createElement(OpenShiftGettingStarted, { canCreateProject: flags[FLAGS.CAN_CREATE_PROJECT] }) });\n    const ProjectNotFoundMessage = () => React.createElement(MsgBox, { title: \"No Projects Found\" });\n    return React.createElement(Table, Object.assign({}, tableProps, { \"aria-label\": \"Projects\", data: data, Header: showMetrics ? headerWithMetrics : headerNoMetrics, Row: Row, EmptyMsg: data.length > 0 ? ProjectNotFoundMessage : ProjectEmptyMessage, customData: { showMetrics }, virtualize: true }));\n});\nexport const ProjectList = connect(null, dispatch => ({\n    setNamespaceMetrics: metrics => dispatch(UIActions.setNamespaceMetrics(metrics)),\n}))(connectToFlags(FLAGS.CAN_CREATE_PROJET, FLAGS.CAN_GET_NS)(ProjectList_));\nexport const ProjectsPage = connectToFlags(FLAGS.CAN_CREATE_PROJECT)((_a) => {\n    var { flags } = _a, rest = __rest(_a, [\"flags\"]);\n    return (\n    // Skip self-subject access review for projects since they use a special project request API.\n    // `FLAGS.CAN_CREATE_PROJECT` determines if the user can create projects.\n    React.createElement(ListPage, Object.assign({}, rest, { ListComponent: ProjectList, canCreate: flags[FLAGS.CAN_CREATE_PROJECT], createHandler: () => createProjectModal({ blocking: true }), filterLabel: \"by name or display name\", skipAccessReview: true, textFilter: \"project-name\" })));\n});\n/** @type {React.SFC<{namespace: K8sResourceKind}>} */\nexport const PullSecret = props => {\n    const [isLoading, setIsLoading] = React.useState(true);\n    const [data, setData] = React.useState(undefined);\n    const { t } = useTranslation();\n    React.useEffect(() => {\n        k8sGet(SecretModel, null, props.namespace.metadata.name, {\n            queryParams: { fieldSelector: 'type=kubernetes.io/dockerconfigjson' },\n        })\n            .then(pullSecrets => {\n            setIsLoading(false);\n            setData(_.get(pullSecrets, 'items[0]'));\n        })\n            .catch(error => {\n            setIsLoading(false);\n            setData(undefined);\n            // A 404 just means that no pull secrets exist\n            if (error.status !== 404) {\n                throw error;\n            }\n        });\n    }, [props.namespace.metadata.name]);\n    if (isLoading) {\n        return React.createElement(LoadingInline, null);\n    }\n    const modal = () => configureNamespacePullSecretModal({ namespace: props.namespace, pullSecret: data });\n    return (React.createElement(Button, { variant: \"link\", type: \"button\", isInline: true, onClick: modal },\n        _.get(data, 'metadata.name') || t('COMMON:MSG_DETAILS_TABDETAILS_DETAILS_33'),\n        React.createElement(PencilAltIcon, { className: \"co-icon-space-l pf-c-button-icon--plain\" })));\n};\nexport const NamespaceLineCharts = ({ ns }) => {\n    const { t } = useTranslation();\n    return (React.createElement(\"div\", { className: \"row\" },\n        React.createElement(\"div\", { className: \"col-md-6 col-sm-12\" },\n            React.createElement(Area, { title: t('SINGLE:MSG_NAMESPACES_NAMESPACEDETAILS_TABDETAILS_RESOURCEUSAGE_2'), humanize: humanizeCpuCores, namespace: ns.metadata.name, query: `namespace:container_cpu_usage:sum{namespace='${ns.metadata.name}'}` })),\n        React.createElement(\"div\", { className: \"col-md-6 col-sm-12\" },\n            React.createElement(Area, { title: t('SINGLE:MSG_NAMESPACES_NAMESPACEDETAILS_TABDETAILS_RESOURCEUSAGE_3'), humanize: humanizeBinaryBytes, byteDataType: ByteDataTypes.BinaryBytes, namespace: ns.metadata.name, query: `sum by(namespace) (container_memory_working_set_bytes{namespace=\"${ns.metadata.name}\",container=\"\",pod!=\"\"})` }))));\n};\nexport const TopPodsBarChart = ({ ns }) => {\n    const { t } = useTranslation();\n    return React.createElement(Bar, { title: t('SINGLE:MSG_NAMESPACES_NAMESPACEDETAILS_TABDETAILS_RESOURCEUSAGE_4'), namespace: ns.metadata.name, query: `sort_desc(topk(10, sum by (pod)(container_memory_working_set_bytes{container=\"\",pod!=\"\",namespace=\"${ns.metadata.name}\"})))`, humanize: humanizeBinaryBytes, metric: \"pod\" });\n};\nconst ResourceUsage = requirePrometheus(({ ns }) => {\n    const { t } = useTranslation();\n    return (React.createElement(\"div\", { className: \"co-m-pane__body\" },\n        React.createElement(SectionHeading, { text: t('SINGLE:MSG_NAMESPACES_NAMESPACEDETAILS_TABDETAILS_RESOURCEUSAGE_1') }),\n        React.createElement(NamespaceLineCharts, { ns: ns }),\n        React.createElement(TopPodsBarChart, { ns: ns })));\n});\nexport const NamespaceSummary = ({ ns }) => {\n    const { t } = useTranslation();\n    const displayName = getDisplayName(ns);\n    const requester = getRequester(ns);\n    const canListSecrets = useAccessReview({\n        group: SecretModel.apiGroup,\n        resource: SecretModel.plural,\n        verb: 'patch',\n        namespace: ns.metadata.name,\n    });\n    return (React.createElement(\"div\", { className: \"row\" },\n        React.createElement(\"div\", { className: \"col-sm-6 col-xs-12\" },\n            React.createElement(ResourceSummary, { resource: ns },\n                displayName && React.createElement(\"dt\", null, \"Display Name\"),\n                displayName && React.createElement(\"dd\", null, displayName),\n                requester && React.createElement(\"dt\", null, \"Requester\"),\n                requester && React.createElement(\"dd\", null, requester))),\n        React.createElement(\"div\", { className: \"col-sm-6 col-xs-12\" },\n            React.createElement(\"dl\", { className: \"co-m-pane__details\" },\n                React.createElement(DetailsItem, { label: t('COMMON:MSG_DETAILS_TABDETAILS_DETAILS_13'), obj: ns, path: \"status.phase\" },\n                    React.createElement(Status, { status: ns.status.phase })),\n                canListSecrets && (React.createElement(React.Fragment, null,\n                    React.createElement(\"dt\", null, t('COMMON:MSG_DETAILS_TABDETAILS_DETAILS_95')),\n                    React.createElement(\"dd\", null,\n                        React.createElement(PullSecret, { namespace: ns })))),\n                React.createElement(\"dt\", null, t('COMMON:MSG_DETAILS_TABDETAILS_DETAILS_96')),\n                React.createElement(\"dd\", null,\n                    React.createElement(Link, { to: `/k8s/ns/${ns.metadata.name}/networkpolicies` }, t('COMMON:MSG_DETAILS_TABDETAILS_DETAILS_96')))))));\n};\nconst NamespaceDetails_ = ({ obj: ns, consoleLinks, customData }) => {\n    const { t } = useTranslation();\n    const links = getNamespaceDashboardConsoleLinks(ns, consoleLinks);\n    return (React.createElement(\"div\", null,\n        React.createElement(\"div\", { className: \"co-m-pane__body\" },\n            !(customData === null || customData === void 0 ? void 0 : customData.hideHeading) && React.createElement(SectionHeading, { text: t('COMMON:MSG_DETAILS_TABDETAILS_DETAILS_1', { 0: t('COMMON:MSG_LNB_MENU_3') }) }),\n            React.createElement(NamespaceSummary, { ns: ns })),\n        ns.kind === 'Namespace' && React.createElement(ResourceUsage, { ns: ns }),\n        !_.isEmpty(links) && (React.createElement(\"div\", { className: \"co-m-pane__body\" },\n            React.createElement(SectionHeading, { text: \"Launcher\" }),\n            React.createElement(\"ul\", { className: \"list-unstyled\" }, _.map(_.sortBy(links, 'spec.text'), link => {\n                return (React.createElement(\"li\", { key: link.metadata.uid },\n                    React.createElement(ExternalLink, { href: link.spec.href, text: link.spec.text })));\n            }))))));\n};\nconst DetailsStateToProps = ({ UI }) => ({\n    consoleLinks: UI.get('consoleLinks'),\n});\nexport const NamespaceDetails = connect(DetailsStateToProps)(NamespaceDetails_);\nconst RolesPage = ({ obj: { metadata } }) => React.createElement(RoleBindingsPage, { createPath: `/k8s/ns/${metadata.name}/rolebindings/~new?rolekind=Role`, namespace: metadata.name, showTitle: false });\nconst autocompleteFilter = (text, item) => fuzzy(text, item);\nconst defaultBookmarks = {};\nconst namespaceBarDropdownStateToProps = state => {\n    const activeNamespace = state.UI.get('activeNamespace');\n    const canListNS = state[featureReducerName].get(FLAGS.CAN_LIST_NS);\n    const canCreateProject = state[featureReducerName].get(FLAGS.CAN_CREATE_PROJECT);\n    return { activeNamespace, canListNS, canCreateProject };\n};\nconst namespaceBarDropdownDispatchToProps = dispatch => ({\n    setActiveNamespace: ns => dispatch(UIActions.setActiveNamespace(ns)),\n    showStartGuide: show => dispatch(setFlag(FLAGS.SHOW_OPENSHIFT_START_GUIDE, show)),\n});\nconst clusterMenu = ['namespaces', 'namespaceclaims'];\nclass NamespaceBarDropdowns_ extends React.Component {\n    componentDidUpdate() {\n        const { namespace, showStartGuide } = this.props;\n        if (namespace.loaded) {\n            const noNamespace = _.isEmpty(namespace.data);\n            showStartGuide(noNamespace); // namespace 없으면 noNamespace창 보이도록\n        }\n    }\n    render() {\n        const { activeNamespace, onNamespaceChange, setActiveNamespace, canListNS, canCreateProject, useProjects, children, disabled, t } = this.props;\n        // if (flagPending(canListNS)) {\n        //   return null;\n        // }\n        const { loaded, data } = this.props.namespace;\n        const model = getModel(useProjects);\n        const allNamespacesTitle = t('COMMON:MSG_NNB__3');\n        const items = {};\n        if (canListNS) {\n            items[ALL_NAMESPACES_KEY] = allNamespacesTitle;\n        }\n        _.map(data, 'metadata.name')\n            .sort()\n            .forEach(name => (items[name] = name));\n        let title = activeNamespace;\n        if (activeNamespace === ALL_NAMESPACES_KEY) {\n            title = allNamespacesTitle;\n        }\n        else if (loaded && !_.has(items, title)) {\n            // If the currently active namespace is not found in the list of all namespaces, put it in anyway\n            // items[title] = title;\n            // active한 namespace 없을 때 가장 첫번째 namespace 골라지도록 변.\n            setActiveNamespace(Object.keys(items)[0]);\n        }\n        const defaultActionItem = canCreateProject\n            ? [\n                {\n                    actionTitle: `Create ${model.label}`,\n                    actionKey: CREATE_NEW_RESOURCE,\n                },\n            ]\n            : [];\n        const onChange = newNamespace => {\n            if (newNamespace === CREATE_NEW_RESOURCE) {\n                createProjectModal({\n                    blocking: true,\n                    onSubmit: newProject => {\n                        setActiveNamespace(newProject.metadata.name);\n                        removeQueryArgument('project-name');\n                    },\n                });\n            }\n            else {\n                onNamespaceChange && onNamespaceChange(newNamespace);\n                setActiveNamespace(newNamespace);\n                removeQueryArgument('project-name');\n            }\n        };\n        return (React.createElement(\"div\", { className: \"co-namespace-bar__items\", \"data-test-id\": \"namespace-bar-dropdown\" },\n            React.createElement(Dropdown, { disabled: disabled, className: \"co-namespace-selector\", menuClassName: \"co-namespace-selector__menu\", buttonClassName: \"pf-m-plain\", \n                // canFavorite\n                items: items, actionItems: defaultActionItem, titlePrefix: t('COMMON:MSG_NNB__2'), title: title, onChange: onChange, selectedKey: activeNamespace || ALL_NAMESPACES_KEY, autocompleteFilter: autocompleteFilter, autocompletePlaceholder: t('COMMON:MSG_NNB__1'), noBookmark: true, defaultBookmarks: defaultBookmarks, storageKey: NAMESPACE_LOCAL_STORAGE_KEY, shortCut: KEYBOARD_SHORTCUTS.focusNamespaceDropdown }),\n            children));\n    }\n}\nconst NamespaceBarDropdowns = connect(namespaceBarDropdownStateToProps, namespaceBarDropdownDispatchToProps)(withTranslation()(NamespaceBarDropdowns_));\nconst NamespaceBar_ = ({ useProjects, children, disabled, onNamespaceChange }) => {\n    return (React.createElement(\"div\", { className: \"co-namespace-bar\" },\n        React.createElement(Firehose, { resources: [{ kind: getModel(useProjects).kind, prop: 'namespace', isList: true }] },\n            React.createElement(NamespaceBarDropdowns, { useProjects: useProjects, disabled: disabled, onNamespaceChange: onNamespaceChange }, children))));\n};\nconst namespaceBarStateToProps = ({ k8s }) => {\n    const useProjects = k8s.hasIn(['RESOURCES', 'models', ProjectModel.kind]);\n    return {\n        useProjects,\n    };\n};\n/** @type {React.FC<{children?: ReactNode, disabled?: boolean, onNamespaceChange?: Function}>} */\nexport const NamespaceBar = connect(namespaceBarStateToProps)(NamespaceBar_);\nexport const NamespacesDetailsPage = props => React.createElement(DetailsPage, Object.assign({}, props, { menuActions: nsMenuActions, pages: [navFactory.details(NamespaceDetails), navFactory.editYaml(), navFactory.roles(RolesPage)] }));\nexport const ProjectsDetailsPage = props => (React.createElement(DetailsPage, Object.assign({}, props, { menuActions: projectMenuActions, pages: [\n        {\n            href: '',\n            name: 'Overview',\n            component: ProjectDashboard,\n        },\n        {\n            href: 'details',\n            name: 'Details',\n            component: NamespaceDetails,\n        },\n        navFactory.editYaml(),\n        navFactory.workloads(Overview),\n        navFactory.roles(RolesPage),\n    ] })));\n",{"version":3,"file":"/home/jinsoo/hypercloud-console5.0/frontend/public/components/namespace.jsx","sourceRoot":"","sources":["/home/jinsoo/hypercloud-console5.0/frontend/public/components/namespace.jsx"],"names":[],"mappings":";;;;;;;;;;;AAAA,OAAO,KAAK,CAAC,MAAM,WAAW,CAAC;AAC/B,OAAO,KAAK,KAAK,MAAM,OAAO,CAAC;AAC/B,OAAO,KAAK,UAAU,MAAM,YAAY,CAAC;AACzC,OAAO,EAAE,QAAQ,EAAE,MAAM,yBAAyB,CAAC;AACnD,OAAO,EAAE,OAAO,EAAE,MAAM,aAAa,CAAC;AACtC,OAAO,EAAE,OAAO,EAAE,MAAM,EAAE,MAAM,wBAAwB,CAAC;AAEzD,OAAO,EAAE,aAAa,EAAE,MAAM,yBAAyB,CAAC;AACxD,OAAO,EAAE,IAAI,EAAE,MAAM,kBAAkB,CAAC;AACxC,OAAO,KAAK,KAAK,MAAM,aAAa,CAAC;AACrC,OAAO,EAAE,MAAM,EAAE,YAAY,EAAE,kBAAkB,EAAE,kBAAkB,EAAE,2BAA2B,EAAE,KAAK,EAAE,MAAM,iBAAiB,CAAC;AACnI,OAAO,EAAE,aAAa,EAAE,MAAM,6CAA6C,CAAC;AAE5E,OAAO,EAAE,cAAc,EAAE,YAAY,EAAE,WAAW,EAAE,MAAM,WAAW,CAAC;AACtE,OAAO,EAAE,WAAW,EAAE,MAAM,aAAa,CAAC;AAC1C,OAAO,EAAE,MAAM,EAAE,iBAAiB,EAAE,MAAM,eAAe,CAAC;AAC1D,OAAO,KAAK,UAAU,MAAM,gBAAgB,CAAC;AAC7C,OAAO,KAAK,SAAS,MAAM,eAAe,CAAC;AAC3C,OAAO,EAAE,WAAW,EAAE,QAAQ,EAAE,KAAK,EAAE,QAAQ,EAAE,SAAS,EAAE,MAAM,WAAW,CAAC;AAC9E,OAAO,EAAE,WAAW,EAAE,QAAQ,EAAE,YAAY,EAAE,QAAQ,EAAE,KAAK,EAAE,SAAS,EAAE,aAAa,EAAE,MAAM,EAAE,YAAY,EAAE,aAAa,EAAE,YAAY,EAAE,eAAe,EAAE,cAAc,EAAE,SAAS,EAAE,gBAAgB,EAAE,WAAW,EAAE,mBAAmB,EAAE,gBAAgB,EAAE,UAAU,EAAE,eAAe,EAAE,MAAM,SAAS,CAAC;AAC3S,OAAO,EAAwB,kBAAkB,EAAE,oBAAoB,EAAE,iCAAiC,EAAE,MAAM,UAAU,CAAC;AAC7H,OAAO,EAAE,gBAAgB,EAAE,MAAM,QAAQ,CAAC;AAC1C,OAAO,EAAE,GAAG,EAAE,IAAI,EAAE,oBAAoB,EAAE,iBAAiB,EAAE,MAAM,UAAU,CAAC;AAC9E,OAAO,EAAE,kBAAkB,EAAE,WAAW,EAAE,cAAc,EAAE,MAAM,sBAAsB,CAAC;AACvF,OAAO,EAAE,OAAO,EAAE,MAAM,qBAAqB,CAAC;AAC9C,OAAO,EAAE,uBAAuB,EAAE,MAAM,eAAe,CAAC;AACxD,OAAO,EAAE,QAAQ,EAAE,MAAM,YAAY,CAAC;AACtC,OAAO,EAAE,iCAAiC,EAAE,gBAAgB,EAAE,MAAM,iDAAiD,CAAC;AACtH,OAAO,EAAE,mBAAmB,EAAE,MAAM,gBAAgB,CAAC;AACrD,OAAO,EAAE,cAAc,EAAE,eAAe,EAAE,MAAM,eAAe,CAAC;AAEhE,MAAM,QAAQ,GAAG,WAAW,CAAC,EAAE,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC,cAAc,CAAC,CAAC;AAC9E,MAAM,cAAc,GAAG,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC,UAAU,EAAE,aAAa,EAAE,2BAA2B,CAAC,CAAC,CAAC;AACnG,MAAM,mBAAmB,GAAG,0BAA0B,CAAC;AAEvD,MAAM,CAAC,MAAM,WAAW,GAAG,CAAC,IAAI,EAAE,EAAE,EAAE,EAAE;IACtC,IAAI,EAAE,KAAK,EAAE,MAAM,EAAE,YAAY,EAAE,GAAG,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC;IACrE,IAAI,QAAQ,GAAG,SAAS,CAAC;IACzB,IAAI,OAAO,CAAC;IAEZ,IAAI,EAAE,CAAC,QAAQ,CAAC,IAAI,KAAK,SAAS,EAAE;QAClC,OAAO,GAAG,GAAG,IAAI,CAAC,KAAK,4BAA4B,CAAC;KACrD;SAAM,IAAI,EAAE,CAAC,MAAM,CAAC,KAAK,KAAK,aAAa,EAAE;QAC5C,OAAO,GAAG,GAAG,IAAI,CAAC,KAAK,yBAAyB,CAAC;KAClD;SAAM;QACL,QAAQ,GAAG,GAAG,EAAE,CAAC,oBAAoB,CAAC,EAAE,IAAI,EAAE,QAAQ,EAAE,EAAE,EAAE,CAAC,CAAC;KAC/D;IACD,IAAI,OAAO,EAAE;QACX,KAAK,GAAG,CACN,6BAAK,SAAS,EAAC,oBAAoB;YACjC,oBAAC,OAAO,IAAC,OAAO,EAAE,OAAO;gBACvB,kCAAO,KAAK,CAAQ,CACZ,CACN,CACP,CAAC;KACH;IACD,OAAO,EAAE,KAAK,EAAE,MAAM,EAAE,QAAQ,EAAE,YAAY,EAAE,CAAC;AACnD,CAAC,CAAC;AAEF,MAAM,aAAa,GAAG,CAAC,KAAK,CAAC,OAAO,CAAC,YAAY,EAAE,KAAK,CAAC,OAAO,CAAC,iBAAiB,EAAE,KAAK,CAAC,OAAO,CAAC,IAAI,EAAE,WAAW,CAAC,CAAC;AAErH,MAAM,qBAAqB,GAAG,GAAG,EAAE;IACjC,MAAM,OAAO,GAAG;QACd;YACE,GAAG,EAAE,QAAQ;YACb,KAAK,EAAE,8EAA8E;SACtF;QACD;YACE,GAAG,EAAE,KAAK;YACV,KAAK,EAAE,mCAAmC;SAC3C;KACF,CAAC;IACF,MAAM,QAAQ,GAAG,OAAO,CAAC,GAAG,CAAC,CAAC,EAAE,GAAG,EAAE,KAAK,EAAE,EAAE,EAAE;QAC9C,MAAM,GAAG,GAAG,GAAG,oBAAoB,wBAAwB,KAAK,EAAE,CAAC;QACnE,OAAO,WAAW,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,EAAE,EAAE,MAAM,EAAE,EAAE,EAAE,EAAE;YACpD,OAAO,MAAM,CAAC,MAAM,CAAC,CAAC,GAAG,EAAE,IAAI,EAAE,EAAE;gBACjC,MAAM,KAAK,GAAG,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;gBACpC,OAAO,CAAC,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,EAAE,KAAK,CAAC,CAAC;YACzD,CAAC,EAAE,EAAE,CAAC,CAAC;QACT,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IACH,OAAO,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,MAAM,CAAC,EAAE,EAAE,GAAG,IAAI,CAAC,CAAC,CAAC;AACnE,CAAC,CAAC;AAEF,MAAM,uBAAuB,GAAG;IAC9B,EAAE;IACF,EAAE;IACF,UAAU,CAAC,aAAa,EAAE,oBAAoB,CAAC;IAC/C,UAAU,CAAC,aAAa,EAAE,oCAAoC,CAAC;IAC/D,KAAK,CAAC,WAAW;CAClB,CAAC;AAEF,MAAM,qBAAqB,GAAG,CAAC,CAAC,EAAE;IAChC,OAAO;QACL;YACE,KAAK,EAAE,CAAC,CAAC,+BAA+B,CAAC;YACzC,SAAS,EAAE,eAAe;YAC1B,UAAU,EAAE,CAAC,QAAQ,CAAC;YACtB,KAAK,EAAE,EAAE,SAAS,EAAE,uBAAuB,CAAC,CAAC,CAAC,EAAE;SACjD;QACD;YACE,KAAK,EAAE,CAAC,CAAC,+BAA+B,CAAC;YACzC,SAAS,EAAE,cAAc;YACzB,UAAU,EAAE,CAAC,QAAQ,CAAC;YACtB,KAAK,EAAE,EAAE,SAAS,EAAE,uBAAuB,CAAC,CAAC,CAAC,EAAE;SACjD;QACD;YACE,KAAK,EAAE,CAAC,CAAC,gCAAgC,CAAC;YAC1C,SAAS,EAAE,iBAAiB;YAC5B,UAAU,EAAE,CAAC,QAAQ,CAAC;YACtB,KAAK,EAAE,EAAE,SAAS,EAAE,uBAAuB,CAAC,CAAC,CAAC,EAAE;SACjD;QACD;YACE,KAAK,EAAE,CAAC,CAAC,gCAAgC,CAAC;YAC1C,SAAS,EAAE,4BAA4B;YACvC,UAAU,EAAE,CAAC,QAAQ,CAAC;YACtB,KAAK,EAAE,EAAE,SAAS,EAAE,uBAAuB,CAAC,CAAC,CAAC,EAAE;SACjD;QACD,EAAE,KAAK,EAAE,EAAE,EAAE,KAAK,EAAE,EAAE,SAAS,EAAE,uBAAuB,CAAC,CAAC,CAAC,EAAE,EAAE;KAChE,CAAC;AACJ,CAAC,CAAC;AACF,qBAAqB,CAAC,WAAW,GAAG,uBAAuB,CAAC;AAE5D,MAAM,kBAAkB,GAAG,CAAC,EAAE,GAAG,EAAE,EAAE,EAAE,KAAK,EAAE,GAAG,EAAE,KAAK,EAAE,EAAE,EAAE;IAC5D,OAAO,CACL,oBAAC,QAAQ,IAAC,EAAE,EAAE,EAAE,CAAC,QAAQ,CAAC,GAAG,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,GAAG,EAAE,KAAK,EAAE,KAAK;QACnE,oBAAC,SAAS,IAAC,SAAS,EAAE,uBAAuB,CAAC,CAAC,CAAC;YAC9C,oBAAC,YAAY,IAAC,IAAI,EAAC,WAAW,EAAC,IAAI,EAAE,EAAE,CAAC,QAAQ,CAAC,IAAI,EAAE,KAAK,EAAE,EAAE,CAAC,QAAQ,CAAC,GAAG,GAAI,CACvE;QACZ,oBAAC,SAAS,IAAC,SAAS,EAAE,UAAU,CAAC,uBAAuB,CAAC,CAAC,CAAC,EAAE,eAAe,CAAC;YAC3E,oBAAC,MAAM,IAAC,MAAM,EAAE,EAAE,CAAC,MAAM,CAAC,KAAK,GAAI,CACzB;QACZ,oBAAC,SAAS,IAAC,SAAS,EAAE,uBAAuB,CAAC,CAAC,CAAC;YAC9C,oBAAC,SAAS,IAAC,IAAI,EAAC,WAAW,EAAC,MAAM,EAAE,EAAE,CAAC,QAAQ,CAAC,MAAM,GAAI,CAChD;QACZ,oBAAC,SAAS,IAAC,SAAS,EAAE,uBAAuB,CAAC,CAAC,CAAC;YAC9C,oBAAC,SAAS,IAAC,SAAS,EAAE,EAAE,CAAC,QAAQ,CAAC,iBAAiB,GAAI,CAC7C;QACZ,oBAAC,SAAS,IAAC,SAAS,EAAE,uBAAuB,CAAC,CAAC,CAAC;YAC9C,oBAAC,aAAa,IAAC,OAAO,EAAE,aAAa,EAAE,IAAI,EAAC,WAAW,EAAC,QAAQ,EAAE,EAAE,GAAI,CAC9D,CACH,CACZ,CAAC;AACJ,CAAC,CAAC;AAEF,MAAM,CAAC,MAAM,cAAc,GAAG,KAAK,CAAC,EAAE;IACpC,MAAM,EAAE,CAAC,EAAE,GAAG,cAAc,EAAE,CAAC;IAC/B,OAAO,oBAAC,KAAK,oBAAK,KAAK,kBAAa,YAAY,EAAC,MAAM,EAAE,qBAAqB,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC,EAAE,GAAG,EAAE,kBAAkB,EAAE,UAAU,UAAG,CAAC;AACvI,CAAC,CAAC;AAEF,MAAM,CAAC,MAAM,cAAc,GAAG,KAAK,CAAC,EAAE;IACpC,MAAM,EAAE,CAAC,EAAE,GAAG,cAAc,EAAE,CAAC;IAC/B,wBAAwB;IACxB,wBAAwB;IACxB,0BAA0B;IAC1B,mGAAmG;IACnG,qEAAqE;IACrE,KAAK;IACL,OAAO,CACL,oBAAC,QAAQ,oBACH,KAAK,IACT,KAAK,EAAE,CAAC,CAAC,uBAAuB,CAAC,EACjC,aAAa,EAAE,cAAc,EAC7B,SAAS,EAAE,IAAI,IAGf,CACH,CAAC;AACJ,CAAC,CAAC;AAEF,MAAM,CAAC,MAAM,kBAAkB,GAAG,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,EAAE,WAAW,CAAC,CAAC;AAEpE,MAAM,oBAAoB,GAAG;IAC3B,EAAE;IACF,UAAU,CAAC,aAAa,EAAE,oBAAoB,CAAC;IAC/C,EAAE;IACF,UAAU,CAAC,aAAa,EAAE,oBAAoB,CAAC;IAC/C,UAAU,CAAC,aAAa,EAAE,oBAAoB,CAAC;IAC/C,UAAU,CAAC,aAAa,EAAE,oBAAoB,CAAC;IAC/C,UAAU,CAAC,aAAa,EAAE,qBAAqB,CAAC;IAChD,KAAK,CAAC,WAAW;CAClB,CAAC;AAEF,MAAM,kBAAkB,GAAG,CAAC,EAAE,WAAW,EAAE,WAAW,EAAE,EAAE,EAAE;IAC1D,OAAO;QACL;YACE,KAAK,EAAE,MAAM;YACb,SAAS,EAAE,eAAe;YAC1B,UAAU,EAAE,CAAC,QAAQ,CAAC;YACtB,KAAK,EAAE,EAAE,SAAS,EAAE,oBAAoB,CAAC,CAAC,CAAC,EAAE;SAC9C;QACD;YACE,KAAK,EAAE,cAAc;YACrB,SAAS,EAAE,mDAAmD;YAC9D,UAAU,EAAE,CAAC,QAAQ,CAAC;YACtB,KAAK,EAAE,EAAE,SAAS,EAAE,oBAAoB,CAAC,CAAC,CAAC,EAAE;SAC9C;QACD;YACE,KAAK,EAAE,QAAQ;YACf,SAAS,EAAE,cAAc;YACzB,UAAU,EAAE,CAAC,QAAQ,CAAC;YACtB,KAAK,EAAE,EAAE,SAAS,EAAE,oBAAoB,CAAC,CAAC,CAAC,EAAE;SAC9C;QACD;YACE,KAAK,EAAE,WAAW;YAClB,SAAS,EAAE,iDAAiD;YAC5D,UAAU,EAAE,CAAC,QAAQ,CAAC;YACtB,KAAK,EAAE,EAAE,SAAS,EAAE,oBAAoB,CAAC,CAAC,CAAC,EAAE;SAC9C;QACD,GAAG,CAAC,WAAW;YACb,CAAC,CAAC;gBACE;oBACE,KAAK,EAAE,QAAQ;oBACf,QAAQ,EAAE,iBAAiB;oBAC3B,UAAU,EAAE,CAAC,QAAQ,CAAC;oBACtB,KAAK,EAAE,EAAE,SAAS,EAAE,oBAAoB,CAAC,CAAC,CAAC,EAAE;iBAC9C;gBACD;oBACE,KAAK,EAAE,KAAK;oBACZ,QAAQ,EAAE,cAAc;oBACxB,UAAU,EAAE,CAAC,QAAQ,CAAC;oBACtB,KAAK,EAAE,EAAE,SAAS,EAAE,oBAAoB,CAAC,CAAC,CAAC,EAAE;iBAC9C;aACF;YACH,CAAC,CAAC,EAAE,CAAC;QACP;YACE,KAAK,EAAE,SAAS;YAChB,SAAS,EAAE,4BAA4B;YACvC,UAAU,EAAE,CAAC,QAAQ,CAAC;YACtB,KAAK,EAAE,EAAE,SAAS,EAAE,oBAAoB,CAAC,CAAC,CAAC,EAAE;SAC9C;QACD,GAAG,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,EAAE,KAAK,EAAE,EAAE,EAAE,KAAK,EAAE,EAAE,SAAS,EAAE,oBAAoB,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;KACvF,CAAC;AACJ,CAAC,CAAC;AAEF,MAAM,WAAW,GAAG,OAAO,CAAC,IAAI,EAAE;IAChC,kBAAkB,EAAE,SAAS,CAAC,kBAAkB;IAChD,UAAU,EAAE,UAAU,CAAC,UAAU;CAClC,CAAC,CAAC,CAAC,EAAE,OAAO,EAAE,kBAAkB,EAAE,UAAU,EAAE,EAAE,EAAE,CAAC,CAClD,8BAAM,SAAS,EAAC,6CAA6C;IAC3D,oBAAC,YAAY,IAAC,IAAI,EAAC,SAAS,GAAG;IAC/B,oBAAC,MAAM,IACL,QAAQ,QACR,KAAK,EAAE,OAAO,CAAC,QAAQ,CAAC,IAAI,EAC5B,IAAI,EAAC,QAAQ,EACb,SAAS,EAAC,iCAAiC,EAC3C,OAAO,EAAE,GAAG,EAAE;YACZ,kBAAkB,CAAC,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;YAC1C,mBAAmB,CAAC,cAAc,CAAC,CAAC;YACpC,6DAA6D;YAC7D,UAAU,CAAC,iBAAiB,CAAC,YAAY,CAAC,EAAE,cAAc,EAAE,EAAE,CAAC,CAAC;QAClE,CAAC,EACD,OAAO,EAAC,MAAM,IAEb,OAAO,CAAC,QAAQ,CAAC,IAAI,CACf,CACJ,CACR,CAAC,CAAC;AACH,MAAM,2BAA2B,GAAG,GAAG,EAAE,CAAC,kBAAkB,CAAC,EAAE,WAAW,EAAE,KAAK,EAAE,WAAW,EAAE,KAAK,EAAE,CAAC,CAAC;AAEzG,MAAM,sBAAsB,GAAG,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC;IAC1C,OAAO,EAAE,EAAE,CAAC,KAAK,CAAC,CAAC,SAAS,EAAE,WAAW,CAAC,CAAC;CAC5C,CAAC,CAAC;AAEH,MAAM,eAAe,GAAG,OAAO,CAAC,sBAAsB,CAAC,CAAC,CAAC,EAAE,GAAG,EAAE,OAAO,EAAE,KAAK,EAAE,MAAM,EAAE,KAAK,EAAE,UAAU,GAAG,EAAE,EAAE,OAAO,EAAE,EAAE,EAAE;IAC3H,MAAM,SAAS,GAAG,YAAY,CAAC,OAAO,CAAC,CAAC;IACxC,MAAM,EAAE,oBAAoB,EAAE,cAAc,GAAG,IAAI,EAAE,WAAW,EAAE,GAAG,UAAU,CAAC;IAChF,MAAM,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,OAAO,EAAE,CAAC,QAAQ,EAAE,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC;IAChE,MAAM,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,OAAO,EAAE,CAAC,KAAK,EAAE,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC;IAC7D,OAAO,CACL,oBAAC,QAAQ,IAAC,EAAE,EAAE,OAAO,CAAC,QAAQ,CAAC,GAAG,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,MAAM,EAAE,KAAK,EAAE,KAAK;QAC3E,oBAAC,SAAS,IAAC,SAAS,EAAE,oBAAoB,CAAC,CAAC,CAAC,IAC1C,UAAU,IAAI,oBAAoB,CAAC,CAAC,CAAC,CACpC,oBAAC,oBAAoB,IAAC,OAAO,EAAE,OAAO,GAAI,CAC3C,CAAC,CAAC,CAAC,CACF,8BAAM,SAAS,EAAC,kBAAkB;YAChC,oBAAC,YAAY,IAAC,IAAI,EAAC,SAAS,EAAC,IAAI,EAAE,OAAO,CAAC,QAAQ,CAAC,IAAI,EAAE,KAAK,EAAE,OAAO,CAAC,QAAQ,CAAC,GAAG,GAAI,CACpF,CACR,CACS;QACZ,oBAAC,SAAS,IAAC,SAAS,EAAE,oBAAoB,CAAC,CAAC,CAAC;YAC3C,8BAAM,SAAS,EAAC,6BAA6B,IAAE,cAAc,CAAC,OAAO,CAAC,IAAI,8BAAM,SAAS,EAAC,YAAY,sBAAuB,CAAQ,CAC3H;QACZ,oBAAC,SAAS,IAAC,SAAS,EAAE,oBAAoB,CAAC,CAAC,CAAC;YAC3C,oBAAC,MAAM,IAAC,MAAM,EAAE,OAAO,CAAC,MAAM,CAAC,KAAK,GAAI,CAC9B;QACZ,oBAAC,SAAS,IAAC,SAAS,EAAE,UAAU,CAAC,oBAAoB,CAAC,CAAC,CAAC,EAAE,eAAe,CAAC,IAAG,SAAS,IAAI,8BAAM,SAAS,EAAC,YAAY,mBAAoB,CAAa;QACtJ,WAAW,IAAI,CACd;YACE,oBAAC,SAAS,IAAC,SAAS,EAAE,oBAAoB,CAAC,CAAC,CAAC,IAAG,KAAK,CAAC,CAAC,CAAC,GAAG,gBAAgB,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,CAAa;YAC3G,oBAAC,SAAS,IAAC,SAAS,EAAE,oBAAoB,CAAC,CAAC,CAAC,IAAG,KAAK,CAAC,CAAC,CAAC,GAAG,WAAW,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC,GAAG,CAAa,CACvG,CACJ;QACD,oBAAC,SAAS,IAAC,SAAS,EAAE,oBAAoB,CAAC,CAAC,CAAC;YAC3C,oBAAC,SAAS,IAAC,SAAS,EAAE,OAAO,CAAC,QAAQ,CAAC,iBAAiB,GAAI,CAClD;QACX,cAAc,IAAI,CACjB,oBAAC,SAAS,IAAC,SAAS,EAAE,oBAAoB,CAAC,CAAC,CAAC;YAC3C,oBAAC,aAAa,IAAC,OAAO,EAAE,kBAAkB,EAAE,IAAI,EAAC,SAAS,EAAC,QAAQ,EAAE,OAAO,GAAI,CACtE,CACb,CACQ,CACZ,CAAC;AACJ,CAAC,CAAC,CAAC;AACH,eAAe,CAAC,WAAW,GAAG,iBAAiB,CAAC;AAEhD,MAAM,GAAG,GAAG,OAAO,CAAC,EAAE,CAAC,oBAAC,eAAe,IAAC,GAAG,EAAE,OAAO,CAAC,GAAG,EAAE,KAAK,EAAE,OAAO,CAAC,KAAK,EAAE,MAAM,EAAE,OAAO,CAAC,GAAG,EAAE,KAAK,EAAE,OAAO,CAAC,KAAK,EAAE,UAAU,EAAE,OAAO,CAAC,UAAU,GAAI,CAAC;AAE9J,MAAM,CAAC,MAAM,aAAa,GAAG,KAAK,CAAC,EAAE,CAAC,oBAAC,KAAK,oBAAK,KAAK,kBAAa,UAAU,EAAC,MAAM,EAAE,2BAA2B,EAAE,GAAG,EAAE,GAAG,EAAE,UAAU,EAAE,EAAE,oBAAoB,EAAE,WAAW,EAAE,cAAc,EAAE,KAAK,EAAE,EAAE,UAAU,UAAG,CAAC;AAErN,MAAM,iBAAiB,GAAG,GAAG,EAAE,CAAC,kBAAkB,CAAC,EAAE,WAAW,EAAE,IAAI,EAAE,WAAW,EAAE,IAAI,EAAE,CAAC,CAAC;AAC7F,MAAM,eAAe,GAAG,GAAG,EAAE,CAAC,kBAAkB,CAAC,EAAE,WAAW,EAAE,KAAK,EAAE,WAAW,EAAE,IAAI,EAAE,CAAC,CAAC;AAC5F,MAAM,YAAY,GAAG,cAAc,CACjC,KAAK,CAAC,kBAAkB,EACxB,KAAK,CAAC,UAAU,CACjB,CAAC,CAAC,EAAmD,EAAE,EAAE;QAAvD,EAAE,IAAI,EAAE,KAAK,EAAE,mBAAmB,OAAiB,EAAf,iEAAa;IAClD,MAAM,QAAQ,GAAG,KAAK,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC;IACzC,MAAM,WAAW,GAAG,oBAAoB,IAAI,QAAQ,IAAI,MAAM,CAAC,MAAM,CAAC,KAAK,IAAI,IAAI,CAAC;IACpF,gDAAgD;IAChD,KAAK,CAAC,SAAS,CAAC,GAAG,EAAE;QACnB,IAAI,WAAW,EAAE;YACf,MAAM,aAAa,GAAG,GAAG,EAAE,CAAC,qBAAqB,EAAE,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC;YAC9E,aAAa,EAAE,CAAC;YAChB,MAAM,EAAE,GAAG,WAAW,CAAC,aAAa,EAAE,EAAE,GAAG,IAAI,CAAC,CAAC;YACjD,OAAO,GAAG,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,CAAC;SAChC;IACH,CAAC,EAAE,CAAC,WAAW,CAAC,CAAC,CAAC;IAClB,+CAA+C;IAE/C,wEAAwE;IACxE,0EAA0E;IAC1E,IAAI,WAAW,CAAC,QAAQ,CAAC,EAAE;QACzB,OAAO,IAAI,CAAC;KACb;IAED,MAAM,mBAAmB,GAAG,GAAG,EAAE,CAAC,oBAAC,MAAM,IAAC,KAAK,EAAC,sBAAsB,EAAC,MAAM,EAAE,oBAAC,uBAAuB,IAAC,gBAAgB,EAAE,KAAK,CAAC,KAAK,CAAC,kBAAkB,CAAC,GAAI,GAAI,CAAC;IAClK,MAAM,sBAAsB,GAAG,GAAG,EAAE,CAAC,oBAAC,MAAM,IAAC,KAAK,EAAC,mBAAmB,GAAG,CAAC;IAC1E,OAAO,oBAAC,KAAK,oBAAK,UAAU,kBAAa,UAAU,EAAC,IAAI,EAAE,IAAI,EAAE,MAAM,EAAE,WAAW,CAAC,CAAC,CAAC,iBAAiB,CAAC,CAAC,CAAC,eAAe,EAAE,GAAG,EAAE,GAAG,EAAE,QAAQ,EAAE,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,sBAAsB,CAAC,CAAC,CAAC,mBAAmB,EAAE,UAAU,EAAE,EAAE,WAAW,EAAE,EAAE,UAAU,UAAG,CAAC;AAC5P,CAAC,CAAC,CAAC;AACH,MAAM,CAAC,MAAM,WAAW,GAAG,OAAO,CAAC,IAAI,EAAE,QAAQ,CAAC,EAAE,CAAC,CAAC;IACpD,mBAAmB,EAAE,OAAO,CAAC,EAAE,CAAC,QAAQ,CAAC,SAAS,CAAC,mBAAmB,CAAC,OAAO,CAAC,CAAC;CACjF,CAAC,CAAC,CAAC,cAAc,CAAC,KAAK,CAAC,iBAAiB,EAAE,KAAK,CAAC,UAAU,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC;AAE7E,MAAM,CAAC,MAAM,YAAY,GAAG,cAAc,CAAC,KAAK,CAAC,kBAAkB,CAAC,CAAC,CAAC,EAAkB,EAAE,EAAE;QAAtB,EAAE,KAAK,OAAW,EAAT,4BAAO;IAAO,OAAA;IAC3F,6FAA6F;IAC7F,yEAAyE;IACzE,oBAAC,QAAQ,oBAAK,IAAI,IAAE,aAAa,EAAE,WAAW,EAAE,SAAS,EAAE,KAAK,CAAC,KAAK,CAAC,kBAAkB,CAAC,EAAE,aAAa,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC,EAAE,WAAW,EAAC,yBAAyB,EAAC,gBAAgB,QAAC,UAAU,EAAC,cAAc,IAAG,CAC7O,CAAA;CAAA,CAAC,CAAC;AAEH,sDAAsD;AACtD,MAAM,CAAC,MAAM,UAAU,GAAG,KAAK,CAAC,EAAE;IAChC,MAAM,CAAC,SAAS,EAAE,YAAY,CAAC,GAAG,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;IACvD,MAAM,CAAC,IAAI,EAAE,OAAO,CAAC,GAAG,KAAK,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC;IAClD,MAAM,EAAE,CAAC,EAAE,GAAG,cAAc,EAAE,CAAC;IAE/B,KAAK,CAAC,SAAS,CAAC,GAAG,EAAE;QACnB,MAAM,CAAC,WAAW,EAAE,IAAI,EAAE,KAAK,CAAC,SAAS,CAAC,QAAQ,CAAC,IAAI,EAAE;YACvD,WAAW,EAAE,EAAE,aAAa,EAAE,qCAAqC,EAAE;SACtE,CAAC;aACC,IAAI,CAAC,WAAW,CAAC,EAAE;YAClB,YAAY,CAAC,KAAK,CAAC,CAAC;YACpB,OAAO,CAAC,CAAC,CAAC,GAAG,CAAC,WAAW,EAAE,UAAU,CAAC,CAAC,CAAC;QAC1C,CAAC,CAAC;aACD,KAAK,CAAC,KAAK,CAAC,EAAE;YACb,YAAY,CAAC,KAAK,CAAC,CAAC;YACpB,OAAO,CAAC,SAAS,CAAC,CAAC;YACnB,8CAA8C;YAC9C,IAAI,KAAK,CAAC,MAAM,KAAK,GAAG,EAAE;gBACxB,MAAM,KAAK,CAAC;aACb;QACH,CAAC,CAAC,CAAC;IACP,CAAC,EAAE,CAAC,KAAK,CAAC,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC;IAEpC,IAAI,SAAS,EAAE;QACb,OAAO,oBAAC,aAAa,OAAG,CAAC;KAC1B;IACD,MAAM,KAAK,GAAG,GAAG,EAAE,CAAC,iCAAiC,CAAC,EAAE,SAAS,EAAE,KAAK,CAAC,SAAS,EAAE,UAAU,EAAE,IAAI,EAAE,CAAC,CAAC;IAExG,OAAO,CACL,oBAAC,MAAM,IAAC,OAAO,EAAC,MAAM,EAAC,IAAI,EAAC,QAAQ,EAAC,QAAQ,QAAC,OAAO,EAAE,KAAK;QACzD,CAAC,CAAC,GAAG,CAAC,IAAI,EAAE,eAAe,CAAC,IAAI,CAAC,CAAC,0CAA0C,CAAC;QAC9E,oBAAC,aAAa,IAAC,SAAS,EAAC,yCAAyC,GAAG,CAC9D,CACV,CAAC;AACJ,CAAC,CAAC;AAEF,MAAM,CAAC,MAAM,mBAAmB,GAAG,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE;IAC5C,MAAM,EAAE,CAAC,EAAE,GAAG,cAAc,EAAE,CAAC;IAC/B,OAAO,CACL,6BAAK,SAAS,EAAC,KAAK;QAClB,6BAAK,SAAS,EAAC,oBAAoB;YACjC,oBAAC,IAAI,IAAC,KAAK,EAAE,CAAC,CAAC,mEAAmE,CAAC,EAAE,QAAQ,EAAE,gBAAgB,EAAE,SAAS,EAAE,EAAE,CAAC,QAAQ,CAAC,IAAI,EAAE,KAAK,EAAE,gDAAgD,EAAE,CAAC,QAAQ,CAAC,IAAI,IAAI,GAAI,CACzN;QACN,6BAAK,SAAS,EAAC,oBAAoB;YACjC,oBAAC,IAAI,IAAC,KAAK,EAAE,CAAC,CAAC,mEAAmE,CAAC,EAAE,QAAQ,EAAE,mBAAmB,EAAE,YAAY,EAAE,aAAa,CAAC,WAAW,EAAE,SAAS,EAAE,EAAE,CAAC,QAAQ,CAAC,IAAI,EAAE,KAAK,EAAE,oEAAoE,EAAE,CAAC,QAAQ,CAAC,IAAI,0BAA0B,GAAI,CAC/S,CACF,CACP,CAAC;AACJ,CAAC,CAAC;AAEF,MAAM,CAAC,MAAM,eAAe,GAAG,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE;IACxC,MAAM,EAAE,CAAC,EAAE,GAAG,cAAc,EAAE,CAAC;IAC/B,OAAO,oBAAC,GAAG,IAAC,KAAK,EAAE,CAAC,CAAC,mEAAmE,CAAC,EAAE,SAAS,EAAE,EAAE,CAAC,QAAQ,CAAC,IAAI,EAAE,KAAK,EAAE,sGAAsG,EAAE,CAAC,QAAQ,CAAC,IAAI,OAAO,EAAE,QAAQ,EAAE,mBAAmB,EAAE,MAAM,EAAC,KAAK,GAAG,CAAC;AAC/S,CAAC,CAAC;AAEF,MAAM,aAAa,GAAG,iBAAiB,CAAC,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE;IACjD,MAAM,EAAE,CAAC,EAAE,GAAG,cAAc,EAAE,CAAC;IAC/B,OAAO,CACL,6BAAK,SAAS,EAAC,iBAAiB;QAC9B,oBAAC,cAAc,IAAC,IAAI,EAAE,CAAC,CAAC,mEAAmE,CAAC,GAAI;QAChG,oBAAC,mBAAmB,IAAC,EAAE,EAAE,EAAE,GAAI;QAC/B,oBAAC,eAAe,IAAC,EAAE,EAAE,EAAE,GAAI,CACvB,CACP,CAAC;AACJ,CAAC,CAAC,CAAC;AAEH,MAAM,CAAC,MAAM,gBAAgB,GAAG,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE;IACzC,MAAM,EAAE,CAAC,EAAE,GAAG,cAAc,EAAE,CAAC;IAC/B,MAAM,WAAW,GAAG,cAAc,CAAC,EAAE,CAAC,CAAC;IACvC,MAAM,SAAS,GAAG,YAAY,CAAC,EAAE,CAAC,CAAC;IACnC,MAAM,cAAc,GAAG,eAAe,CAAC;QACrC,KAAK,EAAE,WAAW,CAAC,QAAQ;QAC3B,QAAQ,EAAE,WAAW,CAAC,MAAM;QAC5B,IAAI,EAAE,OAAO;QACb,SAAS,EAAE,EAAE,CAAC,QAAQ,CAAC,IAAI;KAC5B,CAAC,CAAC;IACH,OAAO,CACL,6BAAK,SAAS,EAAC,KAAK;QAClB,6BAAK,SAAS,EAAC,oBAAoB;YACjC,oBAAC,eAAe,IAAC,QAAQ,EAAE,EAAE;gBAC1B,WAAW,IAAI,+CAAqB;gBACpC,WAAW,IAAI,gCAAK,WAAW,CAAM;gBACrC,SAAS,IAAI,4CAAkB;gBAC/B,SAAS,IAAI,gCAAK,SAAS,CAAM,CAClB,CACd;QACN,6BAAK,SAAS,EAAC,oBAAoB;YACjC,4BAAI,SAAS,EAAC,oBAAoB;gBAChC,oBAAC,WAAW,IAAC,KAAK,EAAE,CAAC,CAAC,0CAA0C,CAAC,EAAE,GAAG,EAAE,EAAE,EAAE,IAAI,EAAC,cAAc;oBAC7F,oBAAC,MAAM,IAAC,MAAM,EAAE,EAAE,CAAC,MAAM,CAAC,KAAK,GAAI,CACvB;gBACb,cAAc,IAAI,CACjB;oBACE,gCAAK,CAAC,CAAC,0CAA0C,CAAC,CAAM;oBACxD;wBACE,oBAAC,UAAU,IAAC,SAAS,EAAE,EAAE,GAAI,CAC1B,CACJ,CACJ;gBACD,gCAAK,CAAC,CAAC,0CAA0C,CAAC,CAAM;gBACxD;oBACE,oBAAC,IAAI,IAAC,EAAE,EAAE,WAAW,EAAE,CAAC,QAAQ,CAAC,IAAI,kBAAkB,IAAG,CAAC,CAAC,0CAA0C,CAAC,CAAQ,CAC5G,CACF,CACD,CACF,CACP,CAAC;AACJ,CAAC,CAAC;AAEF,MAAM,iBAAiB,GAAG,CAAC,EAAE,GAAG,EAAE,EAAE,EAAE,YAAY,EAAE,UAAU,EAAE,EAAE,EAAE;IAClE,MAAM,EAAE,CAAC,EAAE,GAAG,cAAc,EAAE,CAAC;IAC/B,MAAM,KAAK,GAAG,iCAAiC,CAAC,EAAE,EAAE,YAAY,CAAC,CAAC;IAClE,OAAO,CACL;QACE,6BAAK,SAAS,EAAC,iBAAiB;YAC7B,EAAC,UAAU,aAAV,UAAU,uBAAV,UAAU,CAAE,WAAW,CAAA,IAAI,oBAAC,cAAc,IAAC,IAAI,EAAE,CAAC,CAAC,yCAAyC,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,uBAAuB,CAAC,EAAE,CAAC,GAAI;YACtI,oBAAC,gBAAgB,IAAC,EAAE,EAAE,EAAE,GAAI,CACxB;QACL,EAAE,CAAC,IAAI,KAAK,WAAW,IAAI,oBAAC,aAAa,IAAC,EAAE,EAAE,EAAE,GAAI;QACpD,CAAC,CAAC,CAAC,OAAO,CAAC,KAAK,CAAC,IAAI,CACpB,6BAAK,SAAS,EAAC,iBAAiB;YAC9B,oBAAC,cAAc,IAAC,IAAI,EAAC,UAAU,GAAG;YAClC,4BAAI,SAAS,EAAC,eAAe,IAC1B,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,EAAE,WAAW,CAAC,EAAE,IAAI,CAAC,EAAE;gBAC1C,OAAO,CACL,4BAAI,GAAG,EAAE,IAAI,CAAC,QAAQ,CAAC,GAAG;oBACxB,oBAAC,YAAY,IAAC,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,IAAI,GAAI,CACzD,CACN,CAAC;YACJ,CAAC,CAAC,CACC,CACD,CACP,CACG,CACP,CAAC;AACJ,CAAC,CAAC;AAEF,MAAM,mBAAmB,GAAG,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC;IACvC,YAAY,EAAE,EAAE,CAAC,GAAG,CAAC,cAAc,CAAC;CACrC,CAAC,CAAC;AAEH,MAAM,CAAC,MAAM,gBAAgB,GAAG,OAAO,CAAC,mBAAmB,CAAC,CAAC,iBAAiB,CAAC,CAAC;AAEhF,MAAM,SAAS,GAAG,CAAC,EAAE,GAAG,EAAE,EAAE,QAAQ,EAAE,EAAE,EAAE,EAAE,CAAC,oBAAC,gBAAgB,IAAC,UAAU,EAAE,WAAW,QAAQ,CAAC,IAAI,kCAAkC,EAAE,SAAS,EAAE,QAAQ,CAAC,IAAI,EAAE,SAAS,EAAE,KAAK,GAAI,CAAC;AAEtL,MAAM,kBAAkB,GAAG,CAAC,IAAI,EAAE,IAAI,EAAE,EAAE,CAAC,KAAK,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;AAE7D,MAAM,gBAAgB,GAAG,EAAE,CAAC;AAE5B,MAAM,gCAAgC,GAAG,KAAK,CAAC,EAAE;IAC/C,MAAM,eAAe,GAAG,KAAK,CAAC,EAAE,CAAC,GAAG,CAAC,iBAAiB,CAAC,CAAC;IACxD,MAAM,SAAS,GAAG,KAAK,CAAC,kBAAkB,CAAC,CAAC,GAAG,CAAC,KAAK,CAAC,WAAW,CAAC,CAAC;IACnE,MAAM,gBAAgB,GAAG,KAAK,CAAC,kBAAkB,CAAC,CAAC,GAAG,CAAC,KAAK,CAAC,kBAAkB,CAAC,CAAC;IAEjF,OAAO,EAAE,eAAe,EAAE,SAAS,EAAE,gBAAgB,EAAE,CAAC;AAC1D,CAAC,CAAC;AACF,MAAM,mCAAmC,GAAG,QAAQ,CAAC,EAAE,CAAC,CAAC;IACvD,kBAAkB,EAAE,EAAE,CAAC,EAAE,CAAC,QAAQ,CAAC,SAAS,CAAC,kBAAkB,CAAC,EAAE,CAAC,CAAC;IACpE,cAAc,EAAE,IAAI,CAAC,EAAE,CAAC,QAAQ,CAAC,OAAO,CAAC,KAAK,CAAC,0BAA0B,EAAE,IAAI,CAAC,CAAC;CAClF,CAAC,CAAC;AAEH,MAAM,WAAW,GAAG,CAAC,YAAY,EAAE,iBAAiB,CAAC,CAAC;AAEtD,MAAM,sBAAuB,SAAQ,KAAK,CAAC,SAAS;IAClD,kBAAkB;QAChB,MAAM,EAAE,SAAS,EAAE,cAAc,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC;QACjD,IAAI,SAAS,CAAC,MAAM,EAAE;YACpB,MAAM,WAAW,GAAG,CAAC,CAAC,OAAO,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;YAC9C,cAAc,CAAC,WAAW,CAAC,CAAC,CAAC,kCAAkC;SAChE;IACH,CAAC;IAED,MAAM;QACJ,MAAM,EAAE,eAAe,EAAE,iBAAiB,EAAE,kBAAkB,EAAE,SAAS,EAAE,gBAAgB,EAAE,WAAW,EAAE,QAAQ,EAAE,QAAQ,EAAE,CAAC,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC;QAC/I,gCAAgC;QAChC,iBAAiB;QACjB,IAAI;QAEJ,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC;QAC9C,MAAM,KAAK,GAAG,QAAQ,CAAC,WAAW,CAAC,CAAC;QACpC,MAAM,kBAAkB,GAAG,CAAC,CAAC,mBAAmB,CAAC,CAAC;QAClD,MAAM,KAAK,GAAG,EAAE,CAAC;QAEjB,IAAI,SAAS,EAAE;YACb,KAAK,CAAC,kBAAkB,CAAC,GAAG,kBAAkB,CAAC;SAChD;QAED,CAAC,CAAC,GAAG,CAAC,IAAI,EAAE,eAAe,CAAC;aACzB,IAAI,EAAE;aACN,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC;QAEzC,IAAI,KAAK,GAAG,eAAe,CAAC;QAC5B,IAAI,eAAe,KAAK,kBAAkB,EAAE;YAC1C,KAAK,GAAG,kBAAkB,CAAC;SAC5B;aAAM,IAAI,MAAM,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,KAAK,EAAE,KAAK,CAAC,EAAE;YACzC,iGAAiG;YACjG,wBAAwB;YACxB,mDAAmD;YACnD,kBAAkB,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;SAC3C;QACD,MAAM,iBAAiB,GAAG,gBAAgB;YACxC,CAAC,CAAC;gBACE;oBACE,WAAW,EAAE,UAAU,KAAK,CAAC,KAAK,EAAE;oBACpC,SAAS,EAAE,mBAAmB;iBAC/B;aACF;YACH,CAAC,CAAC,EAAE,CAAC;QAEP,MAAM,QAAQ,GAAG,YAAY,CAAC,EAAE;YAC9B,IAAI,YAAY,KAAK,mBAAmB,EAAE;gBACxC,kBAAkB,CAAC;oBACjB,QAAQ,EAAE,IAAI;oBACd,QAAQ,EAAE,UAAU,CAAC,EAAE;wBACrB,kBAAkB,CAAC,UAAU,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;wBAC7C,mBAAmB,CAAC,cAAc,CAAC,CAAC;oBACtC,CAAC;iBACF,CAAC,CAAC;aACJ;iBAAM;gBACL,iBAAiB,IAAI,iBAAiB,CAAC,YAAY,CAAC,CAAC;gBACrD,kBAAkB,CAAC,YAAY,CAAC,CAAC;gBACjC,mBAAmB,CAAC,cAAc,CAAC,CAAC;aACrC;QACH,CAAC,CAAC;QAEF,OAAO,CACL,6BAAK,SAAS,EAAC,yBAAyB,kBAAc,wBAAwB;YAC5E,oBAAC,QAAQ,IACP,QAAQ,EAAE,QAAQ,EAClB,SAAS,EAAC,uBAAuB,EACjC,aAAa,EAAC,6BAA6B,EAC3C,eAAe,EAAC,YAAY;gBAC5B,cAAc;gBACd,KAAK,EAAE,KAAK,EACZ,WAAW,EAAE,iBAAiB,EAC9B,WAAW,EAAE,CAAC,CAAC,mBAAmB,CAAC,EACnC,KAAK,EAAE,KAAK,EACZ,QAAQ,EAAE,QAAQ,EAClB,WAAW,EAAE,eAAe,IAAI,kBAAkB,EAClD,kBAAkB,EAAE,kBAAkB,EACtC,uBAAuB,EAAE,CAAC,CAAC,mBAAmB,CAAC,EAC/C,UAAU,EAAE,IAAI,EAChB,gBAAgB,EAAE,gBAAgB,EAClC,UAAU,EAAE,2BAA2B,EACvC,QAAQ,EAAE,kBAAkB,CAAC,sBAAsB,GACnD;YACD,QAAQ,CACL,CACP,CAAC;IACJ,CAAC;CACF;AAED,MAAM,qBAAqB,GAAG,OAAO,CAAC,gCAAgC,EAAE,mCAAmC,CAAC,CAAC,eAAe,EAAE,CAAC,sBAAsB,CAAC,CAAC,CAAC;AAExJ,MAAM,aAAa,GAAG,CAAC,EAAE,WAAW,EAAE,QAAQ,EAAE,QAAQ,EAAE,iBAAiB,EAAE,EAAE,EAAE;IAC/E,OAAO,CACL,6BAAK,SAAS,EAAC,kBAAkB;QAC/B,oBAAC,QAAQ,IAAC,SAAS,EAAE,CAAC,EAAE,IAAI,EAAE,QAAQ,CAAC,WAAW,CAAC,CAAC,IAAI,EAAE,IAAI,EAAE,WAAW,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC;YAC1F,oBAAC,qBAAqB,IAAC,WAAW,EAAE,WAAW,EAAE,QAAQ,EAAE,QAAQ,EAAE,iBAAiB,EAAE,iBAAiB,IACtG,QAAQ,CACa,CACf,CACP,CACP,CAAC;AACJ,CAAC,CAAC;AAEF,MAAM,wBAAwB,GAAG,CAAC,EAAE,GAAG,EAAE,EAAE,EAAE;IAC3C,MAAM,WAAW,GAAG,GAAG,CAAC,KAAK,CAAC,CAAC,WAAW,EAAE,QAAQ,EAAE,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC;IAC1E,OAAO;QACL,WAAW;KACZ,CAAC;AACJ,CAAC,CAAC;AACF,iGAAiG;AACjG,MAAM,CAAC,MAAM,YAAY,GAAG,OAAO,CAAC,wBAAwB,CAAC,CAAC,aAAa,CAAC,CAAC;AAE7E,MAAM,CAAC,MAAM,qBAAqB,GAAG,KAAK,CAAC,EAAE,CAAC,oBAAC,WAAW,oBAAK,KAAK,IAAE,WAAW,EAAE,aAAa,EAAE,KAAK,EAAE,CAAC,UAAU,CAAC,OAAO,CAAC,gBAAgB,CAAC,EAAE,UAAU,CAAC,QAAQ,EAAE,EAAE,UAAU,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC;AAExM,MAAM,CAAC,MAAM,mBAAmB,GAAG,KAAK,CAAC,EAAE,CAAC,CAC1C,oBAAC,WAAW,oBACN,KAAK,IACT,WAAW,EAAE,kBAAkB,EAC/B,KAAK,EAAE;QACL;YACE,IAAI,EAAE,EAAE;YACR,IAAI,EAAE,UAAU;YAChB,SAAS,EAAE,gBAAgB;SAC5B;QACD;YACE,IAAI,EAAE,SAAS;YACf,IAAI,EAAE,SAAS;YACf,SAAS,EAAE,gBAAgB;SAC5B;QACD,UAAU,CAAC,QAAQ,EAAE;QACrB,UAAU,CAAC,SAAS,CAAC,QAAQ,CAAC;QAC9B,UAAU,CAAC,KAAK,CAAC,SAAS,CAAC;KAC5B,IACD,CACH,CAAC","sourcesContent":["import * as _ from 'lodash-es';\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport { sortable } from '@patternfly/react-table';\nimport { connect } from 'react-redux';\nimport { Tooltip, Button } from '@patternfly/react-core';\n\nimport { PencilAltIcon } from '@patternfly/react-icons';\nimport { Link } from 'react-router-dom';\nimport * as fuzzy from 'fuzzysearch';\nimport { Status, getRequester, ALL_NAMESPACES_KEY, KEYBOARD_SHORTCUTS, NAMESPACE_LOCAL_STORAGE_KEY, FLAGS } from '@console/shared';\nimport { ByteDataTypes } from '@console/shared/src/graph-helper/data-utils';\n\nimport { NamespaceModel, ProjectModel, SecretModel } from '../models';\nimport { coFetchJSON } from '../co-fetch';\nimport { k8sGet, referenceForModel } from '../module/k8s';\nimport * as k8sActions from '../actions/k8s';\nimport * as UIActions from '../actions/ui';\nimport { DetailsPage, ListPage, Table, TableRow, TableData } from './factory';\nimport { DetailsItem, Dropdown, ExternalLink, Firehose, Kebab, LabelList, LoadingInline, MsgBox, ResourceIcon, ResourceKebab, ResourceLink, ResourceSummary, SectionHeading, Timestamp, formatBytesAsMiB, formatCores, humanizeBinaryBytes, humanizeCpuCores, navFactory, useAccessReview } from './utils';\nimport { createNamespaceModal, createProjectModal, deleteNamespaceModal, configureNamespacePullSecretModal } from './modals';\nimport { RoleBindingsPage } from './RBAC';\nimport { Bar, Area, PROMETHEUS_BASE_PATH, requirePrometheus } from './graphs';\nimport { featureReducerName, flagPending, connectToFlags } from '../reducers/features';\nimport { setFlag } from '../actions/features';\nimport { OpenShiftGettingStarted } from './start-guide';\nimport { Overview } from './overview';\nimport { getNamespaceDashboardConsoleLinks, ProjectDashboard } from './dashboard/project-dashboard/project-dashboard';\nimport { removeQueryArgument } from './utils/router';\nimport { useTranslation, withTranslation } from 'react-i18next';\n\nconst getModel = useProjects => (useProjects ? ProjectModel : NamespaceModel);\nconst getDisplayName = obj => _.get(obj, ['metadata', 'annotations', 'openshift.io/display-name']);\nconst CREATE_NEW_RESOURCE = '#CREATE_RESOURCE_ACTION#';\n\nexport const deleteModal = (kind, ns) => {\n  let { label, weight, accessReview } = Kebab.factory.Delete(kind, ns);\n  let callback = undefined;\n  let tooltip;\n\n  if (ns.metadata.name === 'default') {\n    tooltip = `${kind.label} default cannot be deleted`;\n  } else if (ns.status.phase === 'Terminating') {\n    tooltip = `${kind.label} is already terminating`;\n  } else {\n    callback = () => deleteNamespaceModal({ kind, resource: ns });\n  }\n  if (tooltip) {\n    label = (\n      <div className=\"dropdown__disabled\">\n        <Tooltip content={tooltip}>\n          <span>{label}</span>\n        </Tooltip>\n      </div>\n    );\n  }\n  return { label, weight, callback, accessReview };\n};\n\nconst nsMenuActions = [Kebab.factory.ModifyLabels, Kebab.factory.ModifyAnnotations, Kebab.factory.Edit, deleteModal];\n\nconst fetchNamespaceMetrics = () => {\n  const metrics = [\n    {\n      key: 'memory',\n      query: 'sum by(namespace) (container_memory_working_set_bytes{container=\"\",pod!=\"\"})',\n    },\n    {\n      key: 'cpu',\n      query: 'namespace:container_cpu_usage:sum',\n    },\n  ];\n  const promises = metrics.map(({ key, query }) => {\n    const url = `${PROMETHEUS_BASE_PATH}/api/v1/query?&query=${query}`;\n    return coFetchJSON(url).then(({ data: { result } }) => {\n      return result.reduce((acc, data) => {\n        const value = Number(data.value[1]);\n        return _.set(acc, [key, data.metric.namespace], value);\n      }, {});\n    });\n  });\n  return Promise.all(promises).then(data => _.assign({}, ...data));\n};\n\nconst namespacesColumnClasses = [\n  '', // name\n  '', // status\n  classNames('pf-m-hidden', 'pf-m-visible-on-sm'), // labels\n  classNames('pf-m-hidden', 'pf-m-visible-on-lg pf-u-w-16-on-lg'), // created\n  Kebab.columnClass,\n];\n\nconst NamespacesTableHeader = t => {\n  return [\n    {\n      title: t('COMMON:MSG_MAIN_TABLEHEADER_1'),\n      sortField: 'metadata.name',\n      transforms: [sortable],\n      props: { className: namespacesColumnClasses[0] },\n    },\n    {\n      title: t('COMMON:MSG_MAIN_TABLEHEADER_3'),\n      sortField: 'status.phase',\n      transforms: [sortable],\n      props: { className: namespacesColumnClasses[1] },\n    },\n    {\n      title: t('COMMON:MSG_MAIN_TABLEHEADER_15'),\n      sortField: 'metadata.labels',\n      transforms: [sortable],\n      props: { className: namespacesColumnClasses[2] },\n    },\n    {\n      title: t('COMMON:MSG_MAIN_TABLEHEADER_12'),\n      sortField: 'metadata.creationTimestamp',\n      transforms: [sortable],\n      props: { className: namespacesColumnClasses[3] },\n    },\n    { title: '', props: { className: namespacesColumnClasses[4] } },\n  ];\n};\nNamespacesTableHeader.displayName = 'NamespacesTableHeader';\n\nconst NamespacesTableRow = ({ obj: ns, index, key, style }) => {\n  return (\n    <TableRow id={ns.metadata.uid} index={index} trKey={key} style={style}>\n      <TableData className={namespacesColumnClasses[0]}>\n        <ResourceLink kind=\"Namespace\" name={ns.metadata.name} title={ns.metadata.uid} />\n      </TableData>\n      <TableData className={classNames(namespacesColumnClasses[1], 'co-break-word')}>\n        <Status status={ns.status.phase} />\n      </TableData>\n      <TableData className={namespacesColumnClasses[2]}>\n        <LabelList kind=\"Namespace\" labels={ns.metadata.labels} />\n      </TableData>\n      <TableData className={namespacesColumnClasses[3]}>\n        <Timestamp timestamp={ns.metadata.creationTimestamp} />\n      </TableData>\n      <TableData className={namespacesColumnClasses[4]}>\n        <ResourceKebab actions={nsMenuActions} kind=\"Namespace\" resource={ns} />\n      </TableData>\n    </TableRow>\n  );\n};\n\nexport const NamespacesList = props => {\n  const { t } = useTranslation();\n  return <Table {...props} aria-label=\"Namespaces\" Header={NamespacesTableHeader.bind(null, t)} Row={NamespacesTableRow} virtualize />;\n};\n\nexport const NamespacesPage = props => {\n  const { t } = useTranslation();\n  // const createProps = {\n  //   items: createItems,\n  //   createLink: (type) =>\n  //     // `/k8s/ns/${props.namespace || 'default'}/namespaces/~new/${type !== 'yaml' ? type : ''}`,\n  //     `/k8s/cluster/namespaces/~new/${type !== 'yaml' ? type : ''}`,\n  // };\n  return (\n    <ListPage\n      {...props}\n      title={t('COMMON:MSG_LNB_MENU_3')}\n      ListComponent={NamespacesList}\n      canCreate={true}\n      // createProps={createProps}\n      // createHandler={() => createNamespaceModal({ blocking: true })}\n    />\n  );\n};\n\nexport const projectMenuActions = [Kebab.factory.Edit, deleteModal];\n\nconst projectColumnClasses = [\n  '', // name\n  classNames('pf-m-hidden', 'pf-m-visible-on-sm'), // display name\n  '', // status\n  classNames('pf-m-hidden', 'pf-m-visible-on-lg'), // requester\n  classNames('pf-m-hidden', 'pf-m-visible-on-xl'), // memory\n  classNames('pf-m-hidden', 'pf-m-visible-on-xl'), // cpu\n  classNames('pf-m-hidden', 'pf-m-visible-on-2xl'), // created\n  Kebab.columnClass,\n];\n\nconst projectTableHeader = ({ showMetrics, showActions }) => {\n  return [\n    {\n      title: 'Name',\n      sortField: 'metadata.name',\n      transforms: [sortable],\n      props: { className: projectColumnClasses[0] },\n    },\n    {\n      title: 'Display Name',\n      sortField: 'metadata.annotations[\"openshift.io/display-name\"]',\n      transforms: [sortable],\n      props: { className: projectColumnClasses[1] },\n    },\n    {\n      title: 'Status',\n      sortField: 'status.phase',\n      transforms: [sortable],\n      props: { className: projectColumnClasses[2] },\n    },\n    {\n      title: 'Requester',\n      sortField: \"metadata.annotations.['openshift.io/requester']\",\n      transforms: [sortable],\n      props: { className: projectColumnClasses[3] },\n    },\n    ...(showMetrics\n      ? [\n          {\n            title: 'Memory',\n            sortFunc: 'namespaceMemory',\n            transforms: [sortable],\n            props: { className: projectColumnClasses[4] },\n          },\n          {\n            title: 'CPU',\n            sortFunc: 'namespaceCPU',\n            transforms: [sortable],\n            props: { className: projectColumnClasses[5] },\n          },\n        ]\n      : []),\n    {\n      title: 'Created',\n      sortField: 'metadata.creationTimestamp',\n      transforms: [sortable],\n      props: { className: projectColumnClasses[6] },\n    },\n    ...(showActions ? [{ title: '', props: { className: projectColumnClasses[7] } }] : []),\n  ];\n};\n\nconst ProjectLink = connect(null, {\n  setActiveNamespace: UIActions.setActiveNamespace,\n  filterList: k8sActions.filterList,\n})(({ project, setActiveNamespace, filterList }) => (\n  <span className=\"co-resource-item co-resource-item--truncate\">\n    <ResourceIcon kind=\"Project\" />\n    <Button\n      isInline\n      title={project.metadata.name}\n      type=\"button\"\n      className=\"co-resource-item__resource-name\"\n      onClick={() => {\n        setActiveNamespace(project.metadata.name);\n        removeQueryArgument('project-name');\n        // clear project-name filter when active namespace is changed\n        filterList(referenceForModel(ProjectModel), 'project-name', '');\n      }}\n      variant=\"link\"\n    >\n      {project.metadata.name}\n    </Button>\n  </span>\n));\nconst projectHeaderWithoutActions = () => projectTableHeader({ showMetrics: false, showActions: false });\n\nconst projectRowStateToProps = ({ UI }) => ({\n  metrics: UI.getIn(['metrics', 'namespace']),\n});\n\nconst ProjectTableRow = connect(projectRowStateToProps)(({ obj: project, index, rowKey, style, customData = {}, metrics }) => {\n  const requester = getRequester(project);\n  const { ProjectLinkComponent, actionsEnabled = true, showMetrics } = customData;\n  const bytes = _.get(metrics, ['memory', project.metadata.name]);\n  const cores = _.get(metrics, ['cpu', project.metadata.name]);\n  return (\n    <TableRow id={project.metadata.uid} index={index} trKey={rowKey} style={style}>\n      <TableData className={projectColumnClasses[0]}>\n        {customData && ProjectLinkComponent ? (\n          <ProjectLinkComponent project={project} />\n        ) : (\n          <span className=\"co-resource-item\">\n            <ResourceLink kind=\"Project\" name={project.metadata.name} title={project.metadata.uid} />\n          </span>\n        )}\n      </TableData>\n      <TableData className={projectColumnClasses[1]}>\n        <span className=\"co-break-word co-line-clamp\">{getDisplayName(project) || <span className=\"text-muted\">No display name</span>}</span>\n      </TableData>\n      <TableData className={projectColumnClasses[2]}>\n        <Status status={project.status.phase} />\n      </TableData>\n      <TableData className={classNames(projectColumnClasses[3], 'co-break-word')}>{requester || <span className=\"text-muted\">No requester</span>}</TableData>\n      {showMetrics && (\n        <>\n          <TableData className={projectColumnClasses[4]}>{bytes ? `${formatBytesAsMiB(bytes)} MiB` : '-'}</TableData>\n          <TableData className={projectColumnClasses[5]}>{cores ? `${formatCores(cores)} cores` : '-'}</TableData>\n        </>\n      )}\n      <TableData className={projectColumnClasses[6]}>\n        <Timestamp timestamp={project.metadata.creationTimestamp} />\n      </TableData>\n      {actionsEnabled && (\n        <TableData className={projectColumnClasses[7]}>\n          <ResourceKebab actions={projectMenuActions} kind=\"Project\" resource={project} />\n        </TableData>\n      )}\n    </TableRow>\n  );\n});\nProjectTableRow.displayName = 'ProjectTableRow';\n\nconst Row = rowArgs => <ProjectTableRow obj={rowArgs.obj} index={rowArgs.index} rowKey={rowArgs.key} style={rowArgs.style} customData={rowArgs.customData} />;\n\nexport const ProjectsTable = props => <Table {...props} aria-label=\"Projects\" Header={projectHeaderWithoutActions} Row={Row} customData={{ ProjectLinkComponent: ProjectLink, actionsEnabled: false }} virtualize />;\n\nconst headerWithMetrics = () => projectTableHeader({ showMetrics: true, showActions: true });\nconst headerNoMetrics = () => projectTableHeader({ showMetrics: false, showActions: true });\nconst ProjectList_ = connectToFlags(\n  FLAGS.CAN_CREATE_PROJECT,\n  FLAGS.CAN_GET_NS,\n)(({ data, flags, setNamespaceMetrics, ...tableProps }) => {\n  const canGetNS = flags[FLAGS.CAN_GET_NS];\n  const showMetrics = PROMETHEUS_BASE_PATH && canGetNS && window.screen.width >= 1200;\n  /* eslint-disable react-hooks/exhaustive-deps */\n  React.useEffect(() => {\n    if (showMetrics) {\n      const updateMetrics = () => fetchNamespaceMetrics().then(setNamespaceMetrics);\n      updateMetrics();\n      const id = setInterval(updateMetrics, 30 * 1000);\n      return () => clearInterval(id);\n    }\n  }, [showMetrics]);\n  /* eslint-enable react-hooks/exhaustive-deps */\n\n  // Don't render the table until we know whether we can get metrics. It's\n  // not possible to change the table headers once the component is mounted.\n  if (flagPending(canGetNS)) {\n    return null;\n  }\n\n  const ProjectEmptyMessage = () => <MsgBox title=\"Welcome to OpenShift\" detail={<OpenShiftGettingStarted canCreateProject={flags[FLAGS.CAN_CREATE_PROJECT]} />} />;\n  const ProjectNotFoundMessage = () => <MsgBox title=\"No Projects Found\" />;\n  return <Table {...tableProps} aria-label=\"Projects\" data={data} Header={showMetrics ? headerWithMetrics : headerNoMetrics} Row={Row} EmptyMsg={data.length > 0 ? ProjectNotFoundMessage : ProjectEmptyMessage} customData={{ showMetrics }} virtualize />;\n});\nexport const ProjectList = connect(null, dispatch => ({\n  setNamespaceMetrics: metrics => dispatch(UIActions.setNamespaceMetrics(metrics)),\n}))(connectToFlags(FLAGS.CAN_CREATE_PROJET, FLAGS.CAN_GET_NS)(ProjectList_));\n\nexport const ProjectsPage = connectToFlags(FLAGS.CAN_CREATE_PROJECT)(({ flags, ...rest }) => (\n  // Skip self-subject access review for projects since they use a special project request API.\n  // `FLAGS.CAN_CREATE_PROJECT` determines if the user can create projects.\n  <ListPage {...rest} ListComponent={ProjectList} canCreate={flags[FLAGS.CAN_CREATE_PROJECT]} createHandler={() => createProjectModal({ blocking: true })} filterLabel=\"by name or display name\" skipAccessReview textFilter=\"project-name\" />\n));\n\n/** @type {React.SFC<{namespace: K8sResourceKind}>} */\nexport const PullSecret = props => {\n  const [isLoading, setIsLoading] = React.useState(true);\n  const [data, setData] = React.useState(undefined);\n  const { t } = useTranslation();\n\n  React.useEffect(() => {\n    k8sGet(SecretModel, null, props.namespace.metadata.name, {\n      queryParams: { fieldSelector: 'type=kubernetes.io/dockerconfigjson' },\n    })\n      .then(pullSecrets => {\n        setIsLoading(false);\n        setData(_.get(pullSecrets, 'items[0]'));\n      })\n      .catch(error => {\n        setIsLoading(false);\n        setData(undefined);\n        // A 404 just means that no pull secrets exist\n        if (error.status !== 404) {\n          throw error;\n        }\n      });\n  }, [props.namespace.metadata.name]);\n\n  if (isLoading) {\n    return <LoadingInline />;\n  }\n  const modal = () => configureNamespacePullSecretModal({ namespace: props.namespace, pullSecret: data });\n\n  return (\n    <Button variant=\"link\" type=\"button\" isInline onClick={modal}>\n      {_.get(data, 'metadata.name') || t('COMMON:MSG_DETAILS_TABDETAILS_DETAILS_33')}\n      <PencilAltIcon className=\"co-icon-space-l pf-c-button-icon--plain\" />\n    </Button>\n  );\n};\n\nexport const NamespaceLineCharts = ({ ns }) => {\n  const { t } = useTranslation();\n  return (\n    <div className=\"row\">\n      <div className=\"col-md-6 col-sm-12\">\n        <Area title={t('SINGLE:MSG_NAMESPACES_NAMESPACEDETAILS_TABDETAILS_RESOURCEUSAGE_2')} humanize={humanizeCpuCores} namespace={ns.metadata.name} query={`namespace:container_cpu_usage:sum{namespace='${ns.metadata.name}'}`} />\n      </div>\n      <div className=\"col-md-6 col-sm-12\">\n        <Area title={t('SINGLE:MSG_NAMESPACES_NAMESPACEDETAILS_TABDETAILS_RESOURCEUSAGE_3')} humanize={humanizeBinaryBytes} byteDataType={ByteDataTypes.BinaryBytes} namespace={ns.metadata.name} query={`sum by(namespace) (container_memory_working_set_bytes{namespace=\"${ns.metadata.name}\",container=\"\",pod!=\"\"})`} />\n      </div>\n    </div>\n  );\n};\n\nexport const TopPodsBarChart = ({ ns }) => {\n  const { t } = useTranslation();\n  return <Bar title={t('SINGLE:MSG_NAMESPACES_NAMESPACEDETAILS_TABDETAILS_RESOURCEUSAGE_4')} namespace={ns.metadata.name} query={`sort_desc(topk(10, sum by (pod)(container_memory_working_set_bytes{container=\"\",pod!=\"\",namespace=\"${ns.metadata.name}\"})))`} humanize={humanizeBinaryBytes} metric=\"pod\" />;\n};\n\nconst ResourceUsage = requirePrometheus(({ ns }) => {\n  const { t } = useTranslation();\n  return (\n    <div className=\"co-m-pane__body\">\n      <SectionHeading text={t('SINGLE:MSG_NAMESPACES_NAMESPACEDETAILS_TABDETAILS_RESOURCEUSAGE_1')} />\n      <NamespaceLineCharts ns={ns} />\n      <TopPodsBarChart ns={ns} />\n    </div>\n  );\n});\n\nexport const NamespaceSummary = ({ ns }) => {\n  const { t } = useTranslation();\n  const displayName = getDisplayName(ns);\n  const requester = getRequester(ns);\n  const canListSecrets = useAccessReview({\n    group: SecretModel.apiGroup,\n    resource: SecretModel.plural,\n    verb: 'patch',\n    namespace: ns.metadata.name,\n  });\n  return (\n    <div className=\"row\">\n      <div className=\"col-sm-6 col-xs-12\">\n        <ResourceSummary resource={ns}>\n          {displayName && <dt>Display Name</dt>}\n          {displayName && <dd>{displayName}</dd>}\n          {requester && <dt>Requester</dt>}\n          {requester && <dd>{requester}</dd>}\n        </ResourceSummary>\n      </div>\n      <div className=\"col-sm-6 col-xs-12\">\n        <dl className=\"co-m-pane__details\">\n          <DetailsItem label={t('COMMON:MSG_DETAILS_TABDETAILS_DETAILS_13')} obj={ns} path=\"status.phase\">\n            <Status status={ns.status.phase} />\n          </DetailsItem>\n          {canListSecrets && (\n            <>\n              <dt>{t('COMMON:MSG_DETAILS_TABDETAILS_DETAILS_95')}</dt>\n              <dd>\n                <PullSecret namespace={ns} />\n              </dd>\n            </>\n          )}\n          <dt>{t('COMMON:MSG_DETAILS_TABDETAILS_DETAILS_96')}</dt>\n          <dd>\n            <Link to={`/k8s/ns/${ns.metadata.name}/networkpolicies`}>{t('COMMON:MSG_DETAILS_TABDETAILS_DETAILS_96')}</Link>\n          </dd>\n        </dl>\n      </div>\n    </div>\n  );\n};\n\nconst NamespaceDetails_ = ({ obj: ns, consoleLinks, customData }) => {\n  const { t } = useTranslation();\n  const links = getNamespaceDashboardConsoleLinks(ns, consoleLinks);\n  return (\n    <div>\n      <div className=\"co-m-pane__body\">\n        {!customData?.hideHeading && <SectionHeading text={t('COMMON:MSG_DETAILS_TABDETAILS_DETAILS_1', { 0: t('COMMON:MSG_LNB_MENU_3') })} />}\n        <NamespaceSummary ns={ns} />\n      </div>\n      {ns.kind === 'Namespace' && <ResourceUsage ns={ns} />}\n      {!_.isEmpty(links) && (\n        <div className=\"co-m-pane__body\">\n          <SectionHeading text=\"Launcher\" />\n          <ul className=\"list-unstyled\">\n            {_.map(_.sortBy(links, 'spec.text'), link => {\n              return (\n                <li key={link.metadata.uid}>\n                  <ExternalLink href={link.spec.href} text={link.spec.text} />\n                </li>\n              );\n            })}\n          </ul>\n        </div>\n      )}\n    </div>\n  );\n};\n\nconst DetailsStateToProps = ({ UI }) => ({\n  consoleLinks: UI.get('consoleLinks'),\n});\n\nexport const NamespaceDetails = connect(DetailsStateToProps)(NamespaceDetails_);\n\nconst RolesPage = ({ obj: { metadata } }) => <RoleBindingsPage createPath={`/k8s/ns/${metadata.name}/rolebindings/~new?rolekind=Role`} namespace={metadata.name} showTitle={false} />;\n\nconst autocompleteFilter = (text, item) => fuzzy(text, item);\n\nconst defaultBookmarks = {};\n\nconst namespaceBarDropdownStateToProps = state => {\n  const activeNamespace = state.UI.get('activeNamespace');\n  const canListNS = state[featureReducerName].get(FLAGS.CAN_LIST_NS);\n  const canCreateProject = state[featureReducerName].get(FLAGS.CAN_CREATE_PROJECT);\n\n  return { activeNamespace, canListNS, canCreateProject };\n};\nconst namespaceBarDropdownDispatchToProps = dispatch => ({\n  setActiveNamespace: ns => dispatch(UIActions.setActiveNamespace(ns)),\n  showStartGuide: show => dispatch(setFlag(FLAGS.SHOW_OPENSHIFT_START_GUIDE, show)),\n});\n\nconst clusterMenu = ['namespaces', 'namespaceclaims'];\n\nclass NamespaceBarDropdowns_ extends React.Component {\n  componentDidUpdate() {\n    const { namespace, showStartGuide } = this.props;\n    if (namespace.loaded) {\n      const noNamespace = _.isEmpty(namespace.data);\n      showStartGuide(noNamespace); // namespace 없으면 noNamespace창 보이도록\n    }\n  }\n\n  render() {\n    const { activeNamespace, onNamespaceChange, setActiveNamespace, canListNS, canCreateProject, useProjects, children, disabled, t } = this.props;\n    // if (flagPending(canListNS)) {\n    //   return null;\n    // }\n\n    const { loaded, data } = this.props.namespace;\n    const model = getModel(useProjects);\n    const allNamespacesTitle = t('COMMON:MSG_NNB__3');\n    const items = {};\n\n    if (canListNS) {\n      items[ALL_NAMESPACES_KEY] = allNamespacesTitle;\n    }\n\n    _.map(data, 'metadata.name')\n      .sort()\n      .forEach(name => (items[name] = name));\n\n    let title = activeNamespace;\n    if (activeNamespace === ALL_NAMESPACES_KEY) {\n      title = allNamespacesTitle;\n    } else if (loaded && !_.has(items, title)) {\n      // If the currently active namespace is not found in the list of all namespaces, put it in anyway\n      // items[title] = title;\n      // active한 namespace 없을 때 가장 첫번째 namespace 골라지도록 변.\n      setActiveNamespace(Object.keys(items)[0]);\n    }\n    const defaultActionItem = canCreateProject\n      ? [\n          {\n            actionTitle: `Create ${model.label}`,\n            actionKey: CREATE_NEW_RESOURCE,\n          },\n        ]\n      : [];\n\n    const onChange = newNamespace => {\n      if (newNamespace === CREATE_NEW_RESOURCE) {\n        createProjectModal({\n          blocking: true,\n          onSubmit: newProject => {\n            setActiveNamespace(newProject.metadata.name);\n            removeQueryArgument('project-name');\n          },\n        });\n      } else {\n        onNamespaceChange && onNamespaceChange(newNamespace);\n        setActiveNamespace(newNamespace);\n        removeQueryArgument('project-name');\n      }\n    };\n\n    return (\n      <div className=\"co-namespace-bar__items\" data-test-id=\"namespace-bar-dropdown\">\n        <Dropdown\n          disabled={disabled}\n          className=\"co-namespace-selector\"\n          menuClassName=\"co-namespace-selector__menu\"\n          buttonClassName=\"pf-m-plain\"\n          // canFavorite\n          items={items}\n          actionItems={defaultActionItem}\n          titlePrefix={t('COMMON:MSG_NNB__2')}\n          title={title}\n          onChange={onChange}\n          selectedKey={activeNamespace || ALL_NAMESPACES_KEY}\n          autocompleteFilter={autocompleteFilter}\n          autocompletePlaceholder={t('COMMON:MSG_NNB__1')}\n          noBookmark={true}\n          defaultBookmarks={defaultBookmarks}\n          storageKey={NAMESPACE_LOCAL_STORAGE_KEY}\n          shortCut={KEYBOARD_SHORTCUTS.focusNamespaceDropdown}\n        />\n        {children}\n      </div>\n    );\n  }\n}\n\nconst NamespaceBarDropdowns = connect(namespaceBarDropdownStateToProps, namespaceBarDropdownDispatchToProps)(withTranslation()(NamespaceBarDropdowns_));\n\nconst NamespaceBar_ = ({ useProjects, children, disabled, onNamespaceChange }) => {\n  return (\n    <div className=\"co-namespace-bar\">\n      <Firehose resources={[{ kind: getModel(useProjects).kind, prop: 'namespace', isList: true }]}>\n        <NamespaceBarDropdowns useProjects={useProjects} disabled={disabled} onNamespaceChange={onNamespaceChange}>\n          {children}\n        </NamespaceBarDropdowns>\n      </Firehose>\n    </div>\n  );\n};\n\nconst namespaceBarStateToProps = ({ k8s }) => {\n  const useProjects = k8s.hasIn(['RESOURCES', 'models', ProjectModel.kind]);\n  return {\n    useProjects,\n  };\n};\n/** @type {React.FC<{children?: ReactNode, disabled?: boolean, onNamespaceChange?: Function}>} */\nexport const NamespaceBar = connect(namespaceBarStateToProps)(NamespaceBar_);\n\nexport const NamespacesDetailsPage = props => <DetailsPage {...props} menuActions={nsMenuActions} pages={[navFactory.details(NamespaceDetails), navFactory.editYaml(), navFactory.roles(RolesPage)]} />;\n\nexport const ProjectsDetailsPage = props => (\n  <DetailsPage\n    {...props}\n    menuActions={projectMenuActions}\n    pages={[\n      {\n        href: '',\n        name: 'Overview',\n        component: ProjectDashboard,\n      },\n      {\n        href: 'details',\n        name: 'Details',\n        component: NamespaceDetails,\n      },\n      navFactory.editYaml(),\n      navFactory.workloads(Overview),\n      navFactory.roles(RolesPage),\n    ]}\n  />\n);\n"]}]}