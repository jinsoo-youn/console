{"remainingRequest":"/home/jinsoo/hypercloud-console5.0/frontend/node_modules/thread-loader/dist/cjs.js??ref--5-1!/home/jinsoo/hypercloud-console5.0/frontend/node_modules/ts-loader/index.js??ref--5-2!/home/jinsoo/hypercloud-console5.0/frontend/packages/console-shared/src/components/dynamic-form/fields.tsx","dependencies":[{"path":"/home/jinsoo/hypercloud-console5.0/frontend/packages/console-shared/src/components/dynamic-form/fields.tsx","mtime":1615701814890},{"path":"/home/jinsoo/hypercloud-console5.0/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1607306270906},{"path":"/home/jinsoo/hypercloud-console5.0/frontend/node_modules/thread-loader/dist/cjs.js","mtime":1607306283100},{"path":"/home/jinsoo/hypercloud-console5.0/frontend/node_modules/ts-loader/index.js","mtime":1607306283339}],"contextDependencies":[],"result":["import * as _ from 'lodash';\nimport * as classnames from 'classnames';\nimport * as React from 'react';\nimport { getUiOptions } from 'react-jsonschema-form/lib/utils';\nimport SchemaField from 'react-jsonschema-form/lib/components/fields/SchemaField';\nimport { LinkifyExternal, SelectorInput, Dropdown } from '@console/internal/components/utils';\nimport { AccordionContent, AccordionItem, AccordionToggle, Switch } from '@patternfly/react-core';\nimport { MatchExpressions } from '@console/operator-lifecycle-manager/src/components/descriptors/spec/match-expressions';\nimport { ResourceRequirements } from '@console/operator-lifecycle-manager/src/components/descriptors/spec/resource-requirements';\nimport { AdditionalPropertyFields } from '@console/operator-lifecycle-manager/src/components/descriptors/spec/additional-properties';\nimport { ConfigureUpdateStrategy, UPDATE_STRATEGY_DESCRIPTION } from '@console/internal/components/modals/configure-update-strategy-modal';\nimport { NodeAffinity, PodAffinity } from '@console/operator-lifecycle-manager/src/components/descriptors/spec/affinity';\nimport { getSchemaErrors, useSchemaDescription, useSchemaLabel } from './utils';\n// import { useTranslation } from 'react-i18next';\nconst Description = ({ id, description }) => description ? (React.createElement(\"span\", { id: id, className: \"help-block\" },\n    React.createElement(LinkifyExternal, null,\n        React.createElement(\"div\", { className: \"co-pre-line\" }, description)))) : null;\nexport const DescriptionField = ({ id, description }) => {\n    // const { t } = useTranslation();\n    // return <Description id={id} description={t(`COMMON:${description}`)} />;\n    return React.createElement(Description, { id: id, description: description });\n};\nexport const FormField = ({ children, id, defaultLabel, required, schema, uiSchema }) => {\n    const [showLabel, label] = useSchemaLabel(schema, uiSchema, defaultLabel || 'Value');\n    return (React.createElement(\"div\", { id: `${id}_field`, className: \"form-group\" },\n        showLabel && label && (React.createElement(\"label\", { className: classnames('form-label', { 'co-required': required }), htmlFor: id }, label)),\n        children));\n};\nexport const FieldSet = ({ children, defaultLabel, idSchema, required = false, schema, uiSchema }) => {\n    const [expanded, setExpanded] = React.useState(false);\n    const [showLabel, label] = useSchemaLabel(schema, uiSchema, defaultLabel);\n    const description = useSchemaDescription(schema, uiSchema);\n    const onToggle = e => {\n        e.preventDefault();\n        setExpanded(current => !current);\n    };\n    return showLabel && label ? (React.createElement(\"div\", { id: `${idSchema.$id}_field-group`, className: \"form-group co-dynamic-form__field-group\" },\n        React.createElement(AccordionItem, null,\n            React.createElement(AccordionToggle, { id: `${idSchema.$id}_accordion-toggle`, onClick: onToggle, isExpanded: expanded },\n                React.createElement(\"label\", { className: classnames({ 'co-required': required }), htmlFor: `${idSchema.$id}_accordion-content` }, _.startCase(label))),\n            description && React.createElement(Description, { id: `${idSchema.$id}_description`, description: description }),\n            React.createElement(AccordionContent, { id: `${idSchema.$id}_accordion-content`, isHidden: !expanded }, children)))) : (React.createElement(React.Fragment, null, children));\n};\nexport const UpdateStrategyField = ({ formData, idSchema, name, onChange, required, schema, uiSchema }) => {\n    var _a, _b;\n    const description = useSchemaDescription(schema, uiSchema, UPDATE_STRATEGY_DESCRIPTION);\n    return (React.createElement(FormField, { defaultLabel: name || 'Update Strategy', id: idSchema.$id, required: required, schema: schema, uiSchema: uiSchema },\n        React.createElement(Description, { description: description, id: idSchema.$id }),\n        React.createElement(ConfigureUpdateStrategy, { showDescription: false, strategyType: (formData === null || formData === void 0 ? void 0 : formData.type) || 'RollingUpdate', maxUnavailable: ((_a = formData === null || formData === void 0 ? void 0 : formData.rollingUpdate) === null || _a === void 0 ? void 0 : _a.maxUnavailable) || '', maxSurge: ((_b = formData === null || formData === void 0 ? void 0 : formData.rollingUpdate) === null || _b === void 0 ? void 0 : _b.maxSurge) || '', onChangeStrategyType: type => onChange(_.set(_.cloneDeep(formData), 'type', type)), onChangeMaxUnavailable: maxUnavailable => onChange(_.set(_.cloneDeep(formData), 'rollingUpdate.maxUnavailable', maxUnavailable)), onChangeMaxSurge: maxSurge => onChange(_.set(_.cloneDeep(formData), 'rollingUpdate.maxSurge', maxSurge)), replicas: 1, uid: idSchema.$id })));\n};\nexport const NodeAffinityField = ({ formData, idSchema, name, onChange, required, schema, uiSchema }) => (React.createElement(FieldSet, { defaultLabel: name || 'Node Affinity', idSchema: idSchema, required: required, schema: schema, uiSchema: uiSchema },\n    React.createElement(NodeAffinity, { affinity: formData, onChange: affinity => onChange(affinity), uid: idSchema.$id })));\nexport const PodAffinityField = ({ formData, idSchema, name, onChange, required, schema, uiSchema }) => (React.createElement(FieldSet, { defaultLabel: name || 'Pod Affinity', idSchema: idSchema, required: required, schema: schema, uiSchema: uiSchema },\n    React.createElement(PodAffinity, { affinity: formData, onChange: affinity => onChange(affinity), uid: idSchema.$id })));\nexport const MatchExpressionsField = ({ formData, idSchema, name, onChange, required, schema, uiSchema }) => (React.createElement(FieldSet, { defaultLabel: name || 'Match Expressions', idSchema: idSchema, required: required, schema: schema, uiSchema: uiSchema },\n    React.createElement(MatchExpressions, { matchExpressions: formData, onChange: v => onChange(v), uid: idSchema.$id })));\nexport const BooleanField = ({ formData, idSchema, name, onChange, uiSchema }) => {\n    const { labelOn = 'true', labelOff = 'false' } = getUiOptions(uiSchema);\n    return (React.createElement(\"div\", null,\n        React.createElement(Switch, { id: (idSchema === null || idSchema === void 0 ? void 0 : idSchema.$id) || name, key: (idSchema === null || idSchema === void 0 ? void 0 : idSchema.$id) || name, isChecked: _.isNil(formData) ? false : formData, onChange: v => onChange(v), label: labelOn, labelOff: labelOff })));\n};\nexport const LabelsField = ({ formData, idSchema, name, onChange, required, schema, uiSchema }) => (React.createElement(FormField, { defaultLabel: name, id: idSchema.$id, required: required, schema: schema, uiSchema: uiSchema },\n    React.createElement(SelectorInput, { inputProps: { id: idSchema.$id }, onChange: newValue => onChange(SelectorInput.objectify(newValue)), tags: SelectorInput.arrayify(formData) })));\nexport const ResourceRequirementsField = ({ formData, idSchema, name, onChange, required, schema, uiSchema }) => {\n    var _a, _b, _c, _d, _e, _f;\n    return (React.createElement(FieldSet, { defaultLabel: name || 'Resource Requirements', idSchema: idSchema, required: required, schema: schema, uiSchema: uiSchema },\n        React.createElement(\"dl\", { id: idSchema.$id },\n            React.createElement(\"dt\", null, \"Limits\"),\n            React.createElement(\"dd\", null,\n                React.createElement(ResourceRequirements, { cpu: ((_a = formData === null || formData === void 0 ? void 0 : formData.limits) === null || _a === void 0 ? void 0 : _a.cpu) || '', memory: ((_b = formData === null || formData === void 0 ? void 0 : formData.limits) === null || _b === void 0 ? void 0 : _b.memory) || '', storage: ((_c = formData === null || formData === void 0 ? void 0 : formData.limits) === null || _c === void 0 ? void 0 : _c['ephemeral-storage']) || '', onChangeCPU: cpu => onChange(_.set(_.cloneDeep(formData), 'limits.cpu', cpu)), onChangeMemory: mem => onChange(_.set(_.cloneDeep(formData), 'limits.memory', mem)), onChangeStorage: sto => onChange(_.set(_.cloneDeep(formData), 'limits.ephemeral-storage', sto)), path: `${idSchema.$id}.limits` })),\n            React.createElement(\"dt\", null, \"Requests\"),\n            React.createElement(\"dd\", null,\n                React.createElement(ResourceRequirements, { cpu: ((_d = formData === null || formData === void 0 ? void 0 : formData.requests) === null || _d === void 0 ? void 0 : _d.cpu) || '', memory: ((_e = formData === null || formData === void 0 ? void 0 : formData.requests) === null || _e === void 0 ? void 0 : _e.memory) || '', storage: ((_f = formData === null || formData === void 0 ? void 0 : formData.requests) === null || _f === void 0 ? void 0 : _f['ephemeral-storage']) || '', onChangeCPU: cpu => onChange(_.set(_.cloneDeep(formData), 'requests.cpu', cpu)), onChangeMemory: mem => onChange(_.set(_.cloneDeep(formData), 'requests.memory', mem)), onChangeStorage: sto => onChange(_.set(_.cloneDeep(formData), 'requests.ephemeral-storage', sto)), path: `${idSchema.$id}.requests` })))));\n};\nexport const AdditionalPropertyField = ({ formData, idSchema, name, onChange, required, schema, uiSchema }) => (React.createElement(FieldSet, { defaultLabel: name || 'Resource Requirements', idSchema: idSchema, required: required, schema: schema, uiSchema: uiSchema },\n    React.createElement(AdditionalPropertyFields, { data: formData, onChange: onChange, path: `${idSchema.$id}` })));\nexport const DropdownField = ({ formData, idSchema, name, onChange, schema, uiSchema = {} }) => {\n    const { items, title } = getUiOptions(uiSchema);\n    return React.createElement(Dropdown, { id: idSchema.$id, key: idSchema.$id, title: `Select ${title || (schema === null || schema === void 0 ? void 0 : schema.title) || name}`, selectedKey: formData, items: items !== null && items !== void 0 ? items : {}, onChange: val => onChange(val) });\n};\nexport const TextField = ({ formData, idSchema, name, onChange, onBlur, schema, uiSchema = {}, disabled = false, required = false, readonly = false }) => {\n    return React.createElement(\"input\", { className: \"pf-c-form-control\", disabled: disabled, id: idSchema.$id, key: idSchema.$id, onBlur: onBlur && (event => onBlur(idSchema.$id, event.target.value)), onChange: ({ currentTarget }) => onChange(currentTarget.value), readOnly: readonly, required: required, type: \"text\", value: formData });\n};\nexport const CustomSchemaField = props => {\n    var _a;\n    const errors = getSchemaErrors((_a = props.schema) !== null && _a !== void 0 ? _a : {});\n    if (errors.length) {\n        // eslint-disable-next-line no-console\n        console.warn('DynamicForm component does not support the provided JSON schema: ', errors);\n        return null;\n    }\n    return React.createElement(SchemaField, Object.assign({}, props));\n};\nexport const NullField = () => null;\nexport default {\n    TextField,\n    AdditionalPropertyField,\n    BooleanField,\n    DescriptionField,\n    DropdownField,\n    LabelsField,\n    MatchExpressionsField,\n    NodeAffinityField,\n    NullField,\n    PodAffinityField,\n    ResourceRequirementsField,\n    SchemaField: CustomSchemaField,\n    UpdateStrategyField,\n};\n",{"version":3,"file":"/home/jinsoo/hypercloud-console5.0/frontend/packages/console-shared/src/components/dynamic-form/fields.tsx","sourceRoot":"","sources":["/home/jinsoo/hypercloud-console5.0/frontend/packages/console-shared/src/components/dynamic-form/fields.tsx"],"names":[],"mappings":"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","sourcesContent":["import * as _ from 'lodash';\nimport * as classnames from 'classnames';\nimport * as React from 'react';\nimport { JSONSchema6 } from 'json-schema';\nimport { getUiOptions } from 'react-jsonschema-form/lib/utils';\nimport { FieldProps, UiSchema } from 'react-jsonschema-form';\nimport SchemaField, { SchemaFieldProps } from 'react-jsonschema-form/lib/components/fields/SchemaField';\nimport { LinkifyExternal, SelectorInput, Dropdown } from '@console/internal/components/utils';\nimport { AccordionContent, AccordionItem, AccordionToggle, Switch } from '@patternfly/react-core';\nimport { MatchExpressions } from '@console/operator-lifecycle-manager/src/components/descriptors/spec/match-expressions';\nimport { ResourceRequirements } from '@console/operator-lifecycle-manager/src/components/descriptors/spec/resource-requirements';\nimport { AdditionalPropertyFields } from '@console/operator-lifecycle-manager/src/components/descriptors/spec/additional-properties';\nimport { ConfigureUpdateStrategy, UPDATE_STRATEGY_DESCRIPTION } from '@console/internal/components/modals/configure-update-strategy-modal';\nimport { NodeAffinity, PodAffinity } from '@console/operator-lifecycle-manager/src/components/descriptors/spec/affinity';\nimport { getSchemaErrors, useSchemaDescription, useSchemaLabel } from './utils';\n// import { useTranslation } from 'react-i18next';\nconst Description = ({ id, description }) =>\n  description ? (\n    <span id={id} className=\"help-block\">\n      <LinkifyExternal>\n        <div className=\"co-pre-line\">{description}</div>\n      </LinkifyExternal>\n    </span>\n  ) : null;\n\nexport const DescriptionField: React.FC<FieldProps> = ({ id, description }) => {\n  // const { t } = useTranslation();\n  // return <Description id={id} description={t(`COMMON:${description}`)} />;\n  return <Description id={id} description={description} />;\n};\n\nexport const FormField: React.FC<FormFieldProps> = ({ children, id, defaultLabel, required, schema, uiSchema }) => {\n  const [showLabel, label] = useSchemaLabel(schema, uiSchema, defaultLabel || 'Value');\n  return (\n    <div id={`${id}_field`} className=\"form-group\">\n      {showLabel && label && (\n        <label className={classnames('form-label', { 'co-required': required })} htmlFor={id}>\n          {label}\n        </label>\n      )}\n      {children}\n    </div>\n  );\n};\n\nexport const FieldSet: React.FC<FieldSetProps> = ({ children, defaultLabel, idSchema, required = false, schema, uiSchema }) => {\n  const [expanded, setExpanded] = React.useState(false);\n  const [showLabel, label] = useSchemaLabel(schema, uiSchema, defaultLabel);\n  const description = useSchemaDescription(schema, uiSchema);\n  const onToggle = e => {\n    e.preventDefault();\n    setExpanded(current => !current);\n  };\n  return showLabel && label ? (\n    <div id={`${idSchema.$id}_field-group`} className=\"form-group co-dynamic-form__field-group\">\n      <AccordionItem>\n        <AccordionToggle id={`${idSchema.$id}_accordion-toggle`} onClick={onToggle} isExpanded={expanded}>\n          <label className={classnames({ 'co-required': required })} htmlFor={`${idSchema.$id}_accordion-content`}>\n            {_.startCase(label)}\n          </label>\n        </AccordionToggle>\n        {description && <Description id={`${idSchema.$id}_description`} description={description} />}\n        <AccordionContent id={`${idSchema.$id}_accordion-content`} isHidden={!expanded}>\n          {children}\n        </AccordionContent>\n      </AccordionItem>\n    </div>\n  ) : (\n    <>{children}</>\n  );\n};\n\nexport const UpdateStrategyField: React.FC<FieldProps> = ({ formData, idSchema, name, onChange, required, schema, uiSchema }) => {\n  const description = useSchemaDescription(schema, uiSchema, UPDATE_STRATEGY_DESCRIPTION);\n  return (\n    <FormField defaultLabel={name || 'Update Strategy'} id={idSchema.$id} required={required} schema={schema} uiSchema={uiSchema}>\n      <Description description={description} id={idSchema.$id} />\n      <ConfigureUpdateStrategy\n        showDescription={false}\n        strategyType={formData?.type || 'RollingUpdate'}\n        maxUnavailable={formData?.rollingUpdate?.maxUnavailable || ''}\n        maxSurge={formData?.rollingUpdate?.maxSurge || ''}\n        onChangeStrategyType={type => onChange(_.set(_.cloneDeep(formData), 'type', type))}\n        onChangeMaxUnavailable={maxUnavailable => onChange(_.set(_.cloneDeep(formData), 'rollingUpdate.maxUnavailable', maxUnavailable))}\n        onChangeMaxSurge={maxSurge => onChange(_.set(_.cloneDeep(formData), 'rollingUpdate.maxSurge', maxSurge))}\n        replicas={1}\n        uid={idSchema.$id}\n      />\n    </FormField>\n  );\n};\n\nexport const NodeAffinityField: React.FC<FieldProps> = ({ formData, idSchema, name, onChange, required, schema, uiSchema }) => (\n  <FieldSet defaultLabel={name || 'Node Affinity'} idSchema={idSchema} required={required} schema={schema} uiSchema={uiSchema}>\n    <NodeAffinity affinity={formData} onChange={affinity => onChange(affinity)} uid={idSchema.$id} />\n  </FieldSet>\n);\n\nexport const PodAffinityField: React.FC<FieldProps> = ({ formData, idSchema, name, onChange, required, schema, uiSchema }) => (\n  <FieldSet defaultLabel={name || 'Pod Affinity'} idSchema={idSchema} required={required} schema={schema} uiSchema={uiSchema}>\n    <PodAffinity affinity={formData} onChange={affinity => onChange(affinity)} uid={idSchema.$id} />\n  </FieldSet>\n);\n\nexport const MatchExpressionsField: React.FC<FieldProps> = ({ formData, idSchema, name, onChange, required, schema, uiSchema }) => (\n  <FieldSet defaultLabel={name || 'Match Expressions'} idSchema={idSchema} required={required} schema={schema} uiSchema={uiSchema}>\n    <MatchExpressions matchExpressions={formData} onChange={v => onChange(v)} uid={idSchema.$id} />\n  </FieldSet>\n);\n\nexport const BooleanField: React.FC<FieldProps> = ({ formData, idSchema, name, onChange, uiSchema }) => {\n  const { labelOn = 'true', labelOff = 'false' } = getUiOptions(uiSchema);\n  return (\n    <div>\n      <Switch id={idSchema?.$id || name} key={idSchema?.$id || name} isChecked={_.isNil(formData) ? false : formData} onChange={v => onChange(v)} label={labelOn as string} labelOff={labelOff as string} />\n    </div>\n  );\n};\n\nexport const LabelsField: React.FC<FieldProps> = ({ formData, idSchema, name, onChange, required, schema, uiSchema }) => (\n  <FormField defaultLabel={name} id={idSchema.$id} required={required} schema={schema} uiSchema={uiSchema}>\n    <SelectorInput inputProps={{ id: idSchema.$id }} onChange={newValue => onChange(SelectorInput.objectify(newValue))} tags={SelectorInput.arrayify(formData)} />\n  </FormField>\n);\n\nexport const ResourceRequirementsField: React.FC<FieldProps> = ({ formData, idSchema, name, onChange, required, schema, uiSchema }) => (\n  <FieldSet defaultLabel={name || 'Resource Requirements'} idSchema={idSchema} required={required} schema={schema} uiSchema={uiSchema}>\n    <dl id={idSchema.$id}>\n      <dt>Limits</dt>\n      <dd>\n        <ResourceRequirements cpu={formData?.limits?.cpu || ''} memory={formData?.limits?.memory || ''} storage={formData?.limits?.['ephemeral-storage'] || ''} onChangeCPU={cpu => onChange(_.set(_.cloneDeep(formData), 'limits.cpu', cpu))} onChangeMemory={mem => onChange(_.set(_.cloneDeep(formData), 'limits.memory', mem))} onChangeStorage={sto => onChange(_.set(_.cloneDeep(formData), 'limits.ephemeral-storage', sto))} path={`${idSchema.$id}.limits`} />\n      </dd>\n      <dt>Requests</dt>\n      <dd>\n        <ResourceRequirements cpu={formData?.requests?.cpu || ''} memory={formData?.requests?.memory || ''} storage={formData?.requests?.['ephemeral-storage'] || ''} onChangeCPU={cpu => onChange(_.set(_.cloneDeep(formData), 'requests.cpu', cpu))} onChangeMemory={mem => onChange(_.set(_.cloneDeep(formData), 'requests.memory', mem))} onChangeStorage={sto => onChange(_.set(_.cloneDeep(formData), 'requests.ephemeral-storage', sto))} path={`${idSchema.$id}.requests`} />\n      </dd>\n    </dl>\n  </FieldSet>\n);\nexport const AdditionalPropertyField: React.FC<FieldProps> = ({ formData, idSchema, name, onChange, required, schema, uiSchema }) => (\n  <FieldSet defaultLabel={name || 'Resource Requirements'} idSchema={idSchema} required={required} schema={schema} uiSchema={uiSchema}>\n    <AdditionalPropertyFields data={formData} onChange={onChange} path={`${idSchema.$id}`}></AdditionalPropertyFields>\n  </FieldSet>\n);\n\nexport const DropdownField: React.FC<FieldProps> = ({ formData, idSchema, name, onChange, schema, uiSchema = {} }) => {\n  const { items, title } = getUiOptions(uiSchema);\n  return <Dropdown id={idSchema.$id} key={idSchema.$id} title={`Select ${title || schema?.title || name}`} selectedKey={formData} items={items ?? {}} onChange={val => onChange(val)} />;\n};\n\nexport const TextField: React.FC<FieldProps> = ({ formData, idSchema, name, onChange, onBlur, schema, uiSchema = {}, disabled = false, required = false, readonly = false }) => {\n  return <input className=\"pf-c-form-control\" disabled={disabled} id={idSchema.$id} key={idSchema.$id} onBlur={onBlur && (event => onBlur(idSchema.$id, event.target.value))} onChange={({ currentTarget }) => onChange(currentTarget.value)} readOnly={readonly} required={required} type=\"text\" value={formData} />;\n};\n\nexport const CustomSchemaField: React.FC<SchemaFieldProps> = props => {\n  const errors = getSchemaErrors(props.schema ?? {});\n  if (errors.length) {\n    // eslint-disable-next-line no-console\n    console.warn('DynamicForm component does not support the provided JSON schema: ', errors);\n    return null;\n  }\n\n  return <SchemaField {...props} />;\n};\n\nexport const NullField = () => null;\n\nexport default {\n  TextField,\n  AdditionalPropertyField,\n  BooleanField,\n  DescriptionField,\n  DropdownField,\n  LabelsField,\n  MatchExpressionsField,\n  NodeAffinityField,\n  NullField,\n  PodAffinityField,\n  ResourceRequirementsField,\n  SchemaField: CustomSchemaField,\n  UpdateStrategyField,\n};\n\ntype FormFieldProps = {\n  id: string;\n  defaultLabel?: string;\n  required: boolean;\n  schema: JSONSchema6;\n  uiSchema: UiSchema;\n};\n\ntype FieldSetProps = Pick<FieldProps, 'idSchema' | 'required' | 'schema' | 'uiSchema'> & {\n  defaultLabel?: string;\n};\n"]}]}