{"remainingRequest":"/home/jinsoo/hypercloud-console5.0/frontend/node_modules/thread-loader/dist/cjs.js??ref--5-1!/home/jinsoo/hypercloud-console5.0/frontend/node_modules/ts-loader/index.js??ref--5-2!/home/jinsoo/hypercloud-console5.0/frontend/packages/operator-lifecycle-manager/src/components/descriptors/spec/resource-requirements.tsx","dependencies":[{"path":"/home/jinsoo/hypercloud-console5.0/frontend/packages/operator-lifecycle-manager/src/components/descriptors/spec/resource-requirements.tsx","mtime":1616735742450},{"path":"/home/jinsoo/hypercloud-console5.0/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1607306270906},{"path":"/home/jinsoo/hypercloud-console5.0/frontend/node_modules/thread-loader/dist/cjs.js","mtime":1607306283100},{"path":"/home/jinsoo/hypercloud-console5.0/frontend/node_modules/ts-loader/index.js","mtime":1607306283339}],"contextDependencies":[],"result":["import * as React from 'react';\nimport * as _ from 'lodash';\nimport { connect } from 'react-redux';\nimport { Button } from '@patternfly/react-core';\nimport { PencilAltIcon } from '@patternfly/react-icons';\nimport { withHandlePromise } from '@console/internal/components/utils';\nimport { k8sUpdate, referenceFor } from '@console/internal/module/k8s';\nimport { createModalLauncher, ModalTitle, ModalBody, ModalSubmitFooter, } from '@console/internal/components/factory/modal';\nexport const ResourceRequirements = (props) => {\n    const { cpu, memory, storage, onChangeCPU, onChangeMemory, onChangeStorage, path = '' } = props;\n    return (React.createElement(\"div\", { className: \"row co-m-form-row\" },\n        React.createElement(\"div\", { className: \"col-xs-4\" },\n            React.createElement(\"label\", { style: { fontWeight: 300 }, className: \"text-muted text-uppercase\", htmlFor: `${path}.cpu` }, \"CPU cores\"),\n            React.createElement(\"input\", { value: cpu, onChange: (e) => onChangeCPU(e.target.value), id: `${path}.cpu`, name: \"cpu\", type: \"text\", className: \"pf-c-form-control\", placeholder: \"500m\" })),\n        React.createElement(\"div\", { className: \"col-xs-4\" },\n            React.createElement(\"label\", { style: { fontWeight: 300 }, className: \"text-muted text-uppercase\", htmlFor: `${path}.memory` }, \"Memory\"),\n            React.createElement(\"input\", { value: memory, onChange: (e) => onChangeMemory(e.target.value), id: `${path}.memory`, name: \"memory\", type: \"text\", className: \"pf-c-form-control\", placeholder: \"50Mi\" })),\n        React.createElement(\"div\", { className: \"col-xs-4\" },\n            React.createElement(\"label\", { style: { fontWeight: 300 }, className: \"text-muted text-uppercase\", htmlFor: `${path}.ephemeral-storage` }, \"Storage\"),\n            React.createElement(\"input\", { value: storage, onChange: (e) => onChangeStorage(e.target.value), id: `${path}.ephemeral-storage`, name: \"ephemeral-storage\", type: \"text\", className: \"pf-c-form-control\", placeholder: \"50Mi\" }))));\n};\nexport const ResourceRequirementsModal = withHandlePromise((props) => {\n    const { obj, path, type, model } = props;\n    const [cpu, setCPU] = React.useState(_.get(obj.spec, `${path}.${type}.cpu`, ''));\n    const [memory, setMemory] = React.useState(_.get(obj.spec, `${path}.${type}.memory`, ''));\n    const [storage, setStorage] = React.useState(_.get(obj.spec, `${path}.${type}.ephemeral-storage`));\n    const submit = (e) => {\n        e.preventDefault();\n        let newObj = _.cloneDeep(obj);\n        if (cpu !== '' || memory !== '' || storage !== '') {\n            newObj = _.set(newObj, `spec.${path}.${type}`, {\n                cpu,\n                memory,\n                'ephemeral-storage': storage,\n            });\n        }\n        return props.handlePromise(k8sUpdate(model, newObj)).then(props.close);\n    };\n    return (React.createElement(\"form\", { onSubmit: (e) => submit(e), className: \"modal-content\" },\n        React.createElement(ModalTitle, null, props.title),\n        React.createElement(ModalBody, null,\n            React.createElement(\"div\", { className: \"row co-m-form-row\" },\n                React.createElement(\"div\", { className: \"col-sm-12\" }, props.description)),\n            React.createElement(ResourceRequirements, { cpu: cpu, memory: memory, storage: storage, onChangeCPU: setCPU, onChangeMemory: setMemory, onChangeStorage: setStorage, path: path })),\n        React.createElement(ModalSubmitFooter, { errorMessage: props.errorMessage, inProgress: props.inProgress, submitText: \"Save\", cancel: props.cancel })));\n});\nconst stateToProps = ({ k8s }, { obj }) => ({\n    model: k8s.getIn(['RESOURCES', 'models', referenceFor(obj)]),\n});\nexport const ResourceRequirementsModalLink = connect(stateToProps)((props) => {\n    const { obj, type, path, model } = props;\n    const { cpu, memory, 'ephemeral-storage': storage } = _.get(obj.spec, `${path}.${type}`, 'none');\n    const onClick = () => {\n        const modal = createModalLauncher(ResourceRequirementsModal);\n        const description = `Define the resource ${type} for this ${obj.kind} instance.`;\n        const title = `${obj.kind} Resource ${_.capitalize(type)}`;\n        return modal({ title, description, obj, model, type, path });\n    };\n    return (React.createElement(Button, { type: \"button\", isInline: true, \"data-test-id\": \"configure-modal-btn\", onClick: onClick, variant: \"link\" },\n        `CPU: ${cpu || 'none'}, Memory: ${memory || 'none'}, Storage: ${storage || 'none'}`,\n        React.createElement(PencilAltIcon, { className: \"co-icon-space-l pf-c-button-icon--plain\" })));\n});\nResourceRequirements.displayName = 'ResourceRequirements';\nResourceRequirementsModalLink.displayName = 'ResourceRequirementsModalLink';\nResourceRequirementsModal.displayName = 'ResourceRequirementsModal';\n",{"version":3,"file":"/home/jinsoo/hypercloud-console5.0/frontend/packages/operator-lifecycle-manager/src/components/descriptors/spec/resource-requirements.tsx","sourceRoot":"","sources":["/home/jinsoo/hypercloud-console5.0/frontend/packages/operator-lifecycle-manager/src/components/descriptors/spec/resource-requirements.tsx"],"names":[],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport * as _ from 'lodash';\nimport { connect } from 'react-redux';\nimport { Button } from '@patternfly/react-core';\nimport { PencilAltIcon } from '@patternfly/react-icons';\nimport { withHandlePromise } from '@console/internal/components/utils';\nimport { k8sUpdate, referenceFor, K8sKind, K8sResourceKind } from '@console/internal/module/k8s';\nimport {\n  createModalLauncher,\n  ModalTitle,\n  ModalBody,\n  ModalSubmitFooter,\n} from '@console/internal/components/factory/modal';\nimport { RootState } from '@console/internal/redux';\n\nexport const ResourceRequirements: React.FC<ResourceRequirementsProps> = (props) => {\n  const { cpu, memory, storage, onChangeCPU, onChangeMemory, onChangeStorage, path = '' } = props;\n\n  return (\n    <div className=\"row co-m-form-row\">\n      <div className=\"col-xs-4\">\n        <label\n          style={{ fontWeight: 300 }}\n          className=\"text-muted text-uppercase\"\n          htmlFor={`${path}.cpu`}\n        >\n          CPU cores\n        </label>\n        <input\n          value={cpu}\n          onChange={(e) => onChangeCPU(e.target.value)}\n          id={`${path}.cpu`}\n          name=\"cpu\"\n          type=\"text\"\n          className=\"pf-c-form-control\"\n          placeholder=\"500m\"\n        />\n      </div>\n      <div className=\"col-xs-4\">\n        <label\n          style={{ fontWeight: 300 }}\n          className=\"text-muted text-uppercase\"\n          htmlFor={`${path}.memory`}\n        >\n          Memory\n        </label>\n        <input\n          value={memory}\n          onChange={(e) => onChangeMemory(e.target.value)}\n          id={`${path}.memory`}\n          name=\"memory\"\n          type=\"text\"\n          className=\"pf-c-form-control\"\n          placeholder=\"50Mi\"\n        />\n      </div>\n      <div className=\"col-xs-4\">\n        <label\n          style={{ fontWeight: 300 }}\n          className=\"text-muted text-uppercase\"\n          htmlFor={`${path}.ephemeral-storage`}\n        >\n          Storage\n        </label>\n        <input\n          value={storage}\n          onChange={(e) => onChangeStorage(e.target.value)}\n          id={`${path}.ephemeral-storage`}\n          name=\"ephemeral-storage\"\n          type=\"text\"\n          className=\"pf-c-form-control\"\n          placeholder=\"50Mi\"\n        />\n      </div>\n    </div>\n  );\n};\n\nexport const ResourceRequirementsModal = withHandlePromise(\n  (props: ResourceRequirementsModalProps) => {\n    const { obj, path, type, model } = props;\n    const [cpu, setCPU] = React.useState<string>(_.get(obj.spec, `${path}.${type}.cpu`, ''));\n    const [memory, setMemory] = React.useState<string>(\n      _.get(obj.spec, `${path}.${type}.memory`, ''),\n    );\n    const [storage, setStorage] = React.useState<string>(\n      _.get(obj.spec, `${path}.${type}.ephemeral-storage`),\n    );\n\n    const submit = (e) => {\n      e.preventDefault();\n\n      let newObj = _.cloneDeep(obj);\n      if (cpu !== '' || memory !== '' || storage !== '') {\n        newObj = _.set(newObj, `spec.${path}.${type}`, {\n          cpu,\n          memory,\n          'ephemeral-storage': storage,\n        });\n      }\n\n      return props.handlePromise(k8sUpdate(model, newObj)).then(props.close);\n    };\n\n    return (\n      <form onSubmit={(e) => submit(e)} className=\"modal-content\">\n        <ModalTitle>{props.title}</ModalTitle>\n        <ModalBody>\n          <div className=\"row co-m-form-row\">\n            <div className=\"col-sm-12\">{props.description}</div>\n          </div>\n          <ResourceRequirements\n            cpu={cpu}\n            memory={memory}\n            storage={storage}\n            onChangeCPU={setCPU}\n            onChangeMemory={setMemory}\n            onChangeStorage={setStorage}\n            path={path}\n          />\n        </ModalBody>\n        <ModalSubmitFooter\n          errorMessage={props.errorMessage}\n          inProgress={props.inProgress}\n          submitText=\"Save\"\n          cancel={props.cancel}\n        />\n      </form>\n    );\n  },\n);\n\nconst stateToProps = ({ k8s }: RootState, { obj }) => ({\n  model: k8s.getIn(['RESOURCES', 'models', referenceFor(obj)]) as K8sKind,\n});\n\nexport const ResourceRequirementsModalLink = connect(stateToProps)(\n  (props: ResourceRequirementsModalLinkProps) => {\n    const { obj, type, path, model } = props;\n    const { cpu, memory, 'ephemeral-storage': storage } = _.get(\n      obj.spec,\n      `${path}.${type}`,\n      'none',\n    );\n\n    const onClick = () => {\n      const modal = createModalLauncher(ResourceRequirementsModal);\n      const description = `Define the resource ${type} for this ${obj.kind} instance.`;\n      const title = `${obj.kind} Resource ${_.capitalize(type)}`;\n\n      return modal({ title, description, obj, model, type, path });\n    };\n\n    return (\n      <Button\n        type=\"button\"\n        isInline\n        data-test-id=\"configure-modal-btn\"\n        onClick={onClick}\n        variant=\"link\"\n      >\n        {`CPU: ${cpu || 'none'}, Memory: ${memory || 'none'}, Storage: ${storage || 'none'}`}\n        <PencilAltIcon className=\"co-icon-space-l pf-c-button-icon--plain\" />\n      </Button>\n    );\n  },\n);\n\nexport type ResourceRequirementsModalProps = {\n  title: string;\n  description: string;\n  obj: K8sResourceKind;\n  model: K8sKind;\n  type: 'requests' | 'limits';\n  path: string;\n  handlePromise: <T>(promise: Promise<T>) => Promise<T>;\n  inProgress: boolean;\n  errorMessage: string;\n  cancel?: () => void;\n  close?: () => void;\n};\n\nexport type ResourceRequirementsProps = {\n  cpu: string;\n  memory: string;\n  storage: string;\n  onChangeCPU: (value: string) => void;\n  onChangeMemory: (value: string) => void;\n  onChangeStorage: (value: string) => void;\n  path?: string;\n};\n\nexport type ResourceRequirementsModalLinkProps = {\n  obj: K8sResourceKind;\n  model: K8sKind;\n  type: 'requests' | 'limits';\n  path: string;\n};\n\nResourceRequirements.displayName = 'ResourceRequirements';\nResourceRequirementsModalLink.displayName = 'ResourceRequirementsModalLink';\nResourceRequirementsModal.displayName = 'ResourceRequirementsModal';\n"]}]}