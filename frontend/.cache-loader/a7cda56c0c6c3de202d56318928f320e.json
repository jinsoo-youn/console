{"remainingRequest":"/home/jinsoo/hypercloud-console5.0/frontend/node_modules/thread-loader/dist/cjs.js??ref--5-1!/home/jinsoo/hypercloud-console5.0/frontend/node_modules/ts-loader/index.js??ref--5-2!/home/jinsoo/hypercloud-console5.0/frontend/packages/metal3-plugin/src/components/baremetal-nodes/menu-actions.ts","dependencies":[{"path":"/home/jinsoo/hypercloud-console5.0/frontend/packages/metal3-plugin/src/components/baremetal-nodes/menu-actions.ts","mtime":1615298458670},{"path":"/home/jinsoo/hypercloud-console5.0/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1607306270906},{"path":"/home/jinsoo/hypercloud-console5.0/frontend/node_modules/thread-loader/dist/cjs.js","mtime":1607306283100},{"path":"/home/jinsoo/hypercloud-console5.0/frontend/node_modules/ts-loader/index.js","mtime":1607306283339}],"contextDependencies":[],"result":["import { Kebab, asAccessReview } from '@console/internal/components/utils';\nimport { MarkAsSchedulable, MarkAsUnschedulable, Delete, } from '@console/app/src/components/nodes/menu-actions';\nimport { getName } from '@console/shared';\nimport { startNodeMaintenanceModal } from '../modals/StartNodeMaintenanceModal';\nimport stopNodeMaintenanceModal from '../modals/StopNodeMaintenanceModal';\nimport { NodeMaintenanceModel } from '../../models';\nimport { findNodeMaintenance } from '../../selectors';\nexport const SetNodeMaintenance = (kindObj, node, resources, { hasNodeMaintenanceCapability, nodeMaintenance }) => {\n    const nodeName = getName(node);\n    return {\n        hidden: !nodeName || !hasNodeMaintenanceCapability || !!nodeMaintenance,\n        label: 'Start Maintenance',\n        callback: () => startNodeMaintenanceModal({ nodeName }),\n    };\n};\nexport const RemoveNodeMaintenance = (kindObj, node, resources, { hasNodeMaintenanceCapability, nodeMaintenance }) => {\n    const nodeName = getName(node);\n    return {\n        hidden: !nodeName || !hasNodeMaintenanceCapability || !nodeMaintenance,\n        label: 'Stop Maintenance',\n        callback: () => stopNodeMaintenanceModal(nodeMaintenance),\n        accessReview: nodeMaintenance && asAccessReview(NodeMaintenanceModel, nodeMaintenance, 'delete'),\n    };\n};\nconst { ModifyLabels, ModifyAnnotations, Edit } = Kebab.factory;\nexport const menuActions = [\n    SetNodeMaintenance,\n    RemoveNodeMaintenance,\n    MarkAsSchedulable,\n    MarkAsUnschedulable,\n    ModifyLabels,\n    ModifyAnnotations,\n    Edit,\n    Delete,\n];\nexport const menuActionsCreator = (kindObj, node, { nodeMaintenances }, { hasNodeMaintenanceCapability }) => {\n    const nodeMaintenance = findNodeMaintenance(nodeMaintenances, getName(node));\n    return menuActions.map((action) => {\n        return action(kindObj, node, null, {\n            hasNodeMaintenanceCapability,\n            nodeMaintenance,\n        });\n    });\n};\n",{"version":3,"file":"/home/jinsoo/hypercloud-console5.0/frontend/packages/metal3-plugin/src/components/baremetal-nodes/menu-actions.ts","sourceRoot":"","sources":["/home/jinsoo/hypercloud-console5.0/frontend/packages/metal3-plugin/src/components/baremetal-nodes/menu-actions.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,KAAK,EAAe,cAAc,EAAE,MAAM,oCAAoC,CAAC;AACxF,OAAO,EACL,iBAAiB,EACjB,mBAAmB,EACnB,MAAM,GACP,MAAM,gDAAgD,CAAC;AAExD,OAAO,EAAE,OAAO,EAAE,MAAM,iBAAiB,CAAC;AAC1C,OAAO,EAAE,yBAAyB,EAAE,MAAM,qCAAqC,CAAC;AAChF,OAAO,wBAAwB,MAAM,oCAAoC,CAAC;AAC1E,OAAO,EAAE,oBAAoB,EAAE,MAAM,cAAc,CAAC;AACpD,OAAO,EAAE,mBAAmB,EAAE,MAAM,iBAAiB,CAAC;AAOtD,MAAM,CAAC,MAAM,kBAAkB,GAAG,CAChC,OAAgB,EAChB,IAAc,EACd,SAAa,EACb,EAAE,4BAA4B,EAAE,eAAe,EAAc,EAChD,EAAE;IACf,MAAM,QAAQ,GAAG,OAAO,CAAC,IAAI,CAAC,CAAC;IAC/B,OAAO;QACL,MAAM,EAAE,CAAC,QAAQ,IAAI,CAAC,4BAA4B,IAAI,CAAC,CAAC,eAAe;QACvE,KAAK,EAAE,mBAAmB;QAC1B,QAAQ,EAAE,GAAG,EAAE,CAAC,yBAAyB,CAAC,EAAE,QAAQ,EAAE,CAAC;KACxD,CAAC;AACJ,CAAC,CAAC;AAEF,MAAM,CAAC,MAAM,qBAAqB,GAAG,CACnC,OAAgB,EAChB,IAAc,EACd,SAAa,EACb,EAAE,4BAA4B,EAAE,eAAe,EAAc,EAChD,EAAE;IACf,MAAM,QAAQ,GAAG,OAAO,CAAC,IAAI,CAAC,CAAC;IAC/B,OAAO;QACL,MAAM,EAAE,CAAC,QAAQ,IAAI,CAAC,4BAA4B,IAAI,CAAC,eAAe;QACtE,KAAK,EAAE,kBAAkB;QACzB,QAAQ,EAAE,GAAG,EAAE,CAAC,wBAAwB,CAAC,eAAe,CAAC;QACzD,YAAY,EACV,eAAe,IAAI,cAAc,CAAC,oBAAoB,EAAE,eAAe,EAAE,QAAQ,CAAC;KACrF,CAAC;AACJ,CAAC,CAAC;AAEF,MAAM,EAAE,YAAY,EAAE,iBAAiB,EAAE,IAAI,EAAE,GAAG,KAAK,CAAC,OAAO,CAAC;AAChE,MAAM,CAAC,MAAM,WAAW,GAAG;IACzB,kBAAkB;IAClB,qBAAqB;IACrB,iBAAiB;IACjB,mBAAmB;IACnB,YAAY;IACZ,iBAAiB;IACjB,IAAI;IACJ,MAAM;CACP,CAAC;AAQF,MAAM,CAAC,MAAM,kBAAkB,GAAG,CAChC,OAAgB,EAChB,IAAc,EACd,EAAE,gBAAgB,EAAkB,EACpC,EAAE,4BAA4B,EAAE,EAChC,EAAE;IACF,MAAM,eAAe,GAAG,mBAAmB,CAAC,gBAAgB,EAAE,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC;IAC7E,OAAO,WAAW,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,EAAE;QAChC,OAAO,MAAM,CAAC,OAAO,EAAE,IAAI,EAAE,IAAI,EAAE;YACjC,4BAA4B;YAC5B,eAAe;SAChB,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;AACL,CAAC,CAAC","sourcesContent":["import { Kebab, KebabOption, asAccessReview } from '@console/internal/components/utils';\nimport {\n  MarkAsSchedulable,\n  MarkAsUnschedulable,\n  Delete,\n} from '@console/app/src/components/nodes/menu-actions';\nimport { K8sKind, NodeKind, K8sResourceKind, MachineKind } from '@console/internal/module/k8s';\nimport { getName } from '@console/shared';\nimport { startNodeMaintenanceModal } from '../modals/StartNodeMaintenanceModal';\nimport stopNodeMaintenanceModal from '../modals/StopNodeMaintenanceModal';\nimport { NodeMaintenanceModel } from '../../models';\nimport { findNodeMaintenance } from '../../selectors';\n\ntype ActionArgs = {\n  nodeMaintenance?: K8sResourceKind;\n  hasNodeMaintenanceCapability?: boolean;\n};\n\nexport const SetNodeMaintenance = (\n  kindObj: K8sKind,\n  node: NodeKind,\n  resources: {},\n  { hasNodeMaintenanceCapability, nodeMaintenance }: ActionArgs,\n): KebabOption => {\n  const nodeName = getName(node);\n  return {\n    hidden: !nodeName || !hasNodeMaintenanceCapability || !!nodeMaintenance,\n    label: 'Start Maintenance',\n    callback: () => startNodeMaintenanceModal({ nodeName }),\n  };\n};\n\nexport const RemoveNodeMaintenance = (\n  kindObj: K8sKind,\n  node: NodeKind,\n  resources: {},\n  { hasNodeMaintenanceCapability, nodeMaintenance }: ActionArgs,\n): KebabOption => {\n  const nodeName = getName(node);\n  return {\n    hidden: !nodeName || !hasNodeMaintenanceCapability || !nodeMaintenance,\n    label: 'Stop Maintenance',\n    callback: () => stopNodeMaintenanceModal(nodeMaintenance),\n    accessReview:\n      nodeMaintenance && asAccessReview(NodeMaintenanceModel, nodeMaintenance, 'delete'),\n  };\n};\n\nconst { ModifyLabels, ModifyAnnotations, Edit } = Kebab.factory;\nexport const menuActions = [\n  SetNodeMaintenance,\n  RemoveNodeMaintenance,\n  MarkAsSchedulable,\n  MarkAsUnschedulable,\n  ModifyLabels,\n  ModifyAnnotations,\n  Edit,\n  Delete,\n];\n\ntype ExtraResources = {\n  machines: MachineKind[];\n  hosts: NodeKind[];\n  nodeMaintenances: K8sResourceKind[];\n};\n\nexport const menuActionsCreator = (\n  kindObj: K8sKind,\n  node: NodeKind,\n  { nodeMaintenances }: ExtraResources,\n  { hasNodeMaintenanceCapability },\n) => {\n  const nodeMaintenance = findNodeMaintenance(nodeMaintenances, getName(node));\n  return menuActions.map((action) => {\n    return action(kindObj, node, null, {\n      hasNodeMaintenanceCapability,\n      nodeMaintenance,\n    });\n  });\n};\n"]}]}