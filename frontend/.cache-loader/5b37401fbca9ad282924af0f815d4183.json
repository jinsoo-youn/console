{"remainingRequest":"/home/jinsoo/hypercloud-console5.0/frontend/node_modules/thread-loader/dist/cjs.js??ref--5-1!/home/jinsoo/hypercloud-console5.0/frontend/node_modules/ts-loader/index.js??ref--5-2!/home/jinsoo/hypercloud-console5.0/frontend/public/components/create-yaml.tsx","dependencies":[{"path":"/home/jinsoo/hypercloud-console5.0/frontend/public/components/create-yaml.tsx","mtime":1616735742460},{"path":"/home/jinsoo/hypercloud-console5.0/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1607306270906},{"path":"/home/jinsoo/hypercloud-console5.0/frontend/node_modules/thread-loader/dist/cjs.js","mtime":1607306283100},{"path":"/home/jinsoo/hypercloud-console5.0/frontend/node_modules/ts-loader/index.js","mtime":1607306283339}],"contextDependencies":[],"result":["import * as React from 'react';\nimport { yamlTemplates } from '../models/yaml-templates';\nimport { connectToPlural } from '../kinds';\nimport { AsyncComponent } from './utils/async';\nimport { Firehose, LoadingBox } from './utils';\nimport { apiVersionForModel, referenceForModel, } from '../module/k8s';\nimport { ErrorPage404 } from './error';\nimport { safeYAMLToJS } from '@console/shared/src/utils/yaml';\nexport const CreateYAML = connectToPlural((props) => {\n    const { match, kindsInFlight, kindObj, hideHeader = false, onChange = () => null, resourceObjPath, } = props;\n    const { params } = match;\n    if (!kindObj) {\n        if (kindsInFlight) {\n            return React.createElement(LoadingBox, null);\n        }\n        return React.createElement(ErrorPage404, null);\n    }\n    const namespace = params.ns || 'default';\n    const template = props.template ||\n        yamlTemplates.getIn([referenceForModel(kindObj), 'default']) ||\n        yamlTemplates.getIn(['DEFAULT', 'default']);\n    const obj = safeYAMLToJS(template);\n    obj.kind = kindObj.kind;\n    obj.metadata = obj.metadata || {};\n    if (kindObj.namespaced) {\n        obj.metadata.namespace = namespace;\n    }\n    if (kindObj.crd && template === yamlTemplates.getIn(['DEFAULT', 'default'])) {\n        obj.apiVersion = apiVersionForModel(kindObj);\n        obj.spec = obj.spec || {};\n    }\n    const header = `Create ${kindObj.label}`;\n    // TODO: if someone edits namespace, we'll redirect to old namespace\n    return (React.createElement(AsyncComponent, { loader: () => import('./droppable-edit-yaml').then((c) => c.DroppableEditYAML), obj: obj, create: true, kind: kindObj.kind, header: header, hideHeader: hideHeader, resourceObjPath: resourceObjPath, onChange: onChange }));\n});\nexport const EditYAMLPage = (props) => {\n    const Wrapper = (wrapperProps) => (React.createElement(AsyncComponent, Object.assign({}, wrapperProps, { obj: wrapperProps.obj.data, loader: () => import('./edit-yaml').then((c) => c.EditYAML), create: false })));\n    return (React.createElement(Firehose, { resources: [\n            {\n                kind: props.kind,\n                name: props.match.params.name,\n                namespace: props.match.params.ns,\n                isList: false,\n                prop: 'obj',\n            },\n        ] },\n        React.createElement(Wrapper, null)));\n};\nEditYAMLPage.displayName = 'EditYAMLPage';\n",{"version":3,"file":"/home/jinsoo/hypercloud-console5.0/frontend/public/components/create-yaml.tsx","sourceRoot":"","sources":["/home/jinsoo/hypercloud-console5.0/frontend/public/components/create-yaml.tsx"],"names":[],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport { match as RouterMatch } from 'react-router-dom';\nimport { yamlTemplates } from '../models/yaml-templates';\nimport { connectToPlural } from '../kinds';\nimport { AsyncComponent } from './utils/async';\nimport { Firehose, LoadingBox } from './utils';\nimport {\n  K8sKind,\n  apiVersionForModel,\n  referenceForModel,\n  K8sResourceKindReference,\n  K8sResourceKind,\n} from '../module/k8s';\nimport { ErrorPage404 } from './error';\nimport { safeYAMLToJS } from '@console/shared/src/utils/yaml';\n\nexport const CreateYAML = connectToPlural((props: CreateYAMLProps) => {\n  const {\n    match,\n    kindsInFlight,\n    kindObj,\n    hideHeader = false,\n    onChange = () => null,\n    resourceObjPath,\n  } = props;\n  const { params } = match;\n\n  if (!kindObj) {\n    if (kindsInFlight) {\n      return <LoadingBox />;\n    }\n    return <ErrorPage404 />;\n  }\n\n  const namespace = params.ns || 'default';\n  const template =\n    props.template ||\n    yamlTemplates.getIn([referenceForModel(kindObj), 'default']) ||\n    yamlTemplates.getIn(['DEFAULT', 'default']);\n\n  const obj = safeYAMLToJS(template);\n  obj.kind = kindObj.kind;\n  obj.metadata = obj.metadata || {};\n  if (kindObj.namespaced) {\n    obj.metadata.namespace = namespace;\n  }\n  if (kindObj.crd && template === yamlTemplates.getIn(['DEFAULT', 'default'])) {\n    obj.apiVersion = apiVersionForModel(kindObj);\n    obj.spec = obj.spec || {};\n  }\n  const header = `Create ${kindObj.label}`;\n\n  // TODO: if someone edits namespace, we'll redirect to old namespace\n\n  return (\n    <AsyncComponent\n      loader={() => import('./droppable-edit-yaml').then((c) => c.DroppableEditYAML)}\n      obj={obj}\n      create={true}\n      kind={kindObj.kind}\n      header={header}\n      hideHeader={hideHeader}\n      resourceObjPath={resourceObjPath}\n      onChange={onChange}\n    />\n  );\n});\n\nexport const EditYAMLPage: React.SFC<EditYAMLPageProps> = (props) => {\n  const Wrapper = (wrapperProps) => (\n    <AsyncComponent\n      {...wrapperProps}\n      obj={wrapperProps.obj.data}\n      loader={() => import('./edit-yaml').then((c) => c.EditYAML)}\n      create={false}\n    />\n  );\n  return (\n    <Firehose\n      resources={[\n        {\n          kind: props.kind,\n          name: props.match.params.name,\n          namespace: props.match.params.ns,\n          isList: false,\n          prop: 'obj',\n        },\n      ]}\n    >\n      <Wrapper />\n    </Firehose>\n  );\n};\n\nexport type CreateYAMLProps = {\n  match: RouterMatch<{ ns: string; plural: string; appName?: string }>;\n  kindsInFlight: boolean;\n  kindObj: K8sKind;\n  template?: string;\n  download?: boolean;\n  header?: string;\n  hideHeader?: boolean;\n  resourceObjPath?: (obj: K8sResourceKind, kind: K8sResourceKindReference) => string;\n  onChange?: (yaml: string) => any;\n};\n\nexport type EditYAMLPageProps = {\n  match: RouterMatch<{ ns: string; name: string }>;\n  kind: string;\n};\n\nEditYAMLPage.displayName = 'EditYAMLPage';\n"]}]}