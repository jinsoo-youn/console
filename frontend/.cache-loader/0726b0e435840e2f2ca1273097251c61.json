{"remainingRequest":"/home/jinsoo/hypercloud-console5.0/frontend/node_modules/thread-loader/dist/cjs.js??ref--5-1!/home/jinsoo/hypercloud-console5.0/frontend/node_modules/ts-loader/index.js??ref--5-2!/home/jinsoo/hypercloud-console5.0/frontend/public/components/utils/promise-component.tsx","dependencies":[{"path":"/home/jinsoo/hypercloud-console5.0/frontend/public/components/utils/promise-component.tsx","mtime":1615298458750},{"path":"/home/jinsoo/hypercloud-console5.0/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1607306270906},{"path":"/home/jinsoo/hypercloud-console5.0/frontend/node_modules/thread-loader/dist/cjs.js","mtime":1607306283100},{"path":"/home/jinsoo/hypercloud-console5.0/frontend/node_modules/ts-loader/index.js","mtime":1607306283339}],"contextDependencies":[],"result":["import * as React from 'react';\nexport const withHandlePromise = (Component) => (props) => {\n    const [inProgress, setInProgress] = React.useState(false);\n    const [errorMessage, setErrorMessage] = React.useState('');\n    const handlePromise = (promise) => {\n        setInProgress(true);\n        return promise.then((res) => {\n            setInProgress(false);\n            setErrorMessage('');\n            return res;\n        }, (error) => {\n            const errorMsg = error.message || 'An error occurred. Please try again.';\n            setInProgress(false);\n            setErrorMessage(errorMsg);\n            return Promise.reject(errorMsg);\n        });\n    };\n    return (React.createElement(Component, Object.assign({}, props, { handlePromise: handlePromise, inProgress: inProgress, errorMessage: errorMessage })));\n};\nexport class PromiseComponent extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            inProgress: false,\n            errorMessage: '',\n        };\n    }\n    handlePromise(promise) {\n        this.setState({\n            inProgress: true,\n        });\n        return promise.then((res) => this.then(res), (error) => this.catch(error));\n    }\n    then(res) {\n        this.setState({\n            inProgress: false,\n            errorMessage: '',\n        });\n        return res;\n    }\n    catch(error) {\n        const errorMessage = error.message || 'An error occurred. Please try again.';\n        this.setState({\n            inProgress: false,\n            errorMessage,\n        });\n        return Promise.reject(errorMessage);\n    }\n}\n",{"version":3,"file":"/home/jinsoo/hypercloud-console5.0/frontend/public/components/utils/promise-component.tsx","sourceRoot":"","sources":["/home/jinsoo/hypercloud-console5.0/frontend/public/components/utils/promise-component.tsx"],"names":[],"mappings":"AAAA,OAAO,KAAK,KAAK,MAAM,OAAO,CAAC;AAE/B,MAAM,CAAC,MAAM,iBAAiB,GAAsB,CAAC,SAAS,EAAE,EAAE,CAAC,CAAC,KAAK,EAAE,EAAE;IAC3E,MAAM,CAAC,UAAU,EAAE,aAAa,CAAC,GAAG,KAAK,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;IAC1D,MAAM,CAAC,YAAY,EAAE,eAAe,CAAC,GAAG,KAAK,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;IAE3D,MAAM,aAAa,GAAG,CAAC,OAAO,EAAE,EAAE;QAChC,aAAa,CAAC,IAAI,CAAC,CAAC;QACpB,OAAO,OAAO,CAAC,IAAI,CACjB,CAAC,GAAG,EAAE,EAAE;YACN,aAAa,CAAC,KAAK,CAAC,CAAC;YACrB,eAAe,CAAC,EAAE,CAAC,CAAC;YACpB,OAAO,GAAG,CAAC;QACb,CAAC,EACD,CAAC,KAAK,EAAE,EAAE;YACR,MAAM,QAAQ,GAAG,KAAK,CAAC,OAAO,IAAI,sCAAsC,CAAC;YACzE,aAAa,CAAC,KAAK,CAAC,CAAC;YACrB,eAAe,CAAC,QAAQ,CAAC,CAAC;YAC1B,OAAO,OAAO,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;QAClC,CAAC,CACF,CAAC;IACJ,CAAC,CAAC;IAEF,OAAO,CACL,oBAAC,SAAS,oBACH,KAAa,IAClB,aAAa,EAAE,aAAa,EAC5B,UAAU,EAAE,UAAU,EACtB,YAAY,EAAE,YAAY,IAC1B,CACH,CAAC;AACJ,CAAC,CAAC;AAEF,MAAM,OAAO,gBAAqD,SAAQ,KAAK,CAAC,SAAe;IAC7F,YAAY,KAAK;QACf,KAAK,CAAC,KAAK,CAAC,CAAC;QACb,IAAI,CAAC,KAAK,GAAG;YACX,UAAU,EAAE,KAAK;YACjB,YAAY,EAAE,EAAE;SACZ,CAAC;IACT,CAAC;IAED,aAAa,CAAI,OAAmB;QAClC,IAAI,CAAC,QAAQ,CAAC;YACZ,UAAU,EAAE,IAAI;SACjB,CAAC,CAAC;QACH,OAAO,OAAO,CAAC,IAAI,CACjB,CAAC,GAAG,EAAE,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,EACvB,CAAC,KAAK,EAAE,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAC7B,CAAC;IACJ,CAAC;IAEO,IAAI,CAAC,GAAG;QACd,IAAI,CAAC,QAAQ,CAAC;YACZ,UAAU,EAAE,KAAK;YACjB,YAAY,EAAE,EAAE;SACjB,CAAC,CAAC;QACH,OAAO,GAAG,CAAC;IACb,CAAC;IAEO,KAAK,CAAC,KAAK;QACjB,MAAM,YAAY,GAAG,KAAK,CAAC,OAAO,IAAI,sCAAsC,CAAC;QAC7E,IAAI,CAAC,QAAQ,CAAC;YACZ,UAAU,EAAE,KAAK;YACjB,YAAY;SACb,CAAC,CAAC;QACH,OAAO,OAAO,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC;IACtC,CAAC;CACF","sourcesContent":["import * as React from 'react';\n\nexport const withHandlePromise: WithHandlePromise = (Component) => (props) => {\n  const [inProgress, setInProgress] = React.useState(false);\n  const [errorMessage, setErrorMessage] = React.useState('');\n\n  const handlePromise = (promise) => {\n    setInProgress(true);\n    return promise.then(\n      (res) => {\n        setInProgress(false);\n        setErrorMessage('');\n        return res;\n      },\n      (error) => {\n        const errorMsg = error.message || 'An error occurred. Please try again.';\n        setInProgress(false);\n        setErrorMessage(errorMsg);\n        return Promise.reject(errorMsg);\n      },\n    );\n  };\n\n  return (\n    <Component\n      {...(props as any)}\n      handlePromise={handlePromise}\n      inProgress={inProgress}\n      errorMessage={errorMessage}\n    />\n  );\n};\n\nexport class PromiseComponent<P, S extends PromiseComponentState> extends React.Component<P, S> {\n  constructor(props) {\n    super(props);\n    this.state = {\n      inProgress: false,\n      errorMessage: '',\n    } as S;\n  }\n\n  handlePromise<T>(promise: Promise<T>): Promise<T> {\n    this.setState({\n      inProgress: true,\n    });\n    return promise.then(\n      (res) => this.then(res),\n      (error) => this.catch(error),\n    );\n  }\n\n  private then(res) {\n    this.setState({\n      inProgress: false,\n      errorMessage: '',\n    });\n    return res;\n  }\n\n  private catch(error) {\n    const errorMessage = error.message || 'An error occurred. Please try again.';\n    this.setState({\n      inProgress: false,\n      errorMessage,\n    });\n    return Promise.reject(errorMessage);\n  }\n}\n\nexport type HandlePromiseProps = {\n  handlePromise: <T>(promise: Promise<T>) => Promise<T>;\n  inProgress: boolean;\n  errorMessage: string;\n};\n\nexport type WithHandlePromise = <P extends HandlePromiseProps>(\n  C: React.ComponentType<P>,\n) => React.FC<Diff<P, HandlePromiseProps>>;\n\nexport type PromiseComponentState = {\n  inProgress: boolean;\n  errorMessage: string;\n};\n"]}]}