{"remainingRequest":"/home/jinsoo/hypercloud-console5.0/frontend/node_modules/thread-loader/dist/cjs.js??ref--5-1!/home/jinsoo/hypercloud-console5.0/frontend/node_modules/ts-loader/index.js??ref--5-2!/home/jinsoo/hypercloud-console5.0/frontend/packages/console-plugin-sdk/src/registry.ts","dependencies":[{"path":"/home/jinsoo/hypercloud-console5.0/frontend/packages/console-plugin-sdk/src/registry.ts","mtime":1615298458600},{"path":"/home/jinsoo/hypercloud-console5.0/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1607306270906},{"path":"/home/jinsoo/hypercloud-console5.0/frontend/node_modules/thread-loader/dist/cjs.js","mtime":1607306283100},{"path":"/home/jinsoo/hypercloud-console5.0/frontend/node_modules/ts-loader/index.js","mtime":1607306283339}],"contextDependencies":[],"result":["import * as _ from 'lodash';\nimport { isClusterServiceVersionAction, isDevCatalogModel, isGlobalConfig, isKebabActions, isModelDefinition, isModelFeatureFlag, isOverviewCRD, isOverviewResourceTab, isOverviewTabSection, isPerspective, isReduxReducer, isResourceDetailsPage, isResourceListPage, isRoutePage, isYAMLTemplate, isCustomFeatureFlag, } from './typings';\n// TODO(vojtech): legacy, remove\n/**\n * Registry used to query for Console extensions.\n */\nexport class ExtensionRegistry {\n    constructor(plugins) {\n        this.extensions = _.flatMap(plugins.map((p) => p.extensions));\n    }\n    getGatingFlagNames(typeGuards) {\n        return _.flatMap(typeGuards.map((tg) => this.extensions.filter(tg))).reduce((gatingFlags, e) => _.uniq([\n            ...gatingFlags,\n            ..._.castArray(e.properties.required || []),\n            ..._.castArray(e.properties.disallowed || []),\n        ]), []);\n    }\n    isExtensionInUse(e, flags) {\n        const requiredFlags = _.castArray(e.properties.required || []);\n        const disallowedFlags = _.castArray(e.properties.disallowed || []);\n        return (_.every(requiredFlags, (f) => flags[f] === true) &&\n            _.every(disallowedFlags, (f) => flags[f] === false));\n    }\n    getModelDefinitions() {\n        return this.extensions.filter(isModelDefinition);\n    }\n    getModelFeatureFlags() {\n        return this.extensions.filter(isModelFeatureFlag);\n    }\n    getCustomFeatureFlags() {\n        return this.extensions.filter(isCustomFeatureFlag);\n    }\n    getResourceListPages() {\n        return this.extensions.filter(isResourceListPage);\n    }\n    getResourceDetailsPages() {\n        return this.extensions.filter(isResourceDetailsPage);\n    }\n    getRoutePages() {\n        return this.extensions.filter(isRoutePage);\n    }\n    getPerspectives() {\n        return this.extensions.filter(isPerspective);\n    }\n    getYAMLTemplates() {\n        return this.extensions.filter(isYAMLTemplate);\n    }\n    getOverviewResourceTabs() {\n        return this.extensions.filter(isOverviewResourceTab);\n    }\n    getOverviewTabSections() {\n        return this.extensions.filter(isOverviewTabSection);\n    }\n    getOverviewCRDs() {\n        return this.extensions.filter(isOverviewCRD);\n    }\n    getGlobalConfigs() {\n        return this.extensions.filter(isGlobalConfig);\n    }\n    getClusterServiceVersionActions() {\n        return this.extensions.filter(isClusterServiceVersionAction);\n    }\n    getKebabActions() {\n        return this.extensions.filter(isKebabActions);\n    }\n    getDevCatalogModels() {\n        return this.extensions.filter(isDevCatalogModel);\n    }\n    getReduxReducers() {\n        return this.extensions.filter(isReduxReducer);\n    }\n}\n",{"version":3,"file":"/home/jinsoo/hypercloud-console5.0/frontend/packages/console-plugin-sdk/src/registry.ts","sourceRoot":"","sources":["/home/jinsoo/hypercloud-console5.0/frontend/packages/console-plugin-sdk/src/registry.ts"],"names":[],"mappings":"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","sourcesContent":["import * as _ from 'lodash';\n\nimport {\n  ActivePlugin,\n  Extension,\n  ExtensionTypeGuard,\n  isClusterServiceVersionAction,\n  isDevCatalogModel,\n  isGlobalConfig,\n  isKebabActions,\n  isModelDefinition,\n  isModelFeatureFlag,\n  isOverviewCRD,\n  isOverviewResourceTab,\n  isOverviewTabSection,\n  isPerspective,\n  isReduxReducer,\n  isResourceDetailsPage,\n  isResourceListPage,\n  isRoutePage,\n  isYAMLTemplate,\n  isCustomFeatureFlag,\n} from './typings';\n\nimport { FlagsObject } from '@console/internal/reducers/features';\n\n// TODO(vojtech): legacy, remove\n\n/**\n * Registry used to query for Console extensions.\n */\nexport class ExtensionRegistry {\n  private readonly extensions: Extension[];\n\n  public constructor(plugins: ActivePlugin[]) {\n    this.extensions = _.flatMap(plugins.map((p) => p.extensions));\n  }\n\n  public getGatingFlagNames(typeGuards: ExtensionTypeGuard<ExtensionWithFlags>[]) {\n    return _.flatMap(typeGuards.map((tg) => this.extensions.filter(tg))).reduce(\n      (gatingFlags, e) =>\n        _.uniq([\n          ...gatingFlags,\n          ..._.castArray(e.properties.required || []),\n          ..._.castArray(e.properties.disallowed || []),\n        ]),\n      [] as string[],\n    );\n  }\n\n  public isExtensionInUse(e: ExtensionWithFlags, flags: FlagsObject) {\n    const requiredFlags = _.castArray(e.properties.required || []);\n    const disallowedFlags = _.castArray(e.properties.disallowed || []);\n    return (\n      _.every(requiredFlags, (f) => flags[f] === true) &&\n      _.every(disallowedFlags, (f) => flags[f] === false)\n    );\n  }\n\n  public getModelDefinitions() {\n    return this.extensions.filter(isModelDefinition);\n  }\n\n  public getModelFeatureFlags() {\n    return this.extensions.filter(isModelFeatureFlag);\n  }\n\n  public getCustomFeatureFlags() {\n    return this.extensions.filter(isCustomFeatureFlag);\n  }\n\n  public getResourceListPages() {\n    return this.extensions.filter(isResourceListPage);\n  }\n\n  public getResourceDetailsPages() {\n    return this.extensions.filter(isResourceDetailsPage);\n  }\n\n  public getRoutePages() {\n    return this.extensions.filter(isRoutePage);\n  }\n\n  public getPerspectives() {\n    return this.extensions.filter(isPerspective);\n  }\n\n  public getYAMLTemplates() {\n    return this.extensions.filter(isYAMLTemplate);\n  }\n\n  public getOverviewResourceTabs() {\n    return this.extensions.filter(isOverviewResourceTab);\n  }\n\n  public getOverviewTabSections() {\n    return this.extensions.filter(isOverviewTabSection);\n  }\n\n  public getOverviewCRDs() {\n    return this.extensions.filter(isOverviewCRD);\n  }\n\n  public getGlobalConfigs() {\n    return this.extensions.filter(isGlobalConfig);\n  }\n\n  public getClusterServiceVersionActions() {\n    return this.extensions.filter(isClusterServiceVersionAction);\n  }\n\n  public getKebabActions() {\n    return this.extensions.filter(isKebabActions);\n  }\n\n  public getDevCatalogModels() {\n    return this.extensions.filter(isDevCatalogModel);\n  }\n\n  public getReduxReducers() {\n    return this.extensions.filter(isReduxReducer);\n  }\n}\n\ntype ExtensionWithFlags = Extension<{\n  required?: string | string[];\n  disallowed?: string | string[];\n}>;\n"]}]}