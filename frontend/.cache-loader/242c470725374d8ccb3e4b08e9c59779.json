{"remainingRequest":"/home/jinsoo/hypercloud-console5.0/frontend/node_modules/thread-loader/dist/cjs.js??ref--5-1!/home/jinsoo/hypercloud-console5.0/frontend/node_modules/ts-loader/index.js??ref--5-2!/home/jinsoo/hypercloud-console5.0/frontend/packages/metal3-plugin/src/components/baremetal-hosts/host-menu-actions.tsx","dependencies":[{"path":"/home/jinsoo/hypercloud-console5.0/frontend/packages/metal3-plugin/src/components/baremetal-hosts/host-menu-actions.tsx","mtime":1616735742430},{"path":"/home/jinsoo/hypercloud-console5.0/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1607306270906},{"path":"/home/jinsoo/hypercloud-console5.0/frontend/node_modules/thread-loader/dist/cjs.js","mtime":1607306283100},{"path":"/home/jinsoo/hypercloud-console5.0/frontend/node_modules/ts-loader/index.js","mtime":1607306283339}],"contextDependencies":[],"result":["import { asAccessReview, Kebab } from '@console/internal/components/utils';\nimport { k8sPatch, referenceForModel, } from '@console/internal/module/k8s';\nimport { getMachineNode, getMachineNodeName, getName, getNamespace, getAnnotations, } from '@console/shared';\nimport { confirmModal, deleteModal } from '@console/internal/components/modals';\nimport { MachineModel, MachineSetModel } from '@console/internal/models';\nimport { findNodeMaintenance, getHostMachine, getHostPowerStatus, isHostScheduledForRestart, } from '../../selectors';\nimport { BareMetalHostModel, NodeMaintenanceModel } from '../../models';\nimport { getHostStatus } from '../../status/host-status';\nimport { HOST_POWER_STATUS_POWERED_OFF, HOST_POWER_STATUS_POWERED_ON, HOST_POWER_STATUS_POWERING_OFF, HOST_POWER_STATUS_POWERING_ON, HOST_STATUS_AVAILABLE, HOST_STATUS_DISCOVERED, HOST_STATUS_READY, HOST_ERROR_STATES, HOST_STATUS_UNKNOWN, } from '../../constants';\nimport { startNodeMaintenanceModal } from '../modals/StartNodeMaintenanceModal';\nimport { powerOffHostModal } from '../modals/PowerOffHostModal';\nimport stopNodeMaintenanceModal from '../modals/StopNodeMaintenanceModal';\nimport { DELETE_MACHINE_ANNOTATION } from '../../constants/machine';\nimport { deprovision } from '../../k8s/requests/bare-metal-host';\nimport { getMachineMachineSetOwner } from '../../selectors/machine';\nimport { findMachineSet } from '../../selectors/machine-set';\nimport { restartHostModal } from '../modals/RestartHostModal';\nexport const Edit = (kindObj, host) => ({\n    label: `Edit ${kindObj.label}`,\n    href: `/k8s/ns/${getNamespace(host)}/${referenceForModel(kindObj)}/${getName(host)}/edit`,\n});\nexport const SetNodeMaintenance = (kindObj, host, { hasNodeMaintenanceCapability, nodeMaintenance, nodeName }) => ({\n    hidden: !nodeName || !hasNodeMaintenanceCapability || !!nodeMaintenance,\n    label: 'Start Maintenance',\n    callback: () => startNodeMaintenanceModal({ nodeName }),\n});\nexport const RemoveNodeMaintenance = (kindObj, host, { hasNodeMaintenanceCapability, nodeMaintenance, nodeName }) => ({\n    hidden: !nodeName || !hasNodeMaintenanceCapability || !nodeMaintenance,\n    label: 'Stop Maintenance',\n    callback: () => stopNodeMaintenanceModal(nodeMaintenance),\n    accessReview: nodeMaintenance && asAccessReview(NodeMaintenanceModel, nodeMaintenance, 'delete'),\n});\nexport const PowerOn = (kindObj, host) => {\n    const title = 'Power On';\n    return {\n        hidden: [HOST_POWER_STATUS_POWERED_ON, HOST_POWER_STATUS_POWERING_ON].includes(getHostPowerStatus(host)),\n        label: title,\n        callback: () => {\n            k8sPatch(BareMetalHostModel, host, [{ op: 'replace', path: '/spec/online', value: true }]);\n        },\n        accessReview: host && asAccessReview(BareMetalHostModel, host, 'update'),\n    };\n};\nexport const Deprovision = (kindObj, host, { machine, machineSet }) => {\n    const title = 'Deprovision';\n    return {\n        hidden: [HOST_POWER_STATUS_POWERED_OFF, HOST_POWER_STATUS_POWERING_OFF].includes(getHostPowerStatus(host)) ||\n            isHostScheduledForRestart(host) ||\n            !machine ||\n            !!getAnnotations(machine, {})[DELETE_MACHINE_ANNOTATION] ||\n            (getMachineMachineSetOwner(machine) && !machineSet),\n        label: title,\n        callback: () => confirmModal({\n            title: `${title} ${getName(host)}`,\n            message: `Are you sure you want to delete ${getName(machine)} machine${machineSet ? ' and scale down its machine set?' : '?'}`,\n            btnText: title,\n            executeFn: () => deprovision(machine, machineSet),\n        }),\n        accessReview: machineSet\n            ? asAccessReview(MachineSetModel, machineSet, 'update')\n            : asAccessReview(MachineModel, machine, 'delete'),\n    };\n};\nexport const PowerOff = (kindObj, host, { nodeName, status }) => ({\n    hidden: [HOST_POWER_STATUS_POWERED_OFF, HOST_POWER_STATUS_POWERING_OFF].includes(getHostPowerStatus(host)),\n    label: 'Power Off',\n    callback: () => powerOffHostModal({ host, nodeName, status }),\n    accessReview: host && asAccessReview(BareMetalHostModel, host, 'update'),\n});\nexport const Restart = (kindObj, host, { nodeName }) => ({\n    hidden: [HOST_POWER_STATUS_POWERED_OFF, HOST_POWER_STATUS_POWERING_OFF].includes(getHostPowerStatus(host)) || isHostScheduledForRestart(host),\n    label: 'Restart',\n    callback: () => restartHostModal({ host, nodeName }),\n    accessReview: host && asAccessReview(BareMetalHostModel, host, 'update'),\n});\nexport const Delete = (kindObj, host, { status }) => {\n    const title = 'Delete Bare Metal Host';\n    return {\n        hidden: ![\n            HOST_STATUS_UNKNOWN,\n            HOST_STATUS_READY,\n            HOST_STATUS_AVAILABLE,\n            HOST_STATUS_DISCOVERED,\n            ...HOST_ERROR_STATES,\n        ].includes(status.status),\n        label: title,\n        callback: () => deleteModal({\n            kind: kindObj,\n            resource: host,\n        }),\n        accessReview: asAccessReview(BareMetalHostModel, host, 'delete'),\n    };\n};\nexport const menuActions = [\n    SetNodeMaintenance,\n    RemoveNodeMaintenance,\n    PowerOn,\n    Deprovision,\n    PowerOff,\n    Restart,\n    Kebab.factory.ModifyLabels,\n    Kebab.factory.ModifyAnnotations,\n    Edit,\n    Delete,\n];\nexport const menuActionsCreator = (kindObj, host, { machines, machineSets, nodes, nodeMaintenances }, { hasNodeMaintenanceCapability }) => {\n    const machine = getHostMachine(host, machines);\n    const node = getMachineNode(machine, nodes);\n    const nodeName = getMachineNodeName(machine);\n    const nodeMaintenance = findNodeMaintenance(nodeMaintenances, nodeName);\n    const status = getHostStatus({ host, machine, node, nodeMaintenance });\n    const machineOwner = getMachineMachineSetOwner(machine);\n    const machineSet = findMachineSet(machineSets, machineOwner && machineOwner.uid);\n    return menuActions.map((action) => {\n        return action(kindObj, host, {\n            hasNodeMaintenanceCapability,\n            nodeMaintenance,\n            nodeName,\n            machine,\n            machineSet,\n            status,\n        });\n    });\n};\n",{"version":3,"file":"/home/jinsoo/hypercloud-console5.0/frontend/packages/metal3-plugin/src/components/baremetal-hosts/host-menu-actions.tsx","sourceRoot":"","sources":["/home/jinsoo/hypercloud-console5.0/frontend/packages/metal3-plugin/src/components/baremetal-hosts/host-menu-actions.tsx"],"names":[],"mappings":"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","sourcesContent":["import { asAccessReview, Kebab, KebabOption } from '@console/internal/components/utils';\nimport {\n  K8sKind,\n  k8sPatch,\n  K8sResourceKind,\n  MachineKind,\n  MachineSetKind,\n  NodeKind,\n  referenceForModel,\n} from '@console/internal/module/k8s';\nimport {\n  getMachineNode,\n  getMachineNodeName,\n  getName,\n  getNamespace,\n  getAnnotations,\n} from '@console/shared';\nimport { confirmModal, deleteModal } from '@console/internal/components/modals';\nimport { MachineModel, MachineSetModel } from '@console/internal/models';\nimport {\n  findNodeMaintenance,\n  getHostMachine,\n  getHostPowerStatus,\n  isHostScheduledForRestart,\n} from '../../selectors';\nimport { BareMetalHostModel, NodeMaintenanceModel } from '../../models';\nimport { getHostStatus } from '../../status/host-status';\nimport {\n  HOST_POWER_STATUS_POWERED_OFF,\n  HOST_POWER_STATUS_POWERED_ON,\n  HOST_POWER_STATUS_POWERING_OFF,\n  HOST_POWER_STATUS_POWERING_ON,\n  HOST_STATUS_AVAILABLE,\n  HOST_STATUS_DISCOVERED,\n  HOST_STATUS_READY,\n  HOST_ERROR_STATES,\n  HOST_STATUS_UNKNOWN,\n} from '../../constants';\nimport { startNodeMaintenanceModal } from '../modals/StartNodeMaintenanceModal';\nimport { powerOffHostModal } from '../modals/PowerOffHostModal';\nimport stopNodeMaintenanceModal from '../modals/StopNodeMaintenanceModal';\nimport { BareMetalHostKind } from '../../types';\nimport { DELETE_MACHINE_ANNOTATION } from '../../constants/machine';\nimport { deprovision } from '../../k8s/requests/bare-metal-host';\nimport { getMachineMachineSetOwner } from '../../selectors/machine';\nimport { findMachineSet } from '../../selectors/machine-set';\nimport { restartHostModal } from '../modals/RestartHostModal';\nimport { StatusProps } from '../types';\n\ntype ActionArgs = {\n  machine?: MachineKind;\n  machineSet?: MachineSetKind;\n  nodeName?: string;\n  nodeMaintenance?: K8sResourceKind;\n  hasNodeMaintenanceCapability?: boolean;\n  status: StatusProps;\n};\n\nexport const Edit = (kindObj: K8sKind, host: BareMetalHostKind): KebabOption => ({\n  label: `Edit ${kindObj.label}`,\n  href: `/k8s/ns/${getNamespace(host)}/${referenceForModel(kindObj)}/${getName(host)}/edit`,\n});\n\nexport const SetNodeMaintenance = (\n  kindObj: K8sKind,\n  host: BareMetalHostKind,\n  { hasNodeMaintenanceCapability, nodeMaintenance, nodeName }: ActionArgs,\n): KebabOption => ({\n  hidden: !nodeName || !hasNodeMaintenanceCapability || !!nodeMaintenance,\n  label: 'Start Maintenance',\n  callback: () => startNodeMaintenanceModal({ nodeName }),\n});\n\nexport const RemoveNodeMaintenance = (\n  kindObj: K8sKind,\n  host: BareMetalHostKind,\n  { hasNodeMaintenanceCapability, nodeMaintenance, nodeName }: ActionArgs,\n): KebabOption => ({\n  hidden: !nodeName || !hasNodeMaintenanceCapability || !nodeMaintenance,\n  label: 'Stop Maintenance',\n  callback: () => stopNodeMaintenanceModal(nodeMaintenance),\n  accessReview: nodeMaintenance && asAccessReview(NodeMaintenanceModel, nodeMaintenance, 'delete'),\n});\n\nexport const PowerOn = (kindObj: K8sKind, host: BareMetalHostKind): KebabOption => {\n  const title = 'Power On';\n  return {\n    hidden: [HOST_POWER_STATUS_POWERED_ON, HOST_POWER_STATUS_POWERING_ON].includes(\n      getHostPowerStatus(host),\n    ),\n    label: title,\n    callback: () => {\n      k8sPatch(BareMetalHostModel, host, [{ op: 'replace', path: '/spec/online', value: true }]);\n    },\n    accessReview: host && asAccessReview(BareMetalHostModel, host, 'update'),\n  };\n};\n\nexport const Deprovision = (\n  kindObj: K8sKind,\n  host: BareMetalHostKind,\n  { machine, machineSet }: ActionArgs,\n): KebabOption => {\n  const title = 'Deprovision';\n  return {\n    hidden:\n      [HOST_POWER_STATUS_POWERED_OFF, HOST_POWER_STATUS_POWERING_OFF].includes(\n        getHostPowerStatus(host),\n      ) ||\n      isHostScheduledForRestart(host) ||\n      !machine ||\n      !!getAnnotations(machine, {})[DELETE_MACHINE_ANNOTATION] ||\n      (getMachineMachineSetOwner(machine) && !machineSet),\n    label: title,\n    callback: () =>\n      confirmModal({\n        title: `${title} ${getName(host)}`,\n        message: `Are you sure you want to delete ${getName(machine)} machine${\n          machineSet ? ' and scale down its machine set?' : '?'\n        }`,\n        btnText: title,\n        executeFn: () => deprovision(machine, machineSet),\n      }),\n    accessReview: machineSet\n      ? asAccessReview(MachineSetModel, machineSet, 'update')\n      : asAccessReview(MachineModel, machine, 'delete'),\n  };\n};\n\nexport const PowerOff = (\n  kindObj: K8sKind,\n  host: BareMetalHostKind,\n  { nodeName, status }: ActionArgs,\n) => ({\n  hidden: [HOST_POWER_STATUS_POWERED_OFF, HOST_POWER_STATUS_POWERING_OFF].includes(\n    getHostPowerStatus(host),\n  ),\n  label: 'Power Off',\n  callback: () => powerOffHostModal({ host, nodeName, status }),\n  accessReview: host && asAccessReview(BareMetalHostModel, host, 'update'),\n});\n\nexport const Restart = (kindObj: K8sKind, host: BareMetalHostKind, { nodeName }: ActionArgs) => ({\n  hidden:\n    [HOST_POWER_STATUS_POWERED_OFF, HOST_POWER_STATUS_POWERING_OFF].includes(\n      getHostPowerStatus(host),\n    ) || isHostScheduledForRestart(host),\n  label: 'Restart',\n  callback: () => restartHostModal({ host, nodeName }),\n  accessReview: host && asAccessReview(BareMetalHostModel, host, 'update'),\n});\n\nexport const Delete = (\n  kindObj: K8sKind,\n  host: BareMetalHostKind,\n  { status }: ActionArgs,\n): KebabOption => {\n  const title = 'Delete Bare Metal Host';\n  return {\n    hidden: ![\n      HOST_STATUS_UNKNOWN,\n      HOST_STATUS_READY,\n      HOST_STATUS_AVAILABLE,\n      HOST_STATUS_DISCOVERED,\n      ...HOST_ERROR_STATES,\n    ].includes(status.status),\n    label: title,\n    callback: () =>\n      deleteModal({\n        kind: kindObj,\n        resource: host,\n      }),\n    accessReview: asAccessReview(BareMetalHostModel, host, 'delete'),\n  };\n};\n\nexport const menuActions = [\n  SetNodeMaintenance,\n  RemoveNodeMaintenance,\n  PowerOn,\n  Deprovision,\n  PowerOff,\n  Restart,\n  Kebab.factory.ModifyLabels,\n  Kebab.factory.ModifyAnnotations,\n  Edit,\n  Delete,\n];\n\ntype ExtraResources = {\n  machines: MachineKind[];\n  machineSets: MachineSetKind[];\n  nodes: NodeKind[];\n  nodeMaintenances: K8sResourceKind[];\n};\n\nexport const menuActionsCreator = (\n  kindObj: K8sKind,\n  host: BareMetalHostKind,\n  { machines, machineSets, nodes, nodeMaintenances }: ExtraResources,\n  { hasNodeMaintenanceCapability },\n) => {\n  const machine = getHostMachine(host, machines);\n  const node = getMachineNode(machine, nodes);\n  const nodeName = getMachineNodeName(machine);\n  const nodeMaintenance = findNodeMaintenance(nodeMaintenances, nodeName);\n  const status = getHostStatus({ host, machine, node, nodeMaintenance });\n\n  const machineOwner = getMachineMachineSetOwner(machine);\n  const machineSet = findMachineSet(machineSets, machineOwner && machineOwner.uid);\n\n  return menuActions.map((action) => {\n    return action(kindObj, host, {\n      hasNodeMaintenanceCapability,\n      nodeMaintenance,\n      nodeName,\n      machine,\n      machineSet,\n      status,\n    });\n  });\n};\n"]}]}