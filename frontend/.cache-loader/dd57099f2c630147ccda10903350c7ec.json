{"remainingRequest":"/home/jinsoo/hypercloud-console5.0/frontend/node_modules/thread-loader/dist/cjs.js??ref--5-1!/home/jinsoo/hypercloud-console5.0/frontend/node_modules/ts-loader/index.js??ref--5-2!/home/jinsoo/hypercloud-console5.0/frontend/packages/kubevirt-plugin/src/utils/index.ts","dependencies":[{"path":"/home/jinsoo/hypercloud-console5.0/frontend/packages/kubevirt-plugin/src/utils/index.ts","mtime":1616735742430},{"path":"/home/jinsoo/hypercloud-console5.0/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1607306270906},{"path":"/home/jinsoo/hypercloud-console5.0/frontend/node_modules/thread-loader/dist/cjs.js","mtime":1607306283100},{"path":"/home/jinsoo/hypercloud-console5.0/frontend/node_modules/ts-loader/index.js","mtime":1607306283339}],"contextDependencies":[],"result":["import * as _ from 'lodash';\nimport { NamespaceModel, ProjectModel } from '@console/internal/models';\nimport { getName, getNamespace, getAPIVersion, getKind, getUID, } from '@console/shared/src/selectors';\nimport { VM_TEMPLATE_NAME_PARAMETER } from '../constants/vm-templates';\nimport { pluralize } from './strings';\nexport const getBasicID = (entity) => `${getNamespace(entity)}-${getName(entity)}`;\nexport const prefixedID = (idPrefix, id) => idPrefix && id ? `${idPrefix}-${id}` : null;\nexport const joinIDs = (...ids) => ids.join('-');\nexport const isLoaded = (result) => result && result.loaded;\nexport const getLoadedData = (result, defaultValue = null) => (result && result.loaded && !result.loadError ? result.data : defaultValue);\nexport const getModelString = (model, isList) => pluralize(isList ? 2 : 1, model && model.kind ? model.kind : model);\nexport const getLoadError = (result, model, isList = false) => {\n    if (!result) {\n        return `No model registered for ${getModelString(model, isList)}`;\n    }\n    if (result && result.loadError) {\n        const status = _.get(result.loadError, 'response.status');\n        const message = _.get(result.loadError, 'message');\n        if (status === 404) {\n            return message && !message.toLowerCase().includes('not found')\n                ? `Could not find ${getModelString(model, isList)}: ${message}`\n                : _.capitalize(message);\n        }\n        if (status === 403) {\n            return `Restricted Access: ${message}`;\n        }\n        return message;\n    }\n    return null;\n};\nexport const insertName = (value, name) => {\n    if (value.indexOf(VM_TEMPLATE_NAME_PARAMETER) > -1) {\n        return value.replace(VM_TEMPLATE_NAME_PARAMETER, name);\n    }\n    return joinIDs(name, value);\n};\nexport const parseNumber = (value, defaultValue = null) => {\n    const result = Number(value);\n    return Number.isNaN(result) ? defaultValue : result;\n};\nexport const parsePercentage = (value, defaultValue = null) => {\n    return parseNumber(value === null || value === void 0 ? void 0 : value.replace('%', ''), defaultValue);\n};\nexport const buildOwnerReference = (owner, opts = { blockOwnerDeletion: true }) => ({\n    apiVersion: getAPIVersion(owner),\n    kind: getKind(owner),\n    name: getName(owner),\n    uid: getUID(owner),\n    blockOwnerDeletion: opts && opts.blockOwnerDeletion,\n    controller: opts && opts.controller,\n});\nexport const buildOwnerReferenceForModel = (model, name, uid) => ({\n    apiVersion: `${model.apiGroup}/${model.apiVersion}`,\n    kind: getKind(model),\n    name,\n    uid,\n});\n// FIXME: Avoid this helper! The implementation is not correct. We should remove this.\n// Beware: VM Wizard depends on this custom implementation - mainly the model\nexport const getResource = (model, { name, namespaced = true, namespace, isList = true, matchLabels, matchExpressions, prop, fieldSelector, optional, } = {\n    namespaced: true,\n    isList: true,\n}) => {\n    const m = model.kind === NamespaceModel.kind ? ProjectModel : model;\n    const res = {\n        // non-admin user cannot list namespaces (k8s wont return only namespaces available to user but 403 forbidden, ).\n        // Instead we need to use ProjectModel which will return available projects (namespaces)\n        //\n        // FIXME: This is incorrect! `m.kind` is not unique. These model definitions should have `crd: true`, which will\n        // break this utility. We should be using `referenceForModel` and `crd: true` in our model definitions!\n        kind: m.kind,\n        model: m,\n        namespaced,\n        namespace,\n        isList,\n        prop: prop || model.kind,\n        optional,\n    };\n    if (name) {\n        res.name = name;\n    }\n    if (matchLabels) {\n        res.selector = { matchLabels };\n    }\n    if (matchExpressions) {\n        res.selector = { matchExpressions };\n    }\n    if (fieldSelector) {\n        res.fieldSelector = fieldSelector;\n    }\n    return res;\n};\n",{"version":3,"file":"/home/jinsoo/hypercloud-console5.0/frontend/packages/kubevirt-plugin/src/utils/index.ts","sourceRoot":"","sources":["/home/jinsoo/hypercloud-console5.0/frontend/packages/kubevirt-plugin/src/utils/index.ts"],"names":[],"mappings":"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","sourcesContent":["import * as _ from 'lodash';\nimport { FirehoseResult } from '@console/internal/components/utils';\nimport {\n  K8sKind,\n  K8sResourceKind,\n  OwnerReference,\n  MatchExpression,\n} from '@console/internal/module/k8s';\nimport { NamespaceModel, ProjectModel } from '@console/internal/models';\nimport {\n  getName,\n  getNamespace,\n  getAPIVersion,\n  getKind,\n  getUID,\n} from '@console/shared/src/selectors';\nimport { VM_TEMPLATE_NAME_PARAMETER } from '../constants/vm-templates';\nimport { pluralize } from './strings';\n\nexport const getBasicID = <A extends K8sResourceKind = K8sResourceKind>(entity: A) =>\n  `${getNamespace(entity)}-${getName(entity)}`;\n\nexport const prefixedID = (idPrefix: string, id: string) =>\n  idPrefix && id ? `${idPrefix}-${id}` : null;\n\nexport const joinIDs = (...ids: string[]) => ids.join('-');\n\nexport const isLoaded = (result: FirehoseResult<K8sResourceKind | K8sResourceKind[]>) =>\n  result && result.loaded;\n\nexport const getLoadedData = <T extends K8sResourceKind | K8sResourceKind[] = K8sResourceKind[]>(\n  result: FirehoseResult<T>,\n  defaultValue = null,\n): T => (result && result.loaded && !result.loadError ? result.data : defaultValue);\n\nexport const getModelString = (model: K8sKind | any, isList: boolean) =>\n  pluralize(isList ? 2 : 1, model && model.kind ? model.kind : model);\n\nexport const getLoadError = (\n  result: FirehoseResult<K8sResourceKind | K8sResourceKind[]>,\n  model: K8sKind | any,\n  isList = false,\n) => {\n  if (!result) {\n    return `No model registered for ${getModelString(model, isList)}`;\n  }\n\n  if (result && result.loadError) {\n    const status = _.get(result.loadError, 'response.status');\n    const message = _.get(result.loadError, 'message');\n\n    if (status === 404) {\n      return message && !message.toLowerCase().includes('not found')\n        ? `Could not find ${getModelString(model, isList)}: ${message}`\n        : _.capitalize(message);\n    }\n    if (status === 403) {\n      return `Restricted Access: ${message}`;\n    }\n\n    return message;\n  }\n\n  return null;\n};\n\nexport const insertName = (value: string, name) => {\n  if (value.indexOf(VM_TEMPLATE_NAME_PARAMETER) > -1) {\n    return value.replace(VM_TEMPLATE_NAME_PARAMETER, name);\n  }\n  return joinIDs(name, value);\n};\n\nexport const parseNumber = (value, defaultValue = null) => {\n  const result = Number(value);\n  return Number.isNaN(result) ? defaultValue : result;\n};\n\nexport const parsePercentage = (value: string, defaultValue = null) => {\n  return parseNumber(value?.replace('%', ''), defaultValue);\n};\n\nexport const buildOwnerReference = (\n  owner: K8sResourceKind,\n  opts: { blockOwnerDeletion?: boolean; controller?: boolean } = { blockOwnerDeletion: true },\n): OwnerReference => ({\n  apiVersion: getAPIVersion(owner),\n  kind: getKind(owner),\n  name: getName(owner),\n  uid: getUID(owner),\n  blockOwnerDeletion: opts && opts.blockOwnerDeletion,\n  controller: opts && opts.controller,\n});\n\nexport const buildOwnerReferenceForModel = (\n  model: K8sKind,\n  name?: string,\n  uid?: string,\n): OwnerReference => ({\n  apiVersion: `${model.apiGroup}/${model.apiVersion}`,\n  kind: getKind(model),\n  name,\n  uid,\n});\n\n// FIXME: Avoid this helper! The implementation is not correct. We should remove this.\n// Beware: VM Wizard depends on this custom implementation - mainly the model\nexport const getResource = (\n  model: K8sResourceKind,\n  {\n    name,\n    namespaced = true,\n    namespace,\n    isList = true,\n    matchLabels,\n    matchExpressions,\n    prop,\n    fieldSelector,\n    optional,\n  }: {\n    name?: string;\n    namespace?: string;\n    namespaced?: boolean;\n    isList?: boolean;\n    matchLabels?: { [key: string]: string };\n    matchExpressions?: MatchExpression[];\n    prop?: string;\n    fieldSelector?: string;\n    optional?: boolean;\n  } = {\n    namespaced: true,\n    isList: true,\n  },\n) => {\n  const m = model.kind === NamespaceModel.kind ? ProjectModel : model;\n  const res: any = {\n    // non-admin user cannot list namespaces (k8s wont return only namespaces available to user but 403 forbidden, ).\n    // Instead we need to use ProjectModel which will return available projects (namespaces)\n    //\n    // FIXME: This is incorrect! `m.kind` is not unique. These model definitions should have `crd: true`, which will\n    // break this utility. We should be using `referenceForModel` and `crd: true` in our model definitions!\n    kind: m.kind,\n    model: m,\n    namespaced,\n    namespace,\n    isList,\n    prop: prop || model.kind,\n    optional,\n  };\n\n  if (name) {\n    res.name = name;\n  }\n  if (matchLabels) {\n    res.selector = { matchLabels };\n  }\n  if (matchExpressions) {\n    res.selector = { matchExpressions };\n  }\n  if (fieldSelector) {\n    res.fieldSelector = fieldSelector;\n  }\n\n  return res;\n};\n"]}]}