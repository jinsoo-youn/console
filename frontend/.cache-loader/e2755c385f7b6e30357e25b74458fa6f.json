{"remainingRequest":"/home/jinsoo/hypercloud-console5.0/frontend/node_modules/thread-loader/dist/cjs.js??ref--5-1!/home/jinsoo/hypercloud-console5.0/frontend/node_modules/ts-loader/index.js??ref--5-2!/home/jinsoo/hypercloud-console5.0/frontend/packages/console-shared/src/components/popper/Popper.tsx","dependencies":[{"path":"/home/jinsoo/hypercloud-console5.0/frontend/packages/console-shared/src/components/popper/Popper.tsx","mtime":1616735742370},{"path":"/home/jinsoo/hypercloud-console5.0/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1607306270906},{"path":"/home/jinsoo/hypercloud-console5.0/frontend/node_modules/thread-loader/dist/cjs.js","mtime":1607306283100},{"path":"/home/jinsoo/hypercloud-console5.0/frontend/node_modules/ts-loader/index.js","mtime":1607306283339}],"contextDependencies":[],"result":["import * as React from 'react';\nimport PopperJS from 'popper.js';\nimport { useCombineRefs } from '../../utils/useCombineRefs';\nimport Portal from './Portal';\nclass VirtualReference {\n    constructor({ height = 0, width = 0, x, y }) {\n        this.rect = {\n            bottom: y + height,\n            height,\n            left: x,\n            right: x + width,\n            top: y,\n            width,\n        };\n    }\n    getBoundingClientRect() {\n        return this.rect;\n    }\n    get clientWidth() {\n        return this.rect.width || 0;\n    }\n    get clientHeight() {\n        return this.rect.height || 0;\n    }\n}\nconst getReference = (reference) => 'getBoundingClientRect' in reference ? reference : new VirtualReference(reference);\nconst DEFAULT_POPPER_OPTIONS = {};\nconst Popper = ({ children, container, className, open, placement = 'bottom-start', reference, popperOptions = DEFAULT_POPPER_OPTIONS, closeOnEsc, closeOnOutsideClick, onRequestClose, popperRef: popperRefIn, zIndex = 9999, returnFocus, }) => {\n    const controlled = typeof open === 'boolean';\n    const openProp = controlled ? open || false : true;\n    const nodeRef = React.useRef();\n    const popperRef = React.useRef(null);\n    const popperRefs = useCombineRefs(popperRef, popperRefIn);\n    const [isOpen, setOpenState] = React.useState(openProp);\n    const focusRef = React.useRef();\n    const onRequestCloseRef = React.useRef(onRequestClose);\n    onRequestCloseRef.current = onRequestClose;\n    const setOpen = React.useCallback((newOpen) => {\n        if (returnFocus && newOpen !== isOpen) {\n            if (newOpen) {\n                if (document.activeElement) {\n                    focusRef.current = document.activeElement;\n                }\n            }\n            else if (focusRef.current instanceof HTMLElement && focusRef.current.ownerDocument) {\n                focusRef.current.focus();\n            }\n        }\n        setOpenState(newOpen);\n    }, [returnFocus, isOpen]);\n    React.useEffect(() => {\n        setOpen(openProp);\n    }, [openProp, setOpen]);\n    const onKeyDown = React.useCallback((e) => {\n        if (e.keyCode === 27) {\n            controlled ? onRequestCloseRef.current && onRequestCloseRef.current() : setOpen(false);\n        }\n    }, [controlled, setOpen]);\n    const onClickOutside = React.useCallback((e) => {\n        if (!nodeRef.current || (e.target instanceof Node && !nodeRef.current.contains(e.target))) {\n            controlled ? onRequestCloseRef.current && onRequestCloseRef.current(e) : setOpen(false);\n        }\n    }, [controlled, setOpen]);\n    const destroy = React.useCallback(() => {\n        if (popperRef.current) {\n            popperRef.current.destroy();\n            popperRefs(null);\n            document.removeEventListener('keydown', onKeyDown, true);\n            document.removeEventListener('mousedown', onClickOutside, true);\n            document.removeEventListener('touchstart', onClickOutside, true);\n        }\n    }, [onClickOutside, onKeyDown, popperRefs]);\n    const initialize = React.useCallback(() => {\n        if (!nodeRef.current || !reference || !isOpen) {\n            return;\n        }\n        destroy();\n        popperRefs(new PopperJS(getReference(typeof reference === 'function' ? reference() : reference), nodeRef.current, Object.assign(Object.assign({ placement }, popperOptions), { modifiers: Object.assign({ preventOverflow: {\n                    boundariesElement: 'window',\n                } }, popperOptions.modifiers) })));\n        // init document listenerrs\n        if (closeOnEsc) {\n            document.addEventListener('keydown', onKeyDown, true);\n        }\n        if (closeOnOutsideClick) {\n            document.addEventListener('mousedown', onClickOutside, true);\n            document.addEventListener('touchstart', onClickOutside, true);\n        }\n    }, [\n        popperRefs,\n        reference,\n        isOpen,\n        destroy,\n        placement,\n        popperOptions,\n        closeOnEsc,\n        closeOnOutsideClick,\n        onKeyDown,\n        onClickOutside,\n    ]);\n    const nodeRefCallback = React.useCallback((node) => {\n        nodeRef.current = node;\n        initialize();\n    }, [initialize]);\n    React.useEffect(() => {\n        initialize();\n    }, [initialize]);\n    React.useEffect(() => {\n        return () => {\n            destroy();\n        };\n    }, [destroy]);\n    React.useEffect(() => {\n        if (!isOpen) {\n            destroy();\n        }\n    }, [destroy, isOpen]);\n    return isOpen ? (React.createElement(Portal, { container: container },\n        React.createElement(\"div\", { ref: nodeRefCallback, className: className, style: { zIndex } }, children))) : null;\n};\nexport default Popper;\n",{"version":3,"file":"/home/jinsoo/hypercloud-console5.0/frontend/packages/console-shared/src/components/popper/Popper.tsx","sourceRoot":"","sources":["/home/jinsoo/hypercloud-console5.0/frontend/packages/console-shared/src/components/popper/Popper.tsx"],"names":[],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport PopperJS, { PopperOptions } from 'popper.js';\nimport { useCombineRefs } from '../../utils/useCombineRefs';\nimport Portal from './Portal';\n\n// alignment with PopperJS reference API\ntype PopperJSReference = {\n  getBoundingClientRect: PopperJS['reference']['getBoundingClientRect'];\n  clientWidth: number;\n  clientHeight: number;\n};\n\ntype ClientRectProp = { x: number; y: number; width?: number; height?: number };\n\ntype Reference = Element | PopperJSReference | ClientRectProp;\n\nclass VirtualReference implements PopperJSReference {\n  private rect: ClientRect;\n\n  constructor({ height = 0, width = 0, x, y }: ClientRectProp) {\n    this.rect = {\n      bottom: y + height,\n      height,\n      left: x,\n      right: x + width,\n      top: y,\n      width,\n    };\n  }\n\n  getBoundingClientRect(): ClientRect {\n    return this.rect;\n  }\n\n  get clientWidth(): number {\n    return this.rect.width || 0;\n  }\n\n  get clientHeight(): number {\n    return this.rect.height || 0;\n  }\n}\n\nconst getReference = (reference: Reference): PopperJSReference =>\n  'getBoundingClientRect' in reference ? reference : new VirtualReference(reference);\n\ntype PopperProps = {\n  closeOnEsc?: boolean;\n  closeOnOutsideClick?: boolean;\n  container?: React.ComponentProps<typeof Portal>['container'];\n  className?: string;\n  open?: boolean;\n  onRequestClose?: (e?: MouseEvent) => void;\n  placement?:\n    | 'bottom-end'\n    | 'bottom-start'\n    | 'bottom'\n    | 'left-end'\n    | 'left-start'\n    | 'left'\n    | 'right-end'\n    | 'right-start'\n    | 'right'\n    | 'top-end'\n    | 'top-start'\n    | 'top';\n  popperOptions?: PopperOptions;\n  popperRef?: React.Ref<PopperJS>;\n  reference: Reference | (() => Reference);\n  zIndex?: number;\n  returnFocus?: boolean;\n};\n\nconst DEFAULT_POPPER_OPTIONS: PopperOptions = {};\n\nconst Popper: React.FC<PopperProps> = ({\n  children,\n  container,\n  className,\n  open,\n  placement = 'bottom-start',\n  reference,\n  popperOptions = DEFAULT_POPPER_OPTIONS,\n  closeOnEsc,\n  closeOnOutsideClick,\n  onRequestClose,\n  popperRef: popperRefIn,\n  zIndex = 9999,\n  returnFocus,\n}) => {\n  const controlled = typeof open === 'boolean';\n  const openProp = controlled ? open || false : true;\n  const nodeRef = React.useRef<Element>();\n  const popperRef = React.useRef<PopperJS>(null);\n  const popperRefs = useCombineRefs<PopperJS>(popperRef, popperRefIn);\n  const [isOpen, setOpenState] = React.useState(openProp);\n  const focusRef = React.useRef<Element | null>();\n  const onRequestCloseRef = React.useRef(onRequestClose);\n  onRequestCloseRef.current = onRequestClose;\n\n  const setOpen = React.useCallback(\n    (newOpen: boolean) => {\n      if (returnFocus && newOpen !== isOpen) {\n        if (newOpen) {\n          if (document.activeElement) {\n            focusRef.current = document.activeElement;\n          }\n        } else if (focusRef.current instanceof HTMLElement && focusRef.current.ownerDocument) {\n          focusRef.current.focus();\n        }\n      }\n      setOpenState(newOpen);\n    },\n    [returnFocus, isOpen],\n  );\n\n  React.useEffect(() => {\n    setOpen(openProp);\n  }, [openProp, setOpen]);\n\n  const onKeyDown = React.useCallback(\n    (e: KeyboardEvent) => {\n      if (e.keyCode === 27) {\n        controlled ? onRequestCloseRef.current && onRequestCloseRef.current() : setOpen(false);\n      }\n    },\n    [controlled, setOpen],\n  );\n\n  const onClickOutside = React.useCallback(\n    (e: MouseEvent) => {\n      if (!nodeRef.current || (e.target instanceof Node && !nodeRef.current.contains(e.target))) {\n        controlled ? onRequestCloseRef.current && onRequestCloseRef.current(e) : setOpen(false);\n      }\n    },\n    [controlled, setOpen],\n  );\n\n  const destroy = React.useCallback(() => {\n    if (popperRef.current) {\n      popperRef.current.destroy();\n      popperRefs(null);\n      document.removeEventListener('keydown', onKeyDown, true);\n      document.removeEventListener('mousedown', onClickOutside, true);\n      document.removeEventListener('touchstart', onClickOutside, true);\n    }\n  }, [onClickOutside, onKeyDown, popperRefs]);\n\n  const initialize = React.useCallback(() => {\n    if (!nodeRef.current || !reference || !isOpen) {\n      return;\n    }\n\n    destroy();\n\n    popperRefs(\n      new PopperJS(\n        getReference(typeof reference === 'function' ? reference() : reference),\n        nodeRef.current,\n        {\n          placement,\n          ...popperOptions,\n          modifiers: {\n            preventOverflow: {\n              boundariesElement: 'window',\n            },\n            ...popperOptions.modifiers,\n          },\n        },\n      ),\n    );\n\n    // init document listenerrs\n    if (closeOnEsc) {\n      document.addEventListener('keydown', onKeyDown, true);\n    }\n    if (closeOnOutsideClick) {\n      document.addEventListener('mousedown', onClickOutside, true);\n      document.addEventListener('touchstart', onClickOutside, true);\n    }\n  }, [\n    popperRefs,\n    reference,\n    isOpen,\n    destroy,\n    placement,\n    popperOptions,\n    closeOnEsc,\n    closeOnOutsideClick,\n    onKeyDown,\n    onClickOutside,\n  ]);\n\n  const nodeRefCallback = React.useCallback(\n    (node) => {\n      nodeRef.current = node;\n      initialize();\n    },\n    [initialize],\n  );\n\n  React.useEffect(() => {\n    initialize();\n  }, [initialize]);\n\n  React.useEffect(() => {\n    return () => {\n      destroy();\n    };\n  }, [destroy]);\n\n  React.useEffect(() => {\n    if (!isOpen) {\n      destroy();\n    }\n  }, [destroy, isOpen]);\n\n  return isOpen ? (\n    <Portal container={container}>\n      <div ref={nodeRefCallback} className={className} style={{ zIndex }}>\n        {children}\n      </div>\n    </Portal>\n  ) : null;\n};\n\nexport default Popper;\n"]}]}