{"remainingRequest":"/home/jinsoo/hypercloud-console5.0/frontend/node_modules/thread-loader/dist/cjs.js??ref--5-1!/home/jinsoo/hypercloud-console5.0/frontend/node_modules/ts-loader/index.js??ref--5-2!/home/jinsoo/hypercloud-console5.0/frontend/public/components/modals/delete-modal.jsx","dependencies":[{"path":"/home/jinsoo/hypercloud-console5.0/frontend/public/components/modals/delete-modal.jsx","mtime":1616735742470},{"path":"/home/jinsoo/hypercloud-console5.0/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1607306270906},{"path":"/home/jinsoo/hypercloud-console5.0/frontend/node_modules/thread-loader/dist/cjs.js","mtime":1607306283100},{"path":"/home/jinsoo/hypercloud-console5.0/frontend/node_modules/ts-loader/index.js","mtime":1607306283339}],"contextDependencies":[],"result":["import * as _ from 'lodash-es';\nimport * as React from 'react';\nimport { createModalLauncher, ModalTitle, ModalBody, ModalSubmitFooter } from '../factory/modal';\nimport { PromiseComponent, history, resourceListPathFromModel } from '../utils';\nimport { k8sKill } from '../../module/k8s/';\nimport { YellowExclamationTriangleIcon } from '@console/shared';\nimport { withTranslation } from 'react-i18next';\n//Modal for resource deletion and allows cascading deletes if propagationPolicy is provided for the enum\nclass DeleteModal extends PromiseComponent {\n    constructor(props) {\n        super(props);\n        this._submit = this._submit.bind(this);\n        this._cancel = this.props.cancel.bind(this);\n        this.state = Object.assign(this.state, {\n            isChecked: true,\n        });\n    }\n    _submit(event) {\n        event.preventDefault();\n        const { kind, resource } = this.props;\n        //https://kubernetes.io/docs/concepts/workloads/controllers/garbage-collection/\n        const propagationPolicy = this.state.isChecked ? kind.propagationPolicy : 'Orphan';\n        const json = propagationPolicy ? { kind: 'DeleteOptions', apiVersion: 'v1', propagationPolicy } : null;\n        this.handlePromise(k8sKill(kind, resource, {}, json)).then(() => {\n            this.props.close();\n            // If we are currently on the deleted resource's page, redirect to the resource list page\n            const re = new RegExp(`/${resource.metadata.name}(/|$)`);\n            if (re.test(window.location.pathname)) {\n                const listPath = this.props.redirectTo ? this.props.redirectTo : resourceListPathFromModel(kind, _.get(resource, 'metadata.namespace'));\n                history.push(listPath);\n            }\n        });\n    }\n    _onChecked() {\n        this.checked = !this.checked;\n    }\n    render() {\n        const { kind, resource, message, t } = this.props;\n        const resourceUpperCase = kind.label.toUpperCase();\n        return (React.createElement(\"form\", { onSubmit: this._submit, name: \"form\", className: \"modal-content \" },\n            React.createElement(ModalTitle, null,\n                React.createElement(YellowExclamationTriangleIcon, { className: \"co-icon-space-r\" }),\n                t('COMMON:MSG_MAIN_ACTIONBUTTON_16', { 0: t(resourceUpperCase) }),\n                \"?\"),\n            React.createElement(ModalBody, { className: \"modal-body\" },\n                message,\n                React.createElement(\"div\", null,\n                    \"Are you sure you want to delete \",\n                    React.createElement(\"strong\", { className: \"co-break-word\" }, resource.metadata.name),\n                    _.has(resource.metadata, 'namespace') && (React.createElement(\"span\", null,\n                        ' ',\n                        \"in namespace \",\n                        React.createElement(\"strong\", null, resource.metadata.namespace))),\n                    \"?\",\n                    _.has(kind, 'propagationPolicy') && (React.createElement(\"div\", { className: \"checkbox\" },\n                        React.createElement(\"label\", { className: \"control-label\" },\n                            React.createElement(\"input\", { type: \"checkbox\", onChange: () => this.setState({ isChecked: !this.state.isChecked }), checked: !!this.state.isChecked }),\n                            \"Delete dependent objects of this resource\"))))),\n            React.createElement(ModalSubmitFooter, { errorMessage: this.state.errorMessage, inProgress: this.state.inProgress, submitDanger: true, submitText: this.props.btnText || `${t('DELETE')}`, cancel: this._cancel })));\n    }\n}\nexport const deleteModal = createModalLauncher(withTranslation()(DeleteModal));\n",{"version":3,"file":"/home/jinsoo/hypercloud-console5.0/frontend/public/components/modals/delete-modal.jsx","sourceRoot":"","sources":["/home/jinsoo/hypercloud-console5.0/frontend/public/components/modals/delete-modal.jsx"],"names":[],"mappings":"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","sourcesContent":["import * as _ from 'lodash-es';\nimport * as React from 'react';\n\nimport { createModalLauncher, ModalTitle, ModalBody, ModalSubmitFooter } from '../factory/modal';\nimport { PromiseComponent, history, resourceListPathFromModel } from '../utils';\nimport { k8sKill } from '../../module/k8s/';\nimport { YellowExclamationTriangleIcon } from '@console/shared';\nimport { withTranslation } from 'react-i18next';\n//Modal for resource deletion and allows cascading deletes if propagationPolicy is provided for the enum\nclass DeleteModal extends PromiseComponent {\n  constructor(props) {\n    super(props);\n    this._submit = this._submit.bind(this);\n    this._cancel = this.props.cancel.bind(this);\n    this.state = Object.assign(this.state, {\n      isChecked: true,\n    });\n  }\n\n  _submit(event) {\n    event.preventDefault();\n    const { kind, resource } = this.props;\n\n    //https://kubernetes.io/docs/concepts/workloads/controllers/garbage-collection/\n    const propagationPolicy = this.state.isChecked ? kind.propagationPolicy : 'Orphan';\n    const json = propagationPolicy ? { kind: 'DeleteOptions', apiVersion: 'v1', propagationPolicy } : null;\n\n    this.handlePromise(k8sKill(kind, resource, {}, json)).then(() => {\n      this.props.close();\n\n      // If we are currently on the deleted resource's page, redirect to the resource list page\n      const re = new RegExp(`/${resource.metadata.name}(/|$)`);\n      if (re.test(window.location.pathname)) {\n        const listPath = this.props.redirectTo ? this.props.redirectTo : resourceListPathFromModel(kind, _.get(resource, 'metadata.namespace'));\n        history.push(listPath);\n      }\n    });\n  }\n\n  _onChecked() {\n    this.checked = !this.checked;\n  }\n\n  render() {\n    const { kind, resource, message, t } = this.props;\n    const resourceUpperCase = kind.label.toUpperCase();\n    return (\n      <form onSubmit={this._submit} name=\"form\" className=\"modal-content \">\n        <ModalTitle>\n          <YellowExclamationTriangleIcon className=\"co-icon-space-r\" />\n          {t('COMMON:MSG_MAIN_ACTIONBUTTON_16', { 0: t(resourceUpperCase) })}?\n        </ModalTitle>\n        <ModalBody className=\"modal-body\">\n          {message}\n          <div>\n            Are you sure you want to delete <strong className=\"co-break-word\">{resource.metadata.name}</strong>\n            {_.has(resource.metadata, 'namespace') && (\n              <span>\n                {' '}\n                in namespace <strong>{resource.metadata.namespace}</strong>\n              </span>\n            )}\n            ?\n            {_.has(kind, 'propagationPolicy') && (\n              <div className=\"checkbox\">\n                <label className=\"control-label\">\n                  <input type=\"checkbox\" onChange={() => this.setState({ isChecked: !this.state.isChecked })} checked={!!this.state.isChecked} />\n                  Delete dependent objects of this resource\n                </label>\n              </div>\n            )}\n          </div>\n        </ModalBody>\n        <ModalSubmitFooter errorMessage={this.state.errorMessage} inProgress={this.state.inProgress} submitDanger submitText={this.props.btnText || `${t('DELETE')}`} cancel={this._cancel} />\n      </form>\n    );\n  }\n}\n\nexport const deleteModal = createModalLauncher(withTranslation()(DeleteModal));\n"]}]}